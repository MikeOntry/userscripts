// ==UserScript==
// @name            eRepublik Stuff +
// @version         2.1.33
// @author          Boban Stajic [Modified by Milutin Jaric]
// @namespace       erepublik_stuff
// @description     Makes eRepublik life easier +.
// @require         https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js
// @require         http://malsup.github.io/jquery.blockUI.js
// @require         http://hosting-files.googlecode.com/files/jquery.tipsy.js
// @require         https://github.com/Robdel12/DropKick/raw/master/production/dropkick.min.js
// @require         https://github.com/Robdel12/DropKick/raw/master/plugins/dropkick.jquery.js
// @include         http*://*www.erepublik.com/*
// @exclude         /^http(.*)://www\.erepublik\.com/(.*)/(get-gold|loyalty/program|gold-bonus|map)(.*)/
// @license         http://creativecommons.org/licenses/by-nc-nd/4.0/
// @downloadURL     http://userscripts.org:8080/scripts/source/156586.user.js
// @updateURL       http://userscripts.org:8080/scripts/source/156586.meta.js
// @grant           GM_setValue
// @grant           GM_getValue
// @grant           GM_deleteValue
// @grant           GM_addStyle
// @grant           GM_xmlhttpRequest
// @grant           unsafeWindow
// ==/UserScript==

function initBattle(){var a=$(".country.left_side").html().split("<h3>")[1].split("</h3>")[0];eRS.country==a&&(bonusCountry=!0);$("#pvp").bind("DOMNodeInserted",function(a){"none"!=$("#collection_complete").css("display")&&$("#pvp").unblock()});setDamageKills()}
function setDamageKills(){$j(document).ajaxSuccess(function(a,c,b){if(null!=b.url.match(/military\/fight-shoot$/)||null!=b.url.match(/military\/fight-shoot/)||null!=b.url.match(/military\/fight-shooot/)||null!=b.url.match(/military\/deploy-bomb/))if(a=JSON.parse(c.responseText),c=a.message,!a.error&&("ENEMY_KILLED"==c||"OK"==c)){var d=c=0;null!=b.url.match(/military\/deploy-bomb/)?(weaponDamage=a.bomb.booster_id,c=a.bomb.damage):(c=a.user.givenDamage,d=a.user.earnedXp,!0==a.oldEnemy.isNatural&&(c+=
Math.floor(.1*c)));Kills+=1;Damage+=c;Hits+=d;setTimeout(function(){GM_setValue(eRS.citizenId+".killsToday"+date,Kills);GM_setValue(eRS.citizenId+".damageToday"+date,Damage);GM_setValue(eRS.citizenId+".hitsToday"+date,Hits)},0);ShowKillDamage(1);!0==bonusCountry&&!0==options.TPmedal&&updateTP(c)}})}function coma(a){if(1E3<=a){a+="";for(var c=/(\d+)(\d{3})/;c.test(a);)a=a.replace(c,"$1,$2")}return a}
function ShowKillDamage(a){var c=coma(Damage+Guerrilla);1==a?$(".user_finances.NoKills").html('<strong style="padding: 3px; font-size: 12px; color: #666">Kills today: </strong><br><span style="color: #3c8fa7; float: right; padding-right: 3px; font-size: 13px; font-weight: bold;">'+Kills+'</span><br><strong style="padding: 3px; font-size: 12px; color: #666;">Damage today: </strong><br><span style="color: #3c8fa7; float: right; padding-right: 3px; font-size: 13px; font-weight: bold; ">'+c+'</span><br><strong style="padding: 3px; font-size: 12px; color: #666">Hits today: </strong><br><span style="color: #3c8fa7; float: right; padding-right: 3px; font-size: 13px; font-weight: bold;">'+
Hits+"</span>"):$("#eRS_logo_holder").before('<div style="1px solid #DFDFDF; margin-bottom: 5px;" class="user_finances NoKills"><strong style="padding: 3px; font-size: 12px; color: #666">Kills today: </strong><br><span style="color: #3c8fa7; float: right; padding-right: 3px; font-size: 13px; font-weight: bold;">'+Kills+'</span><br><strong style="padding: 3px; font-size: 12px; color: #666;">Damage today: </strong><br><span style="color: #3c8fa7; float: right; padding-right: 3px; font-size: 13px; font-weight: bold; ">'+
c+'</span><br><strong style="padding: 3px; font-size: 12px; color: #666">Hits today: </strong><br><span style="color: #3c8fa7; float: right; padding-right: 3px; font-size: 13px; font-weight: bold;">'+Hits+"</span></div>")}function checkID(){var a=window.location.toString().split("/");return eRS.citizenId==a[6]?!0:!1}
function last5Days(){if(!0==checkID()){for(var a=parseInt(date),c,b=0,d,e=0,f,g=0,h,m=0,l,k=0,n,p="",s=0;4>=s;s++)c=parseInt(GM_getValue(eRS.citizenId+".hitsToday"+(a-s),0)),d=parseInt(GM_getValue(eRS.citizenId+".killsToday"+(a-s),0)),f=parseInt(GM_getValue(eRS.citizenId+".damageToday"+(a-s),0)),h=parseInt(GM_getValue(eRS.citizenId+".guerrillaToday"+(a-s),0)),b+=c,e+=d,g+=f+h,m+=h,l=Math.floor(.1*(f+h)),k+=l,n=0==c?0:Math.floor((f+h)/c),p+='<tr class="current"><td style="color: #666666; font-size: 11px; width: 230px; padding-left: 10px;">'+
(a-s)+'</td><td style="color: #666666; font-size: 11px; width: 50px;">'+c+'</td><td style="color: #666666; font-size: 11px; width: 50px;">'+d+'</td><td style="color: #666666; font-size: 11px; width: 70px;">'+(f+h)+'</td><td style="color: #666666; font-size: 11px; width: 70px;">'+h+'</td><td style="color: #666666; font-size: 11px; width: 50px;">'+l+'</td><td style="color: #666666; font-size: 11px; width: 50px;">'+n+"</td></tr>";p+='<tr class="current" style="font-weight: bold;"><td style="color: #999999; font-size: 11px; width: 230px; padding-right: 30px; text-align: right;">Total</td><td style="color: #999999; font-size: 11px;">'+
b+'</td><td style="color: #999999; font-size: 11px;">'+e+'</td><td style="color: #999999; font-size: 11px; width: 70px;">'+g+'</td><td style="color: #999999; font-size: 11px; width: 70px;">'+m+'</td><td style="color: #999999; font-size: 11px; width: 50px;">'+k+'</td><td style="color: #999999; font-size: 11px; width: 50px;">&nbsp;</td></tr><tr class="current" style="font-weight: bold;"><td style="color: #999999; font-size: 11px; width: 230px; padding-right: 30px; text-align: right;">Average</td><td style="color: #999999; font-size: 11px;">'+
Math.floor(b/5)+'</td><td style="color: #999999; font-size: 11px;">'+Math.floor(e/5)+'</td><td style="color: #999999; font-size: 11px; width: 70px;">'+Math.floor(g/5)+'</td><td style="color: #999999; font-size: 11px; width: 70px;">'+Math.floor(m/5)+'</td><td style="color: #999999; font-size: 11px; width: 50px;">'+Math.floor(k/5)+'</td><td style="color: #999999; font-size: 11px; width: 50px;">&nbsp;</td></tr>';$("#eRS_InfCalc").after('<div class="clear"></div><h3>Influence Done</h3><div id="eRS_InfInfo" class="citizen_military"><table id="influTable" border="0" width="100%" class="details"><thead><tr><th style="padding-left: 10px;">eDay</th><th>Hits</th><th>Kills</th><th>Influence</th><th>Guerrilla</th><th>Rank</th><th>Av. hit</th></tr></thead><tbody>'+
p+'</tbody></table></div><div class="clear"></div>')}}
function TP(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/en/citizen/profile/"+eRS.citizenId,dataType:"html",onload:function(a){a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");var c=parseFloat($(a).find(".citizen_military").eq(2).find(".mids").css("width").split("%")[0]);currentTP=parseFloat($(a).find(".citizen_military").eq(2).find("strong:last").text().split("/")[0].replace(/,/g,"").trim());nextTP=parseFloat($(a).find(".citizen_military").eq(2).find("strong:last").text().split("/")[1].replace(/,/g,
"").trim());doneTP=(nextTP-currentTP)/(100-c)*c;startTP=currentTP-doneTP;i=doneTP/(nextTP-startTP)*100;0==$(".tp_barr").length?($("#total_damage").attr("style","bottom: 40px!important;"),$("#player_rank").attr("style","bottom: 140px!important;"),$("#player_rank").after('<div id="player_rank" class="tp_barr" style="bottom: 96px!important;"><div id="rank_icon" class="rank_icon" original-title="TP Medal" style="z-index: 3!important;"><img alt="" src="http://www.erepublik.com/images/modules/rankings/icons/true_patriot.png" style="image-rendering width: 38px!important; height: 38px!important;"></div><div class="rank_holder"><b id="gained_rank2">&nbsp;</b><strong id="rank_max2" original-title="Next TP Medal at:&nbsp;'+
coma(nextTP)+'"><span id="rank_min2">'+coma(currentTP)+' TP points</span> </strong><div style="width:'+i+'%" class="rank_bar" id="rank_status_gained2"><img alt="" class="dot" src="http://www.erepublik.com/images/modules/pvp/line_dot.png"></div><div style="width:0%" class="rank_bar gained" id="rank_status2"><img alt="" src="http://www.erepublik.com/images/modules/pvp/life_shadow.png"></div></div>')):($("#rank_min2").text(""),$("#rank_min2").text(coma(currentTP)+" TP Points"));$("#rank_max2").tipsy({gravity:"s"})}})}
function updateTP(a){currentTP+=a;doneTP+=a;var c=$j("#gained_rank2"),b=new unsafeWindow.TimelineMax;c.text("+"+a);c.removeAttr("style");c.css("display","block");b.to(c,.6,{opacity:"1",left:"11px",ease:"Bounce.easeOut",onComplete:function(){c.css("left","11px")}}).to(c,.1,{color:"#FFFFFF",scale:1.4}).to(c,.1,{color:"#FFDC50",scale:1}).to(c,.5,{opacity:"0",delay:2,left:"85px",ease:"Back.easeOut",onComplete:function(){c.removeAttr("style")}});$("#rank_min2").text(coma(currentTP)+" TP Points");currentTP>=
nextTP&&setTimeout(TP,2E3)}
function UpdateMenu(){$("#menu2").html('<p></p><a href="javascript:;"><span>My places</span></a><ul><li><a href="http://www.erepublik.com/'+LANG+'/economy/myCompanies">My companies</a></li><li><a href="http://www.erepublik.com/'+LANG+'/economy/manage-employees/1">Manage employees</a></li><li><a href="http://www.erepublik.com/'+LANG+'/economy/training-grounds">Training grounds</a></li><li><a href="http://www.erepublik.com/'+LANG+'/economy/inventory">Storage</a></li><li><a href="http://www.erepublik.com/'+LANG+
'/economy/advanced-buildings">Advanced buildings</a></li></ul></li>');$("#menu2 a").css("background",'url("http://img138.imageshack.us/img138/4554/menuerepubliknew.jpg") no-repeat scroll -73px 0 transparent');$("#menu2 a").css("cursor","default");$("#menu2 li a").css("cursor","");$("#menu2 a").hover(function(){$("#menu2 a").css("background",'url("http://img138.imageshack.us/img138/4554/menuerepubliknew.jpg") no-repeat scroll -73px -57px transparent')},function(){$("#menu2 a").css("background",'url("http://img138.imageshack.us/img138/4554/menuerepubliknew.jpg") no-repeat scroll -73px 0 transparent')})}
function KillExclamationMark(){$("#point").remove()}
function NaturalEnemy(a){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/country/military/"+eRS.country,dataType:"html",onload:function(c){c=c.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");c.split("nameholder")[1].split("</div>")[0].split('">')[1].trim();0<$(c).find(".indent:eq(0) .attacker img").length&&(neCountry=c.split("flagholder")[1].split('src="')[1].split('"')[0].split("/")[6].split(".")[0].trim(),3==a?CheckAttacker():
2==a?ShowNaturalEnemyBattle():$(".bod_listing li, #battle_listing .bod_listing li, #battle_listing .country_battles li, #battle_listing .victory_listing li").each(function(){0==a?ShowNaturalEnemyWar($(this)):ShowNaturalEnemyMain($(this))}))}})}function CheckAttacker(){0==unsafeWindow.SERVER_DATA.isResistance&&$(".country.right_side a img").attr("src").split("/")[6].split(".")[0].trim()==neCountry&&(bonusNE=!0)}
function ShowNaturalEnemyBattle(){$(".country.right_side a img").attr("src").split("/")[6].split(".")[0].trim()==neCountry&&0==unsafeWindow.SERVER_DATA.isResistance&&$(".country.right_side a img").first().after('<img alt="" title="Natural enemy" src="'+neIcon+'" style="margin-top: -2px; position: absolute; margin-left: -9px;">')}
function ShowNaturalEnemyMain(a){a.find(".side_flags").each(function(){var a=$(this);if(a.attr("src").split("/")[6].split(".")[0]==eRS.country){var b=a.parent();a.parent().hasClass("opponent_holder")&&(b=a.parent().parent());$(b).find('img[src*="'+neCountry+'"]').each(function(){var a=$(this);void 0==$(b).find('img[class*="resistance_sign"]').attr("title")&&(a.before('<img alt="" title="Natural enemy" src="'+neIcon+'" class="natural_sign">'),1<a.index()?a.prev().addClass("two"):a.prev().addClass("one"))})}})}
function ShowNaturalEnemyWar(a){a.find(".side_flags").each(function(){var a=$(this);if(a.attr("src").split("/")[6].split(".")[0]==eRS.country){var b=a.parent();a.parent().hasClass("opponent_holder")&&(b=a.parent().parent());$(b).find('img[src*="'+neCountry+'"]').each(function(){var a=$(this);a.parent().parent().hasClass("victory_listing")&&(a.wrap('<div class="opponent_holder">'),b=a.parent().parent());void 0==$(b).find('img[class*="resistance_sign"]').attr("title")&&(a.before('<img alt="" title="Natural enemy" src="'+
neIcon+'" class="natural_sign">'),a.parent().hasClass("opponent_holder")?a.prev().addClass("two"):a.prev().addClass("one"))})}})}function AddFlagTip(){$(".user_country").attr("original-title","Click to find out more about this country.");$(".user_country").tipsy({gravity:"s"})}
function MaxRecoverEnergy(){setInterval(function(){$("#maxRecover").remove();var a=$(".tooltip_health_limit").text().trim();$("#current_health").after('<strong id="maxRecover" style="text-align: right!important; margin-right: 5px;">'+a+"</strong>")},1E3)}
function StorageInventory(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/inventory",dataType:"html",onload:function(a){var c=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""),b=$.parseJSON(c.split("var itemAmounts = ")[1].split("var itemPartials")[0].trim().split(";")[0]),d=$.parseJSON(c.split("var itemPartials = ")[1].split("var countryList")[0].trim().split(";")[0]);a=[];var e="",f="enabled";if(2==options.VerHor)var g=
'style="margin-left: 3px; margin-right: 3px;"',h='style="margin-left: 3px;"',m='style="margin-right: 3px;"';for(var l=1;2>=l;l++)for(var k=1;8>=k;k++)if(7>=k){var n="undefined"==typeof b[l][k]?0:b[l][k],f=0!=n?"enabled":"disabled",n=coma(n),e=1==l?6==k?"Food quality Q6 <br> Energy restore 12/use":7==k?"Food quality Q7 <br> Energy restore 20/use":"Food quality Q"+k+" <br> Energy restore "+2*k+"/use":6==k?"Weapon quality Q6 <br> Fire power: 120 - Durability: 6 uses":7==k?"Weapon quality Q7 <br> Fire power: 200 - Durability: 10 uses":
"Weapon quality Q"+k+" <br> Fire power: "+20*k+" - Durability: "+k+" uses";"undefined"!=typeof d[l][k]&&0!=d[l][k]&&(e+="<br>1 partially used. Durability: "+d[l][k]+" uses");a.push('<li class="first '+f+'" original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/'+l+"/q"+k+'_30x30.png" alt=""><br><strong>'+n+"</strong></li>");e=""}else 1==l&&8==k?(n="undefined"==typeof b[l][k+2]?0:b[l][k+2],f=0!=n?"enabled":"disabled",n=coma(n),e="Energy Bar <br> Energy restore 100/energy bar",
a.push('<li class="first '+f+'" '+g+' original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/1/q10.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+n+"</strong></li>"),e="",n="undefined"==typeof b[l][k+3]?0:b[l][k+3],f=0!=n?"enabled":"disabled",n=coma(n),e="Double Energy Bar <br> Energy restore 200/energy bar",a.push('<li class="first '+f+'" '+g+' original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/1/q11.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+
n+"</strong></li>"),e=""):2==l&&8==k&&(n="undefined"==typeof b[l][k+2]?0:b[l][k+2],f=0!=n?"enabled":"disabled",n=coma(n),e="Bazooka<br>Defeat enemy with one hit<br>Damage: 10,000 - Durability: 3 uses","undefined"!=typeof d[l][k+2]&&0!=d[l][k+2]&&(e+="<br>1 partially used. Durability: "+d[l][k+2]+" uses"),a.push('<li class="center '+f+'" '+h+' original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/000/1.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+n+"</strong></li>"),
e="");var e=GetDivision(parseInt($(".user_level b").text())),p;switch(e){case 1:p=75E3;break;case 2:p=375E3;break;case 3:p=75E4;break;case 4:p=15E5}g="undefined"==typeof b[2][parseInt("1"+e)]?0:b[2][parseInt("1"+e)];f=0!=g?"enabled":"disabled";e="Bazooka booster<br>Damage: +"+coma(1E4*e)+" - Durability: 3 uses";a.push('<li class="last '+f+'" original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/999/1.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+coma(g)+"</strong></li>");
e="Food raw material";g="undefined"==typeof b[7][1]?0:b[7][1];f=0!=g?"enabled":"disabled";g=coma(g);a.push('<li class="last '+f+'" original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/7/default.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+g+"</strong></li>");e="Weapon raw material";g="undefined"==typeof b[12][1]?0:b[12][1];f=0!=g?"enabled":"disabled";g=coma(g);a.push('<li class="last '+f+'" '+m+' original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/12/default.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+
g+"</strong></li>");h=g=m=e=f=0;-1!=c.indexOf("item bgrocket q1")&&(f="undefined"==typeof b[2][141]?0:b[2][141]);-1!=c.indexOf("item bgrocket q2")&&(e="undefined"==typeof b[2][141]?0:b[2][141]);-1!=c.indexOf("item bgrocket q3")&&(m="undefined"==typeof b[2][141]?0:b[2][141]);-1!=c.indexOf("item bgrocket q4")&&(g="undefined"==typeof b[2][141]?0:b[2][141]);-1!=c.indexOf("item bgrocket q5")&&(h="undefined"==typeof b[2][141]?0:b[2][141]);a.push('<li class="last '+(0!=f?"enabled":"disabled")+'" original-title="Rocket quality Q1<br>Damage: 50,000 - Durability: 1 use"><img src="http://www.erepublik.com/images/icons/industry/999/26.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+
f+"</strong></li>");a.push('<li class="last '+(0!=e?"enabled":"disabled")+'" original-title="Rocket quality Q2<br>Damage: 250,000 - Durability: 1 use"><img src="http://www.erepublik.com/images/icons/industry/999/27.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+e+"</strong></li>");a.push('<li class="last '+(0!=m?"enabled":"disabled")+'" original-title="Rocket quality Q3<br>Damage: 500,000 - Durability: 1 use"><img src="http://www.erepublik.com/images/icons/industry/999/28.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+
m+"</strong></li>");a.push('<li class="last '+(0!=g?"enabled":"disabled")+'" original-title="Rocket quality Q4<br>Damage: 1,000,000 - Durability: 1 use"><img src="http://www.erepublik.com/images/icons/industry/999/29.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+g+"</strong></li>");a.push('<li class="last '+(0!=h?"enabled":"disabled")+'" original-title="Rocket quality Q5<br>Damage: 2,500,000 - Durability: 1 use"><img src="http://www.erepublik.com/images/icons/industry/999/291.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+
h+"</strong></li>");e="BH Rocket<br>Damage: "+coma(p)+" - Durability: 1 use";p=-1!=c.indexOf("/999/21.png")?parseInt(c.split("/999/21.png")[1].split("</strong>")[0].split('">')[1].trim()):0;f=0!=p?"enabled":"disabled";p=coma(p);a.push('<li class="last '+f+'" original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/999/21.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+p+"</strong></li>");e="CH Bomb<br>Damage: 5,000,000 - Durability: 1 use";c=-1!=c.indexOf("/999/22.png")?
parseInt(c.split("/999/22.png")[1].split("</strong>")[0].split('">')[1].trim()):0;f=0!=c?"enabled":"disabled";c=coma(c);a.push('<li class="last '+f+'" original-title="'+e+'"><img src="http://www.erepublik.com/images/icons/industry/999/22.png" style="width: 29px; height: 29px;" alt=""><br><strong>'+c+"</strong></li>");1==options.VerHor?GM_addStyle("#navig{width: 122px; border-right:1px solid #ddd; display:block; position:fixed; top:0px; left:0px; bottom:0px; background:#fff url(http://img819.imageshack.us/img819/5474/bgl.png) repeat-y center left; z-index:2001;}"):
2==options.VerHor&&GM_addStyle("#navig{height:50px; border-bottom:1px solid #ddd; display:block; position:fixed; top:0px; left:0px; right:0px; background:#fff url(http://img819.imageshack.us/img819/5474/bgl.png) repeat-x center left; z-index:2001;}");GM_addStyle("#navig ul{height:50px; list-style:none;}");GM_addStyle("#navig li.enabled{width:40px; background-image: url(http://i.imgur.com/5JCXROD.png); background-position: 1px center; background-repeat: no-repeat; cursor: default; float: left; height: 50px; overflow: hidden; position: relative; text-align: center;}");
GM_addStyle("#navig li.disabled{width:40px; background-image: url(http://i.imgur.com/5JCXROD.png); background-position: -82px 0; background-repeat: no-repeat; cursor: default; float: left; height: 50px; overflow: hidden; position: relative; text-align: center;}");GM_addStyle("#navig li:hover{background-position: -41px 0;}");GM_addStyle("#navig li strong,#navig li .maxCap {margin-left: 3px; vertical-align:bottom; font-family:Arial,Helvetica,sans-serif; color: #578B4D; font-size: 11px; text-align: right; text-shadow: 0 1px 0 #C4E8B3;}");
GM_addStyle("#navig li.disabled strong{color: #a6a4a4 !important;}");GM_addStyle("#navig li img{vertical-align: middle; margin-top: 3px; margin-bottom: -3px; }");GM_addStyle("#navig li.disabled img{opacity: 0.3}");GM_addStyle("#navig .maxCap{ margin-top: 3px; margin-left: 0px!important; text-align:center!important; margin-bottom: -3px; width: 40px; line-height: 30px;}");p="";b=0;f="122px;";c=e=0;if(2==options.VerHor)for(e=0;e<a.length;e++)2==options.AllStock?0!=parseInt($(a[e]).find("strong").text())&&
(p+=a[e],c+=1):(p+=a[e],c+=1);else if(1==options.VerHor)if(1==options.AllStock)for(e=0;e<a.length;e++)p+=a[e];else if(2==options.AllStock){for(e=0;e<a.length;e++)0!=parseInt($(a[e]).find("strong").text())&&(b+=1);if(12>=b){for(e=0;e<a.length;e++)0!=parseInt($(a[e]).find("strong").text())&&(p+=a[e]);f="42px"}else if(24>=b){for(e=0;e<a.length;e++)0!=parseInt($(a[e]).find("strong").text())&&(p+=a[e]);f="82px"}else for(e=0;e<a.length;e++)0!=parseInt($(a[e]).find("strong").text())&&(p+=a[e])}$("#navig").remove();
$("body").before('<div id="navig"><ul>'+p+"</ul></div>");$("#navig").css({width:f});$("#navig li.disabled").hover(function(){$(this).find("img").css({opacity:1})},function(){$(this).find("img").css({opacity:.3})});1==options.VerHor?$("#navig ul li").tipsy({gravity:"nw",html:!0}):(a=$("#navig ul").width(),c=parseInt(($(window).width()-(40*c+18))/2+$(window).scrollLeft())+"px",$("#navig ul").css("width",""+a+"px"),$("#navig ul").css("margin-left",c),$("#navig ul li.first").tipsy({gravity:"nw",html:!0}),
$("#navig ul li.center").tipsy({gravity:"n",html:!0}),$("#navig ul li.last").tipsy({gravity:"ne",html:!0}),$(".at").css("margin-top","50px"),$("#logo").css("margin-top","5px"),$(window).scroll(function(){0!=$(window).scrollTop()?$("#navig").stop().animate({opacity:"0.2"},400):$("#navig").stop().animate({opacity:"1"},400)}),$("#navig").hover(function(a){0!=$(window).scrollTop()&&$("#navig").stop().animate({opacity:"1"},400)},function(a){0!=$(window).scrollTop()&&$("#navig").stop().animate({opacity:"0.2"},
400)}))}})}
function StorageCapacity(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/inventory",dataType:"html",onload:function(a){GM_addStyle(".storageInfo {clear: both; float: left; height: 22px; margin-left: 6px; width: 142px;}");GM_addStyle(".storageInfo p{color: #585858; cursor: default; float: left; font-size: 12px; text-shadow: 0 1px 0 #FFFFFF;}");GM_addStyle(".storageInfo p img{float: left; margin-left: 2px; margin-right: 6px; margin-top: 0px;}");GM_addStyle(".storageInfo p strong{font-weight: bold;}");var c=
$(a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""));a=c.find(".area.storage strong").text().split("/")[1].split(")")[0].trim();c=c.find(".area.storage strong").text().split("/")[0].split("(")[1].trim();$(".storageInfo").remove();var b=parseInt(a.replace(/,/g,""))-parseInt(c.replace(/,/g,""));$(".currency_amount").after('<div class="storageInfo" style="margin-top: -1px; margin-bottom: 10px!important;"><p><img title="Storage" alt="StorageItems" src="http://img94.imageshack.us/img94/3950/tabstoraged.png" style="width: 16px; height: 16px;"><strong>'+
c+"/"+a+"</strong><br><span>Free: "+coma(b)+"</span></p></div>")}})}
function addLock(){var a=!1,c,b=$('input[id^="delete_message_"]').attr("id").split("_")[2],d=GM_getValue("eRS.locked.messages");if("undefined"!=typeof d){for(var e=JSON.parse(d),d=0;d<e.length;d++)e[d]==b&&(a=!0,c=d);!0===a?($(".report").before('<a href="#" title="Unlock message so it can be deleted when multiple messages are sellected" class="fluid_blue_light_medium" id="eRS_Unlock"><span>Unlock Message</span></a>'),$(".msg_title_container #eRS_Unlock").click(function(){e.splice(c,1);GM_setValue("eRS.locked.messages",
JSON.stringify(e));window.location.href=window.location})):($(".report").before('<a href="#" title="Lock message so it can\'t be deleted when multiple messages are sellected" class="fluid_blue_light_medium" id="eRS_Lock"><span>Lock Message</span></a>'),$(".msg_title_container #eRS_Lock").click(function(){e.push(b);GM_setValue("eRS.locked.messages",JSON.stringify(e));window.location.href=window.location}))}else e=[],$(".report").before('<a href="#" title="Lock message so it can\'t be deleted when multiple messages are sellected" class="fluid_blue_light_medium" id="eRS_Lock"><span>Lock Message</span></a>'),
$(".msg_title_container #eRS_Lock").click(function(){e.push(b);GM_setValue("eRS.locked.messages",JSON.stringify(e));window.location.href=window.location});$("#eRS_Lock,#eRS_Unlock").tipsy({gravity:"s"})}
function deleteMessages(a){a=$(a).parents("form");var c=GM_getValue("eRS.locked.messages");if("undefined"!=typeof c)for(var b=JSON.parse(c),d=0;d<b.length;d++)$('input[id^="delete_message_"]').each(function(){$(this).val()==b[d]&&(this.checked=!1)});"message_form"==a[0].id&&($(a[0]).hide(),$("#sending_message_indicator").show());$.post(a.attr("action"),a.serialize(),function(){0<window.location.href.indexOf("/messages-paginated")?window.location=window.location.href:0<document.referrer.indexOf("/messages-paginated")?
window.location=document.referrer:window.location.href="http://www.erepublik.com/en/main/messages-inbox"},"html")}
function unb(){unsafeWindow.display_popup=void 0;unsafeWindow.ajaxify_messages=function(){return!0};$j(".message_get").each(function(a,c){$j(c).unbind("click")});$(".fluid_blue_dark_medium,.fluid_blue_light_medium,.message_get").each(function(){var a=$(this);"#"!=a.attr("href")||"message_delete_trigger"==a.attr("name")?a.hasClass("message_get")&&!a.hasClass("subject")&&"message_delete_trigger"==!a.attr("name")&&0<window.location.href.indexOf("/messages-read/")?a.bind("click",function(){window.location=
document.referrer}):"message_delete_trigger"==a.attr("name")?a.bind("click",function(a){var b=!1;if("undefined"==typeof $(".message_ajax_container #select_all")[0]||!0==$(".message_ajax_container #select_all")[0].checked)b=!0;$('input[id^="delete_message_"]').each(function(){!0==this.checked&&(b=!0)});!0==b&&deleteMessages(this)}):a.bind("click",function(){window.location="http://www.erepublik.com"+$(this).attr("href")}):$j("body").ajaxComplete(function(a,b,d){-1!=d.url.indexOf("messages-delete")?
window.location.href=document.referrer:-1!=d.url.indexOf("messages-compose")&&unb()})})}
function donateEverywhere(a){GM_addStyle(".citizen_actions_com a{background-image: url(http://i.imgur.com/ULcoCpC.png); display: inline; float: left; height: 25px; margin-right: 4px; text-indent: -9999px; width: 24px;}");GM_addStyle(".citizen_actions_com .action_message_com{background-position: -24px 0;}");GM_addStyle(".citizen_actions_com .action_donate_comM,.citizen_actions .action_donate_comM{background-image: url(http://www.erepublik.net/images/modules/citizenprofile/citizen_profile_icons.png?1392907748)!important; background-position: -48px 0;}");GM_addStyle(".citizen_actions_com .action_donate_comI,.citizen_actions .action_donate_comI{background-image: url(http://www.erepublik.net/images/modules/citizenprofile/citizen_profile_icons.png?1392907748)!important; background-position: -144px 0;}");
GM_addStyle(".citizen_actions_com .action_donate_comM:hover,.citizen_actions .action_donate_comM:hover{background-position: -48px -25px;}");GM_addStyle(".citizen_actions_com .action_donate_comI:hover,.citizen_actions .action_donate_comI:hover{background-position: -144px -25px;}");GM_addStyle(".citizen_actions_com .action_donate_comM:active,.citizen_actions .action_donate_comM:active{background-position: -48px -50px;}");GM_addStyle(".citizen_actions_com .action_donate_comI:active,.citizen_actions .action_donate_comI:active{background-position: -144px -50px;}");
GM_addStyle(".citizen_actions_com .action_message_com:hover{background-position: -24px -25px;}");GM_addStyle(".citizen_actions_com .action_message_com:active{background-position: -24px -50px;}");if(1==a){var c,b;$("#comments_div .comment-holder").each(function(){var a=$(this);a.find(".citizen_actions_com").remove();var d=a.find(".nameholder").attr("href").split("/")[4].trim();d!=eRS.citizenId&&(a.hasClass("indent-level-0")?(c="article_comment_posted_at",b="margin-top: 20px;"):(c="nameholder",b="float: right;"),
a.find("."+c+"").first().after('<div class="citizen_actions_com" style="width: 150px; '+b+'"><a class="action_message_com" href="http://www.erepublik.com/en/main/messages-compose/'+d+'" original-title="Send message">Send message</a><a class="action_donate_comI" href="/en/economy/donate-items/'+d+'" original-title="Donate Items">Donate</a><a class="action_donate_comM" href="/en/economy/donate-money/'+d+'" original-title="Donate Money">Donate</a></div>'))});$(".citizen_actions_com a").tipsy({gravity:"s"})}else if(2==
a)a=window.location.href.split("/")[6].trim(),"0"!=a&&($(".msg_title_container").append('<div class="citizen_actions_com" style="padding-top: 0px!important; float: right;"><a class="action_donate_comI" href="/en/economy/donate-items/'+a+'" original-title="Donate Items">Donate</a><a class="action_donate_comM" href="/en/economy/donate-money/'+a+'" original-title="Donate Money">Donate</a></div>'),$(".citizen_actions_com a").tipsy({gravity:"s"}));else if(3==a)unb(),$(".fluid_blue_dark_medium,.fluid_blue_light_medium,.message_get").each(function(){var a=
$(this);"#"==a.attr("href")&&a.bind("click",function(){setTimeout(function(){donateEverywhere(3)},1E3)})}),$(".citizen_actions_com").remove(),$(".message_item_container").each(function(){var a=$(this),d=a.find(".message_container .coloured .nameholder a:first").attr("href").split("/")[4];d!=eRS.citizenId&&a.find(".avatarholder").append('<div class="citizen_actions_com" style="width: 60px!important; margin-left: -8px; margin-top: 0px!important; padding-top: 2px!important;"><a class="action_donate_comI" href="/en/economy/donate-items/'+
d+'" original-title="Donate Items">Donate</a><a class="action_donate_comM" href="/en/economy/donate-money/'+d+'" original-title="Donate Money">Donate</a></div>');$(".citizen_actions_com a").tipsy({gravity:"s"})});else if(5==a){unsafeWindow.changeRegiment=void 0;var d=function(){$(".member_listing thead tr th").attr("style","padding:0px 0px 8px 10px!important");$(".member_listing tbody tr").each(function(){var a=$(this),d=a.find(".avatar .current_location a").attr("href").split("/")[4];d!=eRS.citizenId&&
(a.find(".avatar").attr("style","padding:2px 0px 3px 0px; width:208px!important;"),a.find(".avatar .current_location").after('<br><div class="citizen_actions_com" style="width: 208px; padding-left: 50px; text-align: left; margin-top: 5px!important;"><table><tr><td style="height: 25px!important;"><a class="action_message_com" style="display:inline!important;" href="http://www.erepublik.com/en/main/messages-compose/'+d+'" original-title="Send message">Send message</a></td><td style="height: 25px!important;"><a class="action_donate_comI" style="display:inline!important;" href="/en/economy/donate-items/'+
d+'" original-title="Donate Items">Donate</a></td><td style="height: 25px!important;"><a class="action_donate_comM" style="display:inline!important;" href="/en/economy/donate-money/'+d+'" original-title="Donate Money">Donate</a></td></tr></table></div>'))});$(".citizen_actions_com a").tipsy({gravity:"s"})},e=function(){if(0==$("#regiments_lists_msdd").length){clearTimeout(a);var a=setTimeout(e,500)}else{d();var b=$("#regiments_lists :selected").val(),a=0<$("#regiments_lists_child ._msddli_").length?
"._msddli_":"a";$("#regiments_lists_child "+a).click(function(){b!=$("#regiments_lists").val()&&(window.location.href="http://www.erepublik.com"+$("#regiments_lists option[value='"+$("#regiments_lists").val()+"']").attr("url"))})}};e()}}
function ShowRememberDonate(a){if(1==a){var c={};$(".special.padded").append('<div style="float: right; padding-top: 3px;"><img src="http://www.erepublik.com/images/modules/misc/warning.png" style="width: 17px; height: 17px; position: relative; top: 2px; margin-right: 5px;">"Remember donation quantity" enabled</div>');var b=GM_getValue(eRS.citizenId+".eRS_donateItem");"undefined"!=typeof b&&(c=JSON.parse(b));c=$.extend({1:{1:0,2:0,3:0,4:0,5:0,6:0,7:0},2:{1:0,2:0,3:0,4:0,5:0,6:0,7:0},3:{1:0,2:0,3:0,
4:0,5:0}},c);$(".offers.largepadded tr:not(:first-child)").each(function(){var a=$(this),d=a.find('input[id^="item_"]').attr("industry"),b=a.find('input[id^="item_"]').attr("quality");a.find(".input").val(c[d][b])})}else if(2==a)$(".special.padded").append('<div style="float: right; padding-top: 3px;"><img src="http://www.erepublik.com/images/modules/misc/warning.png" style="width: 17px; height: 17px; position: relative; top: 2px; margin-right: 5px;">"Remember donation quantity" enabled</div>'),b=
GM_getValue(eRS.citizenId+".eRS_donateMoney"),c="undefined"!=typeof b?JSON.parse(b):{1:0,2:0},$(".offers.largepadded.donate_form tr:not(:first-child)").each(function(){var a=$(this);"GOLD"==a.find("img").attr("alt")?a.find(".input").val(c["2"]):a.find(".input").val(c["1"])});else if(3==a){b=[];a="";b=GM_getValue("eRS_donation_logger");if("undefined"==typeof b)a="<strong>No donation history.</strong>";else for(var b=JSON.parse(b),d=0;d<b.length;d++)1==b[d].type&&(a+="<strong style='display:inline!important;'>["+
b[d].day+"/"+b[d].month+"/"+b[d].year+" at "+b[d].hour+":"+b[d].min+":"+b[d].sec+"]</strong> You donated "+b[d].amount+" Q"+b[d].quality+" "+b[d].txt+" to <a href='http://www.erepublik.com/"+LANG+"/citizen/profile/"+b[d].id+"'>"+b[d].name+"</a><br>"),2==b[d].type&&(a+="<strong style='display:inline!important;'>["+b[d].day+"/"+b[d].month+"/"+b[d].year+" at "+b[d].hour+":"+b[d].min+":"+b[d].sec+"]</strong> You donated "+b[d].amount+" "+b[d].txt+" to <a href='http://www.erepublik.com/"+LANG+"/citizen/profile/"+
b[d].id+"'>"+b[d].name+"</a><br>");$(".citizen_mass_destruction").after('<div style="clear:both;"></div><h3>Donation history</h3><div class="citizen_mass_destruction"><em>'+a+"</em></div>")}}
function RememberDonate(a,c){var b=[],d=GM_getValue("eRS_donation_logger");"undefined"!=typeof d&&(b=JSON.parse(d));var e=c.parent().parent(),f=$(".citizen_profile_header h2:not(span)").text().trim(),g=window.location.href.split("/")[6],h=new Date;if(1==a){var m={},d=GM_getValue(eRS.citizenId+".eRS_donateItem");"undefined"!=typeof d&&(m=JSON.parse(d));m=$.extend({1:{1:0,2:0,3:0,4:0,5:0,6:0,7:0},2:{1:0,2:0,3:0,4:0,5:0,6:0,7:0},3:{1:0,2:0,3:0,4:0,5:0}},m);$(".offers.largepadded tr:not(:first-child)").each(function(){var a=
$(this),d=a.find('input[id^="item_"]').attr("industry"),b=a.find('input[id^="item_"]').attr("quality");m[d][b]=a.find(".input").val()});var d=e.find("input[id^=donate_item_]").val(),l=e.find("td:last input:first").attr("quality"),e=1==e.find("td:last input:first").attr("industry")?"food":"weapons";0<parseFloat(d)&&(30==b.length&&b.shift(),b.push({type:1,day:10>h.getDate()?"0"+h.getDate():h.getDate(),month:10>parseInt(h.getMonth())+1?"0"+(parseInt(h.getMonth())+1):parseInt(h.getMonth())+1,year:h.getFullYear(),
hour:10>h.getHours()?"0"+h.getHours():h.getHours(),min:10>h.getMinutes()?"0"+h.getMinutes():h.getMinutes(),sec:10>h.getSeconds()?"0"+h.getSeconds():h.getSeconds(),amount:d,txt:e,quality:l,name:f,id:g}),GM_setValue("eRS_donation_logger",JSON.stringify(b)));GM_setValue(eRS.citizenId+".eRS_donateItem",JSON.stringify(m))}else 2==a&&(d=GM_getValue(eRS.citizenId+".eRS_donateMoney"),m="undefined"!=typeof d?JSON.parse(d):{1:0,2:0},$(".offers.largepadded.donate_form tr:not(:first-child)").each(function(){var a=
$(this);"GOLD"==a.find("img").attr("alt")?m["2"]=a.find(".input").val():m["1"]=a.find(".input").val()}),d=e.find("input[id^=donate_money_]").val(),e=e.find("td:first").text().trim(),0<parseFloat(d)&&(30==b.length&&b.shift(),b.push({type:2,day:10>h.getDate()?"0"+h.getDate():h.getDate(),month:10>parseInt(h.getMonth())+1?"0"+(parseInt(h.getMonth())+1):parseInt(h.getMonth())+1,year:h.getFullYear(),hour:10>h.getHours()?"0"+h.getHours():h.getHours(),min:10>h.getMinutes()?"0"+h.getMinutes():h.getMinutes(),
sec:10>h.getSeconds()?"0"+h.getSeconds():h.getSeconds(),amount:d,txt:e,name:f,id:g}),GM_setValue("eRS_donation_logger",JSON.stringify(b))),GM_setValue(eRS.citizenId+".eRS_donateMoney",JSON.stringify(m)))}
function SidebarLinks(){function a(){$("a#removeLink").click(function(){var a=$(this).parent().find("#linker").attr("row");e[a.toString()].title="";e[a.toString()].link="";GM_setValue(eRS.citizenId+".eRS_customLinks",JSON.stringify(e));c();$("#cont").css({display:"block"});d()})}function c(){for(var d="",b="0",c,f=1;20>=f;f++)10<=f&&(b=""),c=""!=e[f.toString()].title?'<a href="javascript:void(0);" id="removeLink">X</a></li>':"",d+="<li>"+b+""+f+'. <a row="'+f+'" href="'+e[f.toString()].link+'" id="linker">'+
e[f.toString()].title+"</a> "+c;$("#listLinkov").html("");$("#listLinkov").append(d);a()}function b(a,b,f){var l=$("#cont ul").find("li a:empty:first").attr("row");"undefined"==typeof l?alert("All places are consumed. Please delete a link to add another."):(l=parseInt(l),""==a||""==b?alert("Empty fileds"):(e[l.toString()].title=a,e[l.toString()].link=b,GM_setValue(eRS.citizenId+".eRS_customLinks",JSON.stringify(e)),!0===f?(c(),$("#cont").css({display:"block"})):c()),d())}function d(){$("#eRS_quick").remove();
$("#eRS_quick_ex").remove();$(".tipsy.tipsy-n").remove();for(var a=!1,d=1;20>=d;d++)e[d.toString()].link==window.location.href&&(a=!0);!1===a?($(".erpk_time").append('<a id="eRS_quick" href="javascript:void(0);" title="Add this page to quick links on sidebar">Add to QL</a>'),$("#eRS_quick").click(function(){b(document.title,window.location.href,!1)}),$("#eRS_quick").tipsy({gravity:"n"})):($(".erpk_time").append('<a id="eRS_quick_ex" href="javascript:void(0);" title="This page is already on sidebar link. If you wish to remove it, click on red X next to the title on sidebar links menu.">Exists</a>'),
$("#eRS_quick_ex").click(function(){$("#arrowRight").trigger("click")}),$("#eRS_quick_ex").tipsy({gravity:"n"}))}var e,f=GM_getValue(eRS.citizenId+".eRS_customLinks");e="undefined"!=typeof f?JSON.parse(f):{1:{title:"",link:""},2:{title:"",link:""},3:{title:"",link:""},4:{title:"",link:""},5:{title:"",link:""},6:{title:"",link:""},7:{title:"",link:""},8:{title:"",link:""},9:{title:"",link:""},10:{title:"",link:""},11:{title:"",link:""},12:{title:"",link:""},13:{title:"",link:""},14:{title:"",link:""},
15:{title:"",link:""},16:{title:"",link:""},17:{title:"",link:""},18:{title:"",link:""},19:{title:"",link:""},20:{title:"",link:""}};GM_addStyle("#sideLink{font-family: Arial,sans-serif; background-color:#EAF8FB; filter: alpha(opacity=87); -moz-opacity:0.87; opacity:0.87; -moz-box-shadow:0px 0px 20px #EAF8FB; -webkit-box-shadow:0px 0px 20px #EAF8FB;box-shadow:0px 0px 20px #EAF8FB; width: 50px; height: 400px; top:20%; right:0px;-moz-border-radius-bottomleft: 10px;-moz-border-radius-topleft: 10px;-webkit-border-bottom-left-radius: 10px;-webkit-border-top-left-radius: 10px;border-bottom-left-radius: 10px;border-top-left-radius: 10px; display:block; position:fixed; z-index:10000001 !important;}");
GM_addStyle("#sideLink #cont {display: none;}");GM_addStyle("#sideLink #cont #addLinks{margin-top: 12px; margin-left: 50px;}");GM_addStyle("#sideLink #cont #addLinks label{font-size: 13px; width: 130px; color: #ffffff; font-weight: bold;}");GM_addStyle("#sideLink #cont #addLinks input{height: 20px; background-color: rgba(255, 255, 255, 0.6);border: 1px solid #CCDCD1;border-radius: 4px 4px 4px 4px;box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1) inset, 0 1px 0 rgba(255, 255, 255, 0.8);color: #000000;font-size: 14px;padding: 1px;transition: all 0.75s ease-in 0s;}");
GM_addStyle("#sideLink #cont #addLinks #linkHref{margin-left: 5px; margin-bottom: 5px;width: 230px;}");GM_addStyle("#sideLink #cont #addLinks #linkTitie{margin-left: 5px; width: 130px;}");GM_addStyle("#sideLink #cont #addLinks #addLink{display: -moz-inline-stack; display: inline-block; width: 56px; height: 28px; background: url(http://dabuttonfactory.com/b.png?t=Add&f=sans-serif-Bold&ts=11&tc=ffffff00&tshs=1&tshc=22222200&it=png&c=8&bgt=gradient&bgc=4687f0&ebgc=1e37b8&hp=17&vp=10) no-repeat; line-height: 28px; vertical-align: text-middle; text-align: center; color: #ffffff; font-family: sans-serif; font-size: 11px; font-weight: bold; font-style: normal; text-shadow: #222222 1px 1px 0;margin-left: 42px; height: 30px;}");
GM_addStyle("#sideLink #cont ul{font-size: 12px; margin-top: 12px; margin-left: 15px; list-style:none;}");GM_addStyle("#sideLink #cont ul li{color: #6C97B2; font-weight: bold;}");GM_addStyle("#sideLink #cont ul li #removeLink{margin-left: 3px; color: #A60000; font-weight: bold;}");GM_addStyle("#sideLink #cont ul li #linker{padding-left: 3px}");GM_addStyle("#sideLink #cont ul li a{text-decoration:underline; color: #6C97B2; font-weight: normal;}");GM_addStyle("#sideLink #cont ul li a:hover{text-decoration:none;}");
GM_addStyle("#sideLink #arrowRight{position:absolute; color:#FFFFFF; background:url(http://img441.imageshack.us/img441/3553/pngimage2525pixels.png) center no-repeat; top:12px; right:0px; width : 50px;}");GM_addStyle("#sideLink #arrowLeft{position:absolute; color:#FFFFFF; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kJAQkDI8rS+20AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAeUlEQVRIx93VSw7AIAgEUJn735nuGkOoxTpjUlni4hnl09opYTHh7n4fmlnMxbNK4OvtMpiOzEBYfe8KBMbHvkFgVdAIArNUnyCweyKDoGi+CEHV5T2EHWPl30g/26AGJEg2naEGqMhov0ANUJDKhoQaWEJmdvw5cQEwCywquDpIHAAAAABJRU5ErkJggg==) center no-repeat; top:12px; right:350px; width : 50px; display: none;}");
GM_addStyle("#eRS_quick {padding: 5px 4px; font-size: 11px; text-align: center; margin-left: 3px;font-weight: bold;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px;background-color: #ca4040;background-image: -webkit-gradient(linear, left bottom, left top, color-stop(1, #e26767), color-stop(0, #ca4040));background-image: -webkit-linear-gradient(center bottom, #e26767 0%, #ca4040 100%);background-image: -moz-linear-gradient(top, #e26767 0%, #ca4040 100%);background-image: -o-linear-gradient(top, #e26767 0%, #ca4040 100%);background-image: -ms-linear-gradient(top, #e26767 0%, #ca4040 100%);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e26767e', endColorstr='#ca4040',GradientType=1 );-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr='#e26767', endColorstr='#ca4040')\";background-image: linear-gradient(top, #e26767 0%,#ca4040 100%);border: 1px solid #df5353;border-bottom: 1px solid #dd4646;color: #fff;text-shadow: rgba(0,0,0,0.2) 0 -1px 0;-moz-box-shadow: rgba(255,255,255,0.2) 0 1px 0 inset,rgba(0,0,0,0.15) 0 1px 1px;-webkit-box-shadow: rgba(255,255,255,0.2) 0 1px 0 inset,rgba(0,0,0,0.15) 0 1px 1px;box-shadow: rgba(255,255,255,0.2) 0 1px 0 inset,rgba(0,0,0,0.15) 0 1px 1px;}");
GM_addStyle("#eRS_quick:hover {background-color:#cb4a4a;background-image:-webkit-gradient(linear, left bottom, left top, color-stop(1, #e47474), color-stop(0, #cb4a4a));background-image:-webkit-linear-gradient(center bottom, #e47474 0%, #cb4a4a 100%);background-image:-moz-linear-gradient(top, #e47474 0%, #cb4a4a 100%);background-image:-o-linear-gradient(top, #e47474 0%, #cb4a4a 100%);background-image:-ms-linear-gradient(top, #e47474 0%, #cb4a4a 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#e47474e', endColorstr='#cb4a4a',GradientType=1 );-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr='#e47474', endColorstr='#cb4a4a')\";background-image:linear-gradient(top, #e47474 0%,#cb4a4a 100%)}");
GM_addStyle("#eRS_quick:active {-moz-box-shadow:rgba(0,0,0,0.3) 0 1px 2px inset,rgba(255,255,255,0.4) 0 1px 0;-webkit-box-shadow:rgba(0,0,0,0.3) 0 1px 2px inset,rgba(255,255,255,0.4) 0 1px 0;box-shadow:rgba(0,0,0,0.3) 0 1px 2px inset,rgba(255,255,255,0.4) 0 1px 0}");GM_addStyle("#eRS_quick_ex {padding: 5px 4px; font-size: 11px; text-align: center; margin-left: 13px;font-weight: bold;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px;background-color: #d5e4ec;background-image: -webkit-gradient(linear, left bottom, left top, color-stop(1, #e7f0f7), color-stop(0, #d5e4ec));background-image: -webkit-linear-gradient(center bottom, #e7f0f7 0%, #d5e4ec 100%);background-image: -moz-linear-gradient(top, #e7f0f7 0%, #d5e4ec 100%);background-image: -o-linear-gradient(top, #e7f0f7 0%, #d5e4ec 100%);background-image: -ms-linear-gradient(top, #e7f0f7 0%, #d5e4ec 100%);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e7f0f7e', endColorstr='#d5e4ec',GradientType=1 );-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr='#e7f0f7', endColorstr='#d5e4ec')\";background-image: linear-gradient(top, #e7f0f7 0%,#d5e4ec 100%);border: 1px solid #c2d9e6;border-bottom: 1px solid #b7d2e2;color: #5d778a;text-shadow: #fff 0 1px 0;-moz-box-shadow: rgba(255,255,255,0.8) 0 1px 0 inset,rgba(0,0,0,0.15) 0 1px 1px;-webkit-box-shadow: rgba(255,255,255,0.8) 0 1px 0 inset,rgba(0,0,0,0.15) 0 1px 1px;box-shadow: rgba(255,255,255,0.8) 0 1px 0 inset,rgba(0,0,0,0.15) 0 1px 1px;}");
GM_addStyle("#eRS_quick_ex:hover {background-color:#e0ebf1;background-image:-webkit-gradient(linear, left bottom, left top, color-stop(1, #f2f7fb), color-stop(0, #e0ebf1));background-image:-webkit-linear-gradient(center bottom, #f2f7fb 0%, #e0ebf1 100%);background-image:-moz-linear-gradient(top, #f2f7fb 0%, #e0ebf1 100%);background-image:-o-linear-gradient(top, #f2f7fb 0%, #e0ebf1 100%);background-image:-ms-linear-gradient(top, #f2f7fb 0%, #e0ebf1 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f2f7fbe', endColorstr='#e0ebf1',GradientType=1 );-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr='#f2f7fb', endColorstr='#e0ebf1')\";background-image:linear-gradient(top, #f2f7fb 0%,#e0ebf1 100%)}");
GM_addStyle("#eRS_quick_ex:active {-moz-box-shadow:rgba(0,0,0,0.3) 0 1px 2px inset,rgba(255,255,255,0.4) 0 1px 0;-webkit-box-shadow:rgba(0,0,0,0.3) 0 1px 2px inset,rgba(255,255,255,0.4) 0 1px 0;box-shadow:rgba(0,0,0,0.3) 0 1px 2px inset,rgba(255,255,255,0.4) 0 1px 0");$("body").after('<div id="sideLink"><div id="cont"><div id="addLinks"><label>Link:</label><input type="text" id="linkHref"><br><label>Title:</label><input type="text" id="linkTitie"><a href="javascript:void(0);" id="addLink">Add</a></div><ul id="listLinkov"></ul></div><div id="arrowLeft">&nbsp;</div><div id="arrowRight">&nbsp;</div></div>');
d();c();$("#arrowRight").click(function(){$("#sideLink").animate({width:"400px"},800);$("#arrowRight").animate({right:"350px"},800);setTimeout(function(){$("#sideLink").css("background-color","#000000");$("#arrowRight").hide();$("#arrowLeft").css({right:"350px"});$("#arrowLeft").show();$("#cont").css({display:"block"})},800)});$("#arrowLeft").click(function(){$("#cont").css({display:"none"});$("#sideLink").animate({width:"50px"},800);$("#arrowLeft").animate({right:"0px"},800);setTimeout(function(){$("#sideLink").css("background-color",
"#EAF8FB");$("#arrowLeft").hide();$("#arrowRight").css({right:"0px"});$("#arrowRight").show()},800)});$("#addLink").click(function(){var a=$("#linkTitie").val(),d=$("#linkHref").val();b(a,d,!0)})}
function NewsCategories(){$(".mini_news_categories span").eq(0).css("width","20px");$(".mini_news_categories span").eq(0).text("C");$(".mini_news_categories ul li").eq(0).before('<li><a href="javascript:;" id="eRSNews" rel="international" class="switchers" original-title="International"><img src="http://img69.imageshack.us/img69/9480/internationalw.png" alt="International" title="International"></a></li><li><a href="javascript:;" id="eRSNews" rel="latest" class="switchers" original-title="Latest"><img src="http://img819.imageshack.us/img819/851/znzc.png" alt="Latest" title="Latest"></a></li>');$(".mini_news_categories ul li #eRSNews").click(function(){var a,
c,b,d,e,f,g,h="",m="",l="",k=$(this);$(".media_widget li").find(".active").removeClass("active");$(".media_widget").addClass("preload");k.addClass("active");var n=k.attr("rel"),m="latest"==n?"latest/all/"+eRS.country+"/1":n;GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/en/main/news/"+m,dataType:"html",onload:function(k){k=k.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");k=$(k).find("#content").html();$(k).filter('[class="holder bordersep"]:lt(5)').each(function(){var k=
$(this);a=k.find(".rankholder .value").text().trim();c=k.find(".holder .dotted").attr("href");b=k.find(".holder .dotted").text();d=k.find(".article_details small").eq(0).text().trim();e=k.find(".article_details small").eq(1).find("a").text().trim();k.find(".article_details small").eq(1).find("a").attr("href");f=k.find(".article_details small").eq(2).text().trim();g=k.find(".article_details small").eq(2).find("img").attr("tmpsrc");news=k.find(".newspaperinf .nameholder .dotted").text().trim();h+="<li>";
h+='<div class="no_votes"><strong>'+a+"</strong><small>votes</small></div>";h+='<div class="article_entry"><div>';h+='<span><img class="countryImg" style="vertical-align: middle; float: left;" src="'+g+'" original-title="'+f+'"><span>&bull;</span><em>'+e+'</em></span><a href="'+c+'">'+b+"</a>";h+='<span><em class="author">'+news+'</em><span>&bull;</span><em class="time_posted">'+d+"</em></span>";h+="</div></div>";h+="</li>"});$("#citizenship_news").html("");$("#citizenship_news").html(h);$("#citizenship_news li span .countryImg").tipsy({gravity:"s"});
0<$("#residence_news").length?"latest"==n?(h="",l="latest/all/"+$("#perma_second").attr("value")+"/1",GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/en/main/news/"+l,dataType:"html",onload:function(k){k=k.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");k=$(k).find("#content").html();$(k).filter('[class="holder bordersep"]:lt(5)').each(function(){var k=$(this);a=k.find(".rankholder .value").text().trim();c=k.find(".holder .dotted").attr("href");
b=k.find(".holder .dotted").text();d=k.find(".article_details small").eq(0).text().trim();e=k.find(".article_details small").eq(1).find("a").text().trim();k.find(".article_details small").eq(1).find("a").attr("href");f=k.find(".article_details small").eq(2).text().trim();g=k.find(".article_details small").eq(2).find("img").attr("tmpsrc");news=k.find(".newspaperinf .nameholder .dotted").text().trim();h+="<li>";h+='<div class="no_votes"><strong>'+a+"</strong><small>votes</small></div>";h+='<div class="article_entry"><div>';
h+='<span><img class="countryImg" style="vertical-align: middle; float: left;" src="'+g+'" original-title="'+f+'"><span>&bull;</span><em>'+e+'</em></span><a href="'+c+'">'+b+"</a>";h+='<span><em class="author">'+news+'</em><span>&bull;</span><em class="time_posted">'+d+"</em></span>";h+="</div></div>";h+="</li>"});$("#residence_news").html("");$("#residence_news").html(h);$(".media_widget").removeClass("preload");$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+l);$("#go1").bind("click",
function(){$(".media_widget li").find(".active").attr("rel")==n&&$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+m)});$("#go2").bind("click",function(){$(".media_widget li").find(".active").attr("rel")==n&&$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+l)});$("#residence_news li span .countryImg").tipsy({gravity:"s"})}})):($("#residence_news").html(""),$("#residence_news").html(h),$(".media_widget").removeClass("preload"),$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+
n),$("#go1").bind("click",function(){$(".media_widget li").find(".active").attr("rel")==n&&$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+m)}),$("#go2").bind("click",function(){$(".media_widget li").find(".active").attr("rel")==n&&$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+m)}),$("#residence_news li span .countryImg").tipsy({gravity:"s"})):($(".media_widget").removeClass("preload"),$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+
n),$("#go1").bind("click",function(){$(".media_widget li").find(".active").attr("rel")==n&&$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+m)}),$("#go2").bind("click",function(){$(".media_widget li").find(".active").attr("rel")==n&&$(".more_news").attr("href","http://www.erepublik.com/en/main/news/"+m)}))}})})}
function SpareChange(){setTimeout(function(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/exchange-market",dataType:"html",onload:function(a){var c=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");a=parseFloat($(c).find("#golden").val());c=parseFloat($(c).find("#eCash").val());$("#side_bar_gold_account_value").text(a.toFixed(2));$("#side_bar_currency_account_value").text(c.toFixed(2))}})},400)}
function BetterIgm(){var a,c=GM_getValue("eRS"+eRS.citizenId+"_Igm");a="undefined"==typeof c?{sub:"",mess:""}:JSON.parse(c);$("#message_form").append('<a href="javascript:;" id="igmClear" original-title="Forget last remembered message" class="fluid_blue_dark_medium" style="margin-right: 10px; float: right;"><span class="bold">Clear</span></a><a href="javascript:;" id="igmSave"  original-title="Remember this message" class="fluid_blue_dark_medium" style="margin-right: 10px; float: right;"><span class="bold">Save</span></a><a href="javascript:;" id="igmFill" original-title="Fill with last remembered message" class="fluid_blue_dark_medium" style="margin-right: 10px; float: right;"><span class="bold">Fill</span></a>');
$("#igmClear").tipsy({gravity:"s"});$("#igmFill").tipsy({gravity:"s"});$("#igmSave").tipsy({gravity:"s"});$("#igmFill").click(function(){$("#citizen_subject").val(a.sub);$("#citizen_message").val(a.mess)});$("#igmSave").click(function(){a.sub=$("#citizen_subject").val();a.mess=$("#citizen_message").val();GM_setValue("eRS"+eRS.citizenId+"_Igm",JSON.stringify(a))});$("#igmClear").click(function(){a.sub="";a.mess="";GM_setValue("eRS"+eRS.citizenId+"_Igm",JSON.stringify(a))})}
function AutoBot(){function a(){$j("#heal_btn");var a=$j("#DailyConsumtionTrigger"),d=$j("#eatload").css("display");return $j("input#multihit_food").is(":checked")&&!a.hasClass("disabled")&&!a.hasClass("buy")&&!a.hasClass("energy")&&"none"==d||$j("input#multihit_energy").is(":checked")&&!a.hasClass("disabled")&&a.hasClass("energy")&&"none"==d?!0:!1}function c(){"undefined"==typeof unsafeWindow.jQuery?window.setTimeout(c,100):b()}function b(){function b(){function d(){$j("#DailyConsumtionTrigger").addClass("load");
$j.getJSON(m,{},function(a){unsafeWindow.energy.processResponse(a);$j("#DailyConsumtionTrigger").removeClass("load");k()})}function k(){c<unsafeWindow.globalNS.userInfo.wellness?10<=unsafeWindow.globalNS.userInfo.wellness?(clearTimeout(h),h=setTimeout("jQuery.fn.multiHIT()",250)):a()?d():20==e?$("#multihit_start").click():setTimeout(k,1E3):setTimeout(k,1E3)}var c=parseInt($("#current_health").text().split("/")[0].trim()),e=0;d()}function k(){unsafeWindow.ERPK.disableAllButtons();$j.post("/en/military/change-weapon",
{_token:unsafeWindow.SERVER_DATA.csrfToken,battleId:unsafeWindow.SERVER_DATA.battleId},function(a){if(-1!==$j(".fighter_weapon_image:last").attr("src").indexOf("q0"),unsafeWindow.currentWeaponId!==a.weaponId||unsafeWindow.hasBazookaAmmo!=a.hasBazookaAmmo)$j(".listing span").eq(0).clone(),$j("#scroller span:last img").attr("src",a.weaponImage);unsafeWindow.ERPK.enableAllButtons();-1!==$j(".listing span img").eq(-1).attr("src").indexOf("q10")?(d=!1,$j("button#multihit_start").html("Start")):(clearTimeout(h),
h=setTimeout("jQuery.fn.multiHIT()",250))},"json")}"undefined"==typeof unsafeWindow&&(unsafeWindow=window);$j("head").append('<style type="text/css"> #multihit_start {margin-top: 0px; margin-left: 0px; margin-bottom: 0px; position: relative;}</style>');$j("div#enemy_defeated").before('<div id="MHP" style="z-index:9999; position:relative;margin:-190px 0 0 33px;float:left;clear:both;padding:5px;background-color:#262620;border-radius:4px;opacity:0.8;font-weight:bold;border:1px solid #000;color:#FFF;text-align:left;font-size:10px;"><big>Kills:&nbsp;</big><input id="multihit_count" style="text-align:right;" type="text" size="3" maxlength="4" value="1" />&nbsp;<button id="multihit_start">Start</button><br />&nbsp;<input type="checkbox" id="multihit_food" name="multihit_food" checked="checked"><label for="multihit_food">&nbsp;Eat food</label><br/>&nbsp;<input type="checkbox" id="multihit_bazooka" name="multihit_bazooka" checked="checked"><label for="multihit_bazooka">&nbsp;Dont use Bazooka</label><br/>&nbsp;<input type="checkbox" id="multihit_energy" name="multihit_energy"><label for="multihit_energy">&nbsp;Use EnergyBars</label><br/></div>');
0!=unsafeWindow.SERVER_DATA.battleFinished&&$j("div#MHP").hide();$j("div#MHP").hide();GM_addStyle("#autoBot a{font-weight: bold; color: #ffffff; padding: 5px 3px 5px 3px; top: 315px; left: 220px; position: absolute; text-align: center; width: 50px; background-color: transparent;border: 1px solid #999999;-moz-border-radius: 0 5px 5px 0;-webkit-border-radius: 0 5px 5px 0;border-radius: 0 5px 5px 0;-moz-box-shadow: 0px 0px 2px #ff7373;-webkit-box-shadow: 0px 0px 2px #ff7373;box-shadow: 0px 0px 2px #ff7373;filter: progid:DXImageTransform.Microsoft.gradient(GradientType = 1, startColorstr = '#bf3030', endColorstr = '#a60000');-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(GradientType = 1, startColorstr = '#bf3030', endColorstr = '#a60000')\";background-image: -moz-linear-gradient(left, #bf3030, #a60000);background-image: -ms-linear-gradient(left, #bf3030, #a60000);background-image: -o-linear-gradient(left, #bf3030, #a60000);background-image: -webkit-gradient(linear, left top, right top, from(#bf3030), to(#a60000));background-image: -webkit-linear-gradient(left, #bf3030, #a60000);background-image: linear-gradient(left, #bf3030, #a60000);-moz-background-clip: padding;-webkit-background-clip: padding-box;background-clip: padding-box;} #autoBot a:active {top:316px;}");
$j("#pvp_battle_area .player.left_side").before('<div id="autoBot"><a href="javascript:void(0)" id="toggleAutoBot">AutoBot</a></div>');$j("#toggleAutoBot").click(function(){"ON"==$j(this).text()?$j(this).text("AutoBot"):$j(this).text("ON");$j("div#MHP").toggle()});unsafeWindow.battleFX.hit=function(){d&&(f++,clearTimeout(h),h=setTimeout("jQuery.fn.multiHIT()",1001));return!1};unsafeWindow.battleFX.blow=function(){d&&g++;return!1};unsafeWindow.battleFX.countNextBattle=function(a){if(isNaN(a.getMonth()))return setTimeout(function(){top.location.href=
document.location.href},1E3),!1;$j("#time_until").countdown({until:a,format:"MS",compact:!0,description:"",onTick:function(a){0==$j.countdown.periodsToSeconds(a)&&($j("#waiting").fadeOut("fast"),$j("#waiting").removeClass("clock"),$j("#notify_link").fadeIn("fast"),$j("#notify_link").click(),setTimeout(function(){top.location.href=document.location.href},2E3))}});return!1};unsafeWindow.jQuery.fn.getWell=function(){$j("#heal_btn");var a=$j("#DailyConsumtionTrigger");if($j("input#multihit_food").is(":checked")&&
!a.hasClass("disabled")&&!a.hasClass("buy")&&!a.hasClass("energy")||$j("input#multihit_energy").is(":checked")&&!a.hasClass("disabled")&&a.hasClass("energy"))$j("#heal_btn small").hide(),b()};unsafeWindow.jQuery.fn.multiHIT=function(){unsafeWindow.globalStop||e==f?(unsafeWindow.ERPK.enableAllButtons(),d=!1,$j("button#multihit_start").html("Start")):unsafeWindow.ERPK.canFire()?$j("input#multihit_bazooka").is(":checked")&&-1!==$j(".listing span img").eq(-1).attr("src").indexOf("q10")?k():unsafeWindow.shoot():
a()?unsafeWindow.jQuery.fn.getWell():(unsafeWindow.ERPK.enableAllButtons(),d=!1,$j("button#multihit_start").html("Start"))};$j("button#multihit_start").click(function(){d?(clearTimeout(h),unsafeWindow.ERPK.enableAllButtons(),d=!1,$j("button#multihit_start").html("Start")):(e=$j("input#multihit_count").val(),0<e&&(g=f=0,d=!0,$j("button#multihit_start").html("Stop"),unsafeWindow.jQuery.fn.multiHIT()))})}var d=!1,e=0,f=0,g=0,h=0;location.href.match(/citizen\/profile\/(\d+)$/);var m="http://www.erepublik.com/"+
LANG,m=m+("/main/eat?format=json&_token="+$j("#a69925ed4a6ac8d4b191ead1ab58e853").val());0!==$j("#fightSessionKey").length&&(m+="&fightSessionKey="+$j("#fightSessionKey").val());m+="&buttonColor=";m=$j("#DailyConsumtionTrigger").hasClass("energy")?m+"orange":m+"blue";m+="&jsoncallback=?";c()}
function QuickMarket(){GM_addStyle(".eRS_quickMarket{display: none!important; border-top: 1px solid #ccc!important; position: absolute!important; top: 0px!important;}");GM_addStyle(".eRS_quickMarket li img{width: 18px; height: 20px; vertical-align: middle; margin-bottom: 2px;}");var a="",c="",b,d;for(b=1;2>=b;b++)for(d=1;7>=d;d++)1==b&&7>=d&&(a+='<li><a href="http://www.erepublik.com/'+LANG+"/economy/market/"+img_country[eRS.country].id+"/1/"+d+'/citizen/0/price_asc/1"><img src="http://www.erepublik.com/images/icons/industry/1/q'+
d+'.png"> Food Q'+d+"</li>",7==d&&(a+='<li><a href="http://www.erepublik.com/'+LANG+"/economy/market/"+img_country[eRS.country].id+'/7/1/citizen/0/price_asc/1"><img src="http://www.erepublik.com/images/icons/industry/7/default.png"> Food Raw</li>')),2==b&&7>=d&&(c+='<li><a href="http://www.erepublik.com/'+LANG+"/economy/market/"+img_country[eRS.country].id+"/2/"+d+'/citizen/0/price_asc/1"><img src="http://www.erepublik.com/images/icons/industry/2/q'+d+'.png"> Weapon Q'+d+"</li>",7==d&&(c+='<li><a href="http://www.erepublik.com/'+
LANG+"/economy/market/"+img_country[eRS.country].id+'/12/1/citizen/0/price_asc/1"><img src="http://www.erepublik.com/images/icons/industry/12/default.png"> Weapon Raw</li>'));a='<ul class="eRS_quickMarket">'+a+'</ul><ul class="eRS_quickMarket">'+c+"</ul>";$("#menu4 ul li:first").append(a);$("#menu4 ul li:first").hover(function(){$(".eRS_quickMarket:eq(0)").attr("style","display: block!important");$(".eRS_quickMarket:eq(1)").attr("style","display: block!important; left: 270px!important;")},function(){$(".eRS_quickMarket").attr("style",
"display: none!important")})}
function NewFuncs(){unsafeWindow.get_citizen_feeds=function(){try{$j("#show_friends_feed").addClass("active");$j("#show_regiment_feed").removeClass("active");$j("#show_facebook_feed").removeClass("active");$j("#show_party_feed").removeClass("active");$j(".fb-like-box").css("display","none");$j(".shouter").css("display","block");$j(".wall_post_list ul").css("display","block");$j("#citizen_older_feeds").css("display","block");var a="/"+(LANG?LANG:"en")+"/main/wall-post/older/",c={_token:$j("#_token").val(),
page:0};$j.post(a,c,function(a){options.reShout||options.filterGuerrilla||options.filterMedals?($("body").append('<ul id="boggy" style="display: none;"></ul>'),$("#boggy").append(a),a=FilterPost("#boggy"),$("#boggy").remove(),$j(".wall_post_list > ul").html(a),FilterPostBind()):$j(".wall_post_list > ul").html(a);$j("#isGroupFeed").val(0);parseInt($j("#postCount").val())>unsafeWindow.POSTS_LIMIT+1?$j("#citizen_older_feeds").show():$j("#citizen_feed_friends").show();$j("#group_older_feeds").hide();
$j("#shout").val(unsafeWindow.wall_texts.say_something_to_your_friends+" ...")})}catch(b){}};unsafeWindow.get_group_feeds=function(){try{$j("#show_regiment_feed").addClass("active");$j("#show_friends_feed").removeClass("active");$j("#show_facebook_feed").removeClass("active");$j("#show_party_feed").removeClass("active");$j(".fb-like-box").css("display","none");$j(".shouter").css("display","block");$j(".wall_post_list ul").css("display","block");var a="/"+(LANG?LANG:"en")+"/main/group-wall/older/retrieve",
c={_token:$j("#_token").val(),page:0,groupId:$j("#groupId").val(),part:1};$j.post(a,c,function(a){if(!0===unsafeWindow.feedTabs)if(options.reShout){$("body").append('<ul id="boggy" style="display: none;"></ul>');$("#boggy").append($(a).find(".wall_post_list ul").html());var b=FilterPost("#boggy");$("#boggy").remove();$j("#isGroupFeed").val(1);$(".wall_post_list ul").html(b);FilterPostBind()}else $j("#isGroupFeed").val(1),$j(".wall_post_list ul").html($j(a).find(".wall_post_list ul").html()),$j("#shout").val("Say something...");
else options.reShout?($("body").append('<ul id="boggy" style="display: none;"></ul>'),$("#boggy").append($(a).find(".wall_post_list ul").html()),b=FilterPost("#boggy"),$("#boggy").remove(),$j("#isGroupFeed").val(1),$j("#wall_master").html(a),$(".wall_post_list ul").html(b),FilterPostBind()):($j("#isGroupFeed").val(1),$j("#wall_master").html(a))},"html")}catch(b){}};unsafeWindow.get_party_feeds=function(){try{$j("#show_party_feed").addClass("active");$j("#show_regiment_feed").removeClass("active");
$j("#show_facebook_feed").removeClass("active");$j("#show_friends_feed").removeClass("active");$j(".fb-like-box").css("display","none");$j(".shouter").css("display","block");$j(".wall_post_list ul").css("display","block");var a="/"+(LANG?LANG:"en")+"/main/party-post/older/",c={_token:$j("#_token").val(),page:0};$j.post(a,c,function(a){options.reShout?($("body").append('<ul id="boggy" style="display: none;"></ul>'),$("#boggy").append(a),a=FilterPost("#boggy"),$("#boggy").remove(),$j(".wall_post_list > ul").html(a),
FilterPostBind()):$j(".wall_post_list > ul").html(a);$j("#isGroupFeed").val(0);parseInt($j("#partyPostCount").val())>unsafeWindow.POSTS_LIMIT+1?$j("#citizen_older_feeds").show():$j("#citizen_older_feeds").hide();$j("#group_older_feeds").hide();$j("#shout").val(unsafeWindow.wall_texts.say_something_to_your_party_colleagues+" ...")})}catch(b){}};unsafeWindow.populatePreviousPosts=function(){var a=parseInt($j("#previous_posts").val()),c=parseInt($j("#posts_count").val()),b="/"+(LANG?LANG:"en")+"/main/wall-post/older/";
0<$j("#party_feeds").length&&(b="/"+(LANG?LANG:"en")+"/main/party-post/older/");$j.post(b,{_token:$j("#_token").val(),page:a,postId:$j("#viewFirst").val()},function(d){options.reShout||options.filterGuerrilla||options.filterMedals?($("body").append('<ul id="boggy" style="display: none;"></ul>'),$("#boggy").append(d),d=FilterPost("#boggy"),$("#boggy").remove(),$j(".wall_post_list > ul").append(d),FilterPostBind()):$j(".wall_post_list > ul").append(d);c>10*(a+1)?$j("#previous_posts").val(a+1):$j(".previous_posts").hide()},
"html")}}
function FilterPostBind(){$("a[id^=repost_]").bind("click",function(){var a=$(this).parent().parent().parent().find("h6:first a:first").text()+" wrote:\r"+$(this).parent().parent().parent().find("p:first").text().trim();$("textarea[id=shout]").trigger("click");$("textarea[id=shout]").val(a);unsafeWindow.new_post()});$("a[class^=shareButton_]").bind("click",function(){var a=$(this).attr("class").split("_")[1];"0px"==$(".shareUrl_"+a).css("height")?($(".shareUrl_"+a).show(),$(".shareUrl_"+a).animate({height:"25"},
200,"linear",function(){$(".shareUrl_"+a).show();$(".shareUrl_"+a).animate({opacity:"1"},300).focus().select();$(".shareUrl_"+a).click(function(){$(".shareUrl_"+a+" input").select()})})):$(".shareUrl_"+a).animate({opacity:"0"},300,"linear",function(){$(".shareUrl_"+a).animate({height:"0"},200,"linear",function(){$(".shareUrl_"+a).hide()})})})}
function FilterPost(a){$(a).find("li").each(function(){var a=$(this);if(!a.hasClass("mu")){var b;$("#show_friends_feed").hasClass("active")?b="viewPost":$("#show_regiment_feed").hasClass("active")?b="unitPost":$("#show_party_feed").hasClass("active")?b="viewPartyPost":"";var d=a.attr("id").split("_")[1].trim();options.reShout&&a.find(".post_content .post_actions").append('<div class="repost" style="display:inline;"><span>\u00b7</span><a style="margin-left: 3px;" id="repost_'+d+'" title="" href="javascript:;">Shout</a><span style="margin-left: 3px;" class="shareDot">\u00b7 </span><a class="shareButton_'+
d+'" href="javascript:;">Share</a><div class="shareUrl_'+d+'" style="clear: both; width: 310px; display: none; padding: 5px 0 0 0; height: 0px; overflow: hidden;"><input value="http://www.erepublik.com/en?'+b+"="+d+'" style="display: block; width: 300px; font-size: 9px; border-radius: 3px; border: 1px solid #D2D2D2; color: grey; padding: 2px; opacity: 1;"></div></div>');options.filterGuerrilla&&0<a.find(".auto_img").length&&0<a.find(".auto_img").attr("src").indexOf("/pvpgame/")&&a.remove();options.filterMedals&&
0<a.find(".auto_img").length&&0<a.find(".auto_img").attr("src").indexOf("/achievements/")&&a.remove()}});return $(a).html()}
function FireEmployers(){function a(){if(0<$("#fireThem").length)$(".list_group .listing .employee_salary.c3 strong #fireHimd").remove(),$("#fireThem").remove();else{GM_addStyle('button.thoughtbot {margin-top: 5px;float: right;background-color: #ee432e;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ee432e), color-stop(50%, #c63929), color-stop(50%, #b51700), color-stop(100%, #891100));background-image: -webkit-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -moz-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -ms-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -o-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);border: 1px solid #951100;border-radius: 5px;-webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;color: #fff;font: bold 11px/1 "helvetica neue", helvetica, arial, sans-serif;text-align: center;text-shadow: 0px -1px 1px rgba(0, 0, 0, 0.8);width: 100px; height: 30px;}');GM_addStyle("button.thoughtbot:hover {background-color: #f37873;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #f37873), color-stop(50%, #db504d), color-stop(50%, #cb0500), color-stop(100%, #a20601));background-image: -webkit-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -moz-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -ms-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -o-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);cursor: pointer; }");
GM_addStyle("button.thoughtbot:active {background-color: #d43c28;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #d43c28), color-stop(50%, #ad3224), color-stop(50%, #9c1500), color-stop(100%, #700d00));background-image: -webkit-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -moz-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -ms-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -o-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);-webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4);box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4); }  ");
var a=function(b){var d="http://www.erepublik.com/"+LANG+"/economy/fire";params={action_type:"fire",employeeId:parseInt(b.shift()),_token:$("#_token").val()};$.post(d,params,function(d){var f=$("#fire_employee_"+b).parent();if(!1==d.status&&"redirect"==d.message&&!0==isLast)window.location.reload();else if(!1!=d.status||"redirect"!=d.message||!1!=isLast)if(!1!=d.status||"lock"!=d.message)!0==d.status?0==b.length?window.location.reload():(unsafeWindow.throwNotice(f,"Fired."),setTimeout(function(){a(b)},
800)):unsafeWindow.throwError(f,d.message)},"json")};$(".list_group .listing").each(function(){$(this).find(".employee_salary.c3 strong").append('<input type="checkbox" name="fireHim[]" style="vertical-align: middle; margin-left: 10px; margin-bottom:3px;" id="fireHimd">')});$(".bottom_details").before('<button class="thoughtbot" id="fireThem">Fire Selected</button>');$("#fireThem").bind("click",function(){var b=[];$("input[name='fireHim[]']:checked").each(function(){b.push($(this).parent().parent().find(".current_salary").attr("id").split("_")[2].trim())});
a(b)})}}$("#remove_mode").bind("click",function(){$(this).hasClass("disabled")||a()});$("#edit_mode").bind("click",function(){0<$("#fireThem").length&&($(".list_group .listing .employee_salary.c3 strong #fireHimd").remove(),$("#fireThem").remove())});$("#add_mode").bind("click",function(){0<$("#fireThem").length&&($(".list_group .listing .employee_salary.c3 strong #fireHimd").remove(),$("#fireThem").remove())})}
function ChangeSalaryAll(){function a(){0<$("#change_sal_all").length?$("#change_sal_all").remove():(GM_addStyle('button.thoughtbot {margin-top: 5px;background-color: #ee432e;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ee432e), color-stop(50%, #c63929), color-stop(50%, #b51700), color-stop(100%, #891100));background-image: -webkit-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -moz-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -ms-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -o-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);border: 1px solid #951100;border-radius: 5px;-webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;color: #fff;font: bold 11px/1 "helvetica neue", helvetica, arial, sans-serif;text-align: center;text-shadow: 0px -1px 1px rgba(0, 0, 0, 0.8);width: 100px; height: 30px;}'),
GM_addStyle("button.thoughtbot:hover {background-color: #f37873;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #f37873), color-stop(50%, #db504d), color-stop(50%, #cb0500), color-stop(100%, #a20601));background-image: -webkit-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -moz-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -ms-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -o-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);cursor: pointer; }"),
GM_addStyle("button.thoughtbot:active {background-color: #d43c28;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #d43c28), color-stop(50%, #ad3224), color-stop(50%, #9c1500), color-stop(100%, #700d00));background-image: -webkit-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -moz-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -ms-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -o-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);-webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4);box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4); }  "),
$(".bottom_details").before('<div id="change_sal_all" style="float: right;"><input type="text" style="margin-bottom: 0px!important; margin-right: 5px!important;width: 40px;" class="field" id="eRS_same_all"><button class="thoughtbot" id="updateAll">Update fields</button><button class="thoughtbot" id="changeAll">Change For All</button></div>'),$("#updateAll").click(function(){var a=$("#eRS_same_all").val();$('input[id^="salary_value_"]').val(a)}),$("#changeAll").click(function(){b=[];d=0;$(".list_group").find(".employee_salary.c3").each(function(){var a=
$(this),d=a.find(".old_salary_value").attr("id").split("_")[2],c=""==$("#eRS_same_all").val()?a.find("#salary_value_"+d).val():$("#eRS_same_all").val();0!=parseFloat(c)&&parseFloat(c)!=parseFloat(a.find("#old_salary_"+d).val())&&b.push({action_type:"update_salary",employeeId:d,salary:c,_token:$("#_token").val()})});d=b.length;c(0)}))}function c(a){a>=d?window.location.reload():$.post("http://www.erepublik.com/en/economy/update-salary",b[a],function(d){var g=$("#old_salary_"+b[a].employeeId).parent().parent();
if(!1!=d.status||"redirect"!=d.message)if(!1!=d.status||"lock"!=d.message)!0==d.status?($("#old_salary_"+b[a].employeeId).val(d.result.salary),$("#current_salary_"+b[a].employeeId).html(d.result.salary+" "+unsafeWindow.salaryDetails.currency),unsafeWindow.throwNotice(g,d.result.message),setTimeout(function(){unsafeWindow.recalculateDues()},50)):unsafeWindow.throwError(g,d.message);setTimeout(function(){c(a+1)},3E3)},"json")}var b=[],d=0;$("#edit_mode").click(function(){a()});$("#add_mode,#remove_mode").bind("click",
function(){0<$("#change_sal_all").length&&$("#change_sal_all").remove()})}
function ProfitCalculator(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/inventory",dataType:"html",onload:function(a){function c(a){var d=""==$("#price_pro").val()?0:parseFloat($("#price_pro").val()),b=""==$("#bonus").val()?0:parseFloat($("#bonus").val()),k=""==$("#price_raw").val()?0:parseFloat($("#price_raw").val()),c=""==$("#your_raw").val()?0:parseFloat($("#your_raw").val()),e=""==$("#employees").val()?0:parseFloat($("#employees").val()),f=""==$("#salary").val()?
0:parseFloat($("#salary").val());100<b&&(b=100);e>g[a].emp&&(e=g[a].emp);var q=g[a].pro+g[a].pro*b/100,u=e*(g[a].pro+g[a].pro*b/100);if(-1==a.indexOf("rf")&&-1==a.indexOf("rw")){var r=g[a].raw+g[a].raw*b/100,b=e*(g[a].raw+g[a].raw*b/100),q=q*d/(100+g[a].tax)*100-k*(r-(c>r?r:c))-unsafeWindow.pageDetails.own_tax;a=0==e?0:u*d/(100+g[a].tax)*100-k*(b-(c>b?b:c))-e*f}else $("#price_raw,#your_raw").prop("readonly",!0),q=q*d/(100+g[a].tax)*100,a=0==g[a].emp||0==e?0:u*d/(100+g[a].tax)*100-e*f;$(".employer.fill #my").text(q.toFixed(2));
$(".employer.fill #emp").text(a.toFixed(2))}GM_addStyle(".dk_container {   background-color: #f5f5f5;   font-family: 'Helvetica', Arial, sans-serif;   font-size: 12px;   font-weight: bold;   margin-bottom: 18px;   border-radius: 5px;   -moz-border-radius: 5px;   -webkit-border-radius: 5px; }   .dk_container:focus {     outline: 0; }   .dk_container a {     cursor: pointer;     text-decoration: none; }  .dk_toggle {   border: 1px solid #ccc;   color: #333;   padding: 7px 45px 7px 10px;   text-shadow: #fff 1px 1px 0;   border-radius: 5px;   -moz-border-radius: 5px;   -webkit-border-radius: 5px;   -webkit-transition: border-color .5s;   -moz-transition: border-color .5s;   -o-transition: border-color .5s;   transition: border-color .5s;   position: relative; }   .dk_toggle:hover, .dk_toggle:focus {     border-color: #8c8c8c; }   .dk_toggle:after {     position: absolute;     top: 45%;     right: 10px;     content: '';     border-left: 5px solid transparent;     border-right: 5px solid transparent;     border-top: 5px solid #4B4B4B; }  .dk_focus .dk_toggle {   border-color: #40b5e2;   box-shadow: 0 0 5px #40b5e2;   -moz-box-shadow: 0 0 5px #40b5e2;   -webkit-box-shadow: 0 0 5px #40b5e2; }  .dk_open {   box-shadow: 0 0 5px #40b5e2;   -moz-box-shadow: 0 0 5px #40b5e2;   -webkit-box-shadow: 0 0 5px #40b5e2;   z-index: 10; }   .dk_open .dk_toggle {     background-color: #ececec;     border-color: #8c8c8c;     color: #ccc;     box-shadow: inset 0 -2px 5px #ccc;     border-radius: 5px 5px 0 0;     -moz-border-radius: 5px 5px 0 0;     -webkit-border-radius: 5px 5px 0 0; }  .dk_open_top .dk_toggle {   border-radius: 0 0 5px 5px;   -moz-border-radius: 0 0 5px 5px;   -webkit-border-radius: 0 0 5px 5px; } .dk_open_top .dk_options, .dk_open_top .dk_options_inner {   border-radius: 5px 5px 0 0;   -moz-border-radius: 5px 5px 0 0;   -webkit-border-radius: 5px 5px 0 0; }  .dk_options {   background: #fefefe;   box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;   -moz-box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;   -webkit-box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;   border-radius: 0 0 5px 5px;   -moz-border-radius: 0 0 5px 5px;   -webkit-border-radius: 0 0 5px 5px; }   .dk_options a {     background-color: #fff;     border-bottom: 1px solid #999;     font-weight: bold;     padding: 8px 10px; }   .dk_options a:hover, .dk_options:focus,   .dk_options .dk_option_current a {     background-color: #0084c7;     border-bottom-color: #004c72;     color: #fff;     text-decoration: none;     text-shadow: rgba(0, 0, 0, 0.5) 0 1px 0; }   .dk_options li:last-child a {     border-bottom: none; }   .dk_options .disabled {     cursor: default; }     .dk_options .disabled a {       color: #aaa; }     .dk_options .disabled:hover, .dk_options .disabled:hover a     .dk_options .disabled:focus, .dk_options .disabled:focus a {       cursor: default;       background-color: #fff;       border-bottom-color: #999;       text-shadow: none; }  .dk_options_inner {   max-height: 250px;   border: 1px solid #8c8c8e;   border-bottom-width: 2px;   border-bottom-color: #999;   color: #333;   text-shadow: #fff 0 1px 0;   border-radius: 0 0 5px 5px;   -moz-border-radius: 0 0 5px 5px;   -webkit-border-radius: 0 0 5px 5px; }  .dk_container {   display: none;   float: left; }   .dk_container a {     outline: 0; }  .dk_toggle {   display: -moz-inline-stack;   display: inline-block;   *display: inline;   position: relative;   zoom: 1; }  .dk_open {   position: relative; }   .dk_open .dk_options {     display: block; }   .dk_open .dk_label {     color: inherit; }  .dk_options {   display: none;   margin-top: -1px;   position: absolute;   right: 0;   width: 100%; }   .dk_options a, .dk_options a:link, .dk_options a:visited {     display: block; }  .dk_options_inner {   overflow: auto;   position: relative;   -webkit-overflow-scrolling: touch; }  .dk_container select {   position: absolute;   top: -99999em;   visibility: hidden; }  .dk_mobile {   position: relative; }   .dk_mobile select {     display: block;     width: 100%;     height: 100%;     top: 0;     left: 0;     visibility: visible;     opacity: 0;     appearance: none;     -moz-appearance: none;     -webkit-appearance: none; }");
var b=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""),d=0;a=$(".currency_amount p img").attr("alt").trim();var b=$.parseJSON(b.split("var countryList = ")[1].split("var citizenshipCountry")[0].trim().split(";")[0]),e=img_country[eRS.country].id;if("0"==b[e].taxes)var f={1:0,2:0,7:0,12:0},d=1;else f={1:parseFloat(b[e].taxes["1"].value_added_tax),2:parseFloat(b[e].taxes["2"].value_added_tax),7:parseFloat(b[e].taxes["7"].value_added_tax),12:parseFloat(b[e].taxes["12"].value_added_tax)};
var g={f1:{raw:100,pro:100,tax:f[1],emp:1},f2:{raw:200,pro:100,tax:f[1],emp:2},f3:{raw:300,pro:100,tax:f[1],emp:3},f4:{raw:400,pro:100,tax:f[1],emp:5},f5:{raw:500,pro:100,tax:f[1],emp:10},f6:{raw:600,pro:100,tax:f[1],emp:10},f7:{raw:2E3,pro:100,tax:f[1],emp:10},w8:{raw:100,pro:10,tax:f[2],emp:1},w9:{raw:200,pro:10,tax:f[2],emp:2},w10:{raw:300,pro:10,tax:f[2],emp:3},w11:{raw:400,pro:10,tax:f[2],emp:5},w12:{raw:500,pro:10,tax:f[2],emp:10},w13:{raw:600,pro:10,tax:f[2],emp:10},w14:{raw:2E3,pro:10,tax:f[2],
emp:10},rf15:{raw:0,pro:35,tax:f[7],emp:0},rf16:{raw:0,pro:70,tax:f[7],emp:0},rf17:{raw:0,pro:125,tax:f[7],emp:1},rf18:{raw:0,pro:175,tax:f[7],emp:1},rf19:{raw:0,pro:250,tax:f[7],emp:4},rw20:{raw:0,pro:35,tax:f[12],emp:0},rw21:{raw:0,pro:70,tax:f[12],emp:0},rw22:{raw:0,pro:125,tax:f[12],emp:1},rw23:{raw:0,pro:175,tax:f[12],emp:1},rw24:{raw:0,pro:250,tax:f[12],emp:4}};$(".employer.fill").before('<div class="employer fill"><h4 class="eRSCalculator">Company profit calculator</h4><div class="details work_holder eRSFacCalc"><div class="emplosyer_info" style="width: 600px;"><div id="myDropdown"><select id="companyselect"><option value="0">Select Factory</option><option value="f1" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_1.png">Food Factory Q1</option><option value="f2" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_2.png">Food Factory Q2</option><option value="f3" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_3.png">Food Factory Q3</option><option value="f4" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_4.png">Food Factory Q4</option><option value="f5" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_5.png">Food Factory Q5</option><option value="f6" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_6.png">Food Factory Q6</option><option value="f7" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/1_7.png">Food Factory Q7</option><option value="w8" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_1.png">Weapon Factory Q1</option><option value="w9" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_2.png">Weapon Factory Q2</option><option value="w10" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_3.png">Weapon Factory Q3</option><option value="w11" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_4.png">Weapon Factory Q4</option><option value="w12" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_5.png">Weapon Factory Q5</option><option value="w13" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_6.png">Weapon Factory Q6</option><option value="w14" data-imagesrc="http://www.erepublik.com/images/modules/manager/factory_buildings/2_7.png">Weapon Factory Q7</option><option value="rf15" data-imagesrc="http://www.erepublik.com/images/buildings/7.png">Food Raw Factory - Grain Farm</option><option value="rf16" data-imagesrc="http://www.erepublik.com/images/buildings/8.png">Food Raw Factory - Fruit Orchard</option><option value="rf17" data-imagesrc="http://www.erepublik.com/images/buildings/9.png">Food Raw Factory - Fishery</option><option value="rf18" data-imagesrc="http://www.erepublik.com/images/buildings/10.png">Food Raw Factory - Cattle Farm</option><option value="rf19" data-imagesrc="http://www.erepublik.com/images/buildings/11.png">Food Raw Factory - Hunting Lodge</option><option value="rw20" data-imagesrc="http://www.erepublik.com/images/buildings/12.png">Weapon Raw Factory - Iron Mine</option><option value="rw21" data-imagesrc="http://www.erepublik.com/images/buildings/13.png">Weapon Raw Factory - Oil Rig</option><option value="rw22" data-imagesrc="http://www.erepublik.com/images/buildings/14.png">Weapon Raw Factory - Aluminium Mine</option><option value="rw23" data-imagesrc="http://www.erepublik.com/images/buildings/15.png">Weapon Raw Factory - Saltpeter Mine</option><option value="rw24" data-imagesrc="http://www.erepublik.com/images/buildings/16.png">Weapon Raw Factory - Rubber Plantation</option></select></div><div id="myDropdown"><select id="Cmarketplace"><option value="0">My country</option><option value="Albania">Albania</option><option value="Argentina">Argentina</option><option value="Australia">Australia</option><option value="Austria">Austria</option><option value="Belarus">Belarus</option><option value="Belgium">Belgium</option><option value="Bolivia">Bolivia</option><option value="Bosnia-Herzegovina">Bosnia and Herzegovina</option><option value="Brazil">Brazil</option><option value="Bulgaria">Bulgaria</option><option value="Canada">Canada</option><option value="Chile">Chile</option><option value="China">China</option><option value="Colombia">Colombia</option><option value="Croatia">Croatia</option><option value="Cyprus">Cyprus</option><option value="Czech-Republic">Czech Republic</option><option value="Denmark">Denmark</option><option value="Egypt">Egypt</option><option value="Estonia">Estonia</option><option value="Finland">Finland</option><option value="France">France</option><option value="Germany">Germany</option><option value="Greece">Greece</option><option value="Hungary">Hungary</option><option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Iran">Iran</option><option value="Ireland">Ireland</option><option value="Israel">Israel</option><option value="Italy">Italy</option><option value="Japan">Japan</option><option value="Latvia">Latvia</option><option value="Lithuania">Lithuania</option><option value="Malaysia">Malaysia</option><option value="Mexico">Mexico</option><option value="Montenegro">Montenegro</option><option value="Netherlands">Netherlands</option><option value="New-Zealand">New Zealand</option><option value="North-Korea">North Korea</option><option value="Norway">Norway</option><option value="Pakistan">Pakistan</option><option value="Paraguay">Paraguay</option><option value="Peru">Peru</option><option value="Philippines">Philippines</option><option value="Poland">Poland</option><option value="Portugal">Portugal</option><option value="Republic-of-China-Taiwan">Republic of China (Taiwan)</option><option value="Republic-of-Macedonia-FYROM">Republic of Macedonia (FYROM)</option><option value="Republic-of-Moldova">Republic of Moldova</option><option value="Romania">Romania</option><option value="Russia">Russia</option><option value="Saudi-Arabia">Saudi Arabia</option><option value="Serbia">Serbia</option><option value="Singapore">Singapore</option><option value="Slovakia">Slovakia</option><option value="Slovenia">Slovenia</option><option value="South-Africa">South Africa</option><option value="South-Korea">South Korea</option><option value="Spain">Spain</option><option value="Sweden">Sweden</option><option value="Switzerland">Switzerland</option><option value="Thailand">Thailand</option><option value="Turkey">Turkey</option><option value="Ukraine">Ukraine</option><option value="United-Arab-Emirates">United Arab Emirates</option><option value="United-Kingdom">United Kingdom</option><option value="Uruguay">Uruguay</option><option value="USA">USA</option><option value="Venezuela">Venezuela</option></select></div><div style="position:absolute; right: 20px;"><div id="factory" style="float: left; margin-right: 60px"></div><div id="countryFlag" style="float:right; margin-right: 10px"><img src="http://www.erepublik.com/images/flags/XL/'+
eRS.country+'.gif"></div></div></div><div style="clear: both"></div><div class="required_health" style="width: 80px;" title="Product price per unit"><em>Product Price</em><input type="text" style=" float: left!important; width: 40px!important;" id="price_pro" value="0" class="field"></div><div class="required_health" style="width: 80px;" title="Raw material price per unit"><em>Raw Price</em><input type="text" style=" float: left!important; width: 40px!important;" id="price_raw" value="0" class="field"></div><div class="required_health" style="width: 80px;" title="How much raw material can you produce"><em>Own Raw</em><input type="text" style=" float: left!important; width: 40px!important;" id="your_raw" value="0" class="field"></div><div class="required_health" style="width: 80px;" title="Country bonus on production in selected type of factory e.g. for 40% enter 40"><em>Bonus</em><input type="text" style=" float: left!important; width: 40px!important;" id="bonus" value="0" class="field"></div><div class="required_health" style="width: 80px;" title="Number of employees you have in selected factory"><em>Employees</em><input type="text" style=" float: left!important; width: 40px!important;" id="employees" value="0" class="field"></div><div class="required_health" style="width: 80px;" title="Your employees salary in selected factory"><em>Salary</em><input type="text" style=" float: left!important; width: 40px!important;" id="salary" value="0" class="field"></div><div class="employer_salary" style="width: 110px;" title="Earnings or losses when you work alone"><em>Manager work</em><strong id="my">0</strong><small> '+
a+'</small></div><div class="employer_salary" style="width: 110px;" title="Earnings or losses when employees work"><em>Employee work</em><strong id="emp">0</strong><small> '+a+"</small></div></div></div>");$(".required_health,.employer_salary").tipsy({gravity:"s"});$(".eRSFacCalc").attr("style","height:150px!important");$("#price_pro,#price_raw,#your_raw,#salary,#bonus,#employees").prop("readonly",!0);$("#companyselect").dropkick({width:"370",change:function(a,d){0!=a?($("#factory").html(""),$("#factory").html('<img src="'+
$("#companyselect option:selected").attr("data-imagesrc")+'">'),$("#price_pro,#price_raw,#your_raw,#salary,#bonus,#employees").prop("readonly",!1),c(a)):$("#price_pro,#price_raw,#your_raw,#salary,#bonus,#employees").prop("readonly",!0)}});$("#price_pro,#price_raw,#your_raw,#salary,#bonus,#employees").keyup(function(){c($("#companyselect").val())});$("#Cmarketplace").dropkick({width:"370",change:function(a,b){if(0!=a&&a!=eRS.country||1==d)$("#countryFlag").html(""),$("#countryFlag").html('<img src="http://www.erepublik.com/images/flags/XL/'+
a+'.gif">'),GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/country/economy/"+a,dataType:"html",onload:function(a){var d=$(a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"")),b=d.find(".citizens.largepadded tr").eq(1).find("td").eq(3).find("span").text().trim();a=""==b?0:parseFloat(b);for(var b=d.find(".citizens.largepadded tr").eq(1).find("td").eq(4).find("span").text().trim(),e=""==b?0:parseFloat(b),b=d.find(".citizens.largepadded tr").eq(2).find("td").eq(3).find("span").text().trim(),
f=""==b?0:parseFloat(b),b=d.find(".citizens.largepadded tr").eq(2).find("td").eq(4).find("span").text().trim(),h=""==b?0:parseFloat(b),b=d.find(".citizens.largepadded tr").eq(4).find("td").eq(3).find("span").text().trim(),m=""==b?0:parseFloat(b),b=d.find(".citizens.largepadded tr").eq(4).find("td").eq(4).find("span").text().trim(),l=""==b?0:parseFloat(b),b=d.find(".citizens.largepadded tr").eq(5).find("td").eq(3).find("span").text().trim(),x=""==b?0:parseFloat(b),b=d.find(".citizens.largepadded tr").eq(5).find("td").eq(4).find("span").text().trim(),
d=""==b?0:parseFloat(b),b=1;25>b;b++)7>=b?g["f"+b].tax=a+e:8<b&&14>=b?g["w"+b].tax=f+h:14<b&&19>=b?g["rf"+b].tax=m+l:19<b&&(g["rw"+b].tax=x+d);c($("#companyselect").val())}});else{$("#countryFlag").html("");$("#countryFlag").html('<img src="http://www.erepublik.com/images/flags/XL/'+eRS.country+'.gif">');for(var e=1;25>e;e++)7>=e?g["f"+e].tax=f[1]:8<e&&14>=e?g["w"+e].tax=f[2]:14<e&&19>=e?g["rf"+e].tax=f[7]:19<e&&(g["rw"+e].tax=f[12]);c($("#companyselect").val())}}});1==d&&GM_xmlhttpRequest({method:"GET",
url:"http://www.erepublik.com/"+LANG+"/country/economy/"+eRS.country,dataType:"html",onload:function(a){var b=$(a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"")),c=b.find(".citizens.largepadded tr").eq(1).find("td").eq(3).find("span").text().trim();a=""==c?0:parseFloat(c);for(var c=b.find(".citizens.largepadded tr").eq(1).find("td").eq(4).find("span").text().trim(),k=""==c?0:parseFloat(c),c=b.find(".citizens.largepadded tr").eq(2).find("td").eq(3).find("span").text().trim(),
e=""==c?0:parseFloat(c),c=b.find(".citizens.largepadded tr").eq(2).find("td").eq(4).find("span").text().trim(),p=""==c?0:parseFloat(c),c=b.find(".citizens.largepadded tr").eq(4).find("td").eq(3).find("span").text().trim(),s=""==c?0:parseFloat(c),c=b.find(".citizens.largepadded tr").eq(4).find("td").eq(4).find("span").text().trim(),q=""==c?0:parseFloat(c),c=b.find(".citizens.largepadded tr").eq(5).find("td").eq(3).find("span").text().trim(),u=""==c?0:parseFloat(c),c=b.find(".citizens.largepadded tr").eq(5).find("td").eq(4).find("span").text().trim(),
b=""==c?0:parseFloat(c),c=1;25>c;c++)7>=c?g["f"+c].tax=a+k:8<c&&14>=c?g["w"+c].tax=e+p:14<c&&19>=c?g["rf"+c].tax=s+q:19<c&&(g["rw"+c].tax=u+b);f["1"]=a+k;f["2"]=e+p;f["7"]=s+q;f["12"]=u+b;0==d}})}})}
function ShowPriceCompare(){function a(a){c!=a&&($(".compare_other").fadeOut("fast"),$(".compare_other").remove(),GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/market/"+a+"/"+d+"/"+e+"/citizen/0/"+f+"/1",onload:function(a){rowCounter=0;a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");$(a).find("#marketplace .price_sorted tr").each(function(){var a=$(this);num=a.find(".m_stock").text();price_major=a.find(".m_price strong:eq(0)").text().trim();
price_minor=a.find(".m_price sup").text();$("#marketplace .price_sorted tr:eq("+rowCounter+") .m_stock").append("<div style='display:none; padding-left:5px; margin-top:-10px;' class='compare_other'><br>"+num+"</div>");current=$("#marketplace .price_sorted tr:eq("+rowCounter+") .m_price").append("<div style='display:none;' class='compare_other'><strong>"+price_major+"</strong><sup>"+price_minor+"<strong></strong> </sup></div>");rowCounter++});$(".compare_other").fadeIn("slow")}}),c=$("#countryIdCom").val())}
var c,b=document.location.toString().split("/"),d=b[7],e=b[8],f=b[11],b=$("#countryId").html();$(".country-select").attr("style","float:left!important; margin-left:110px;");$("#marketplace h1").attr("style","display:inline!important;");$(".country-select").before('<h1 style="display:inline; float:right; margin-right:100px">Compare to marketplace</h1><div class="country-select" style="float:right;"><select id="countryIdCom">'+b+"</select></div>");$j("#countryIdCom").msDropDown({visibleRows:8,rowHeight:29});
b=0<$("#countryIdCom_child ._msddli_").length?"._msddli_":"a";$("#countryIdCom_child "+b).click(function(){$(".onaccount_display").slideUp("fast");a($("#countryIdCom").val())});c=$("#countryIdCom").val()}
function DamageCalculator(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/citizen/profile/"+eRS.citizenId,dataType:"html",onload:function(a){function c(){for(var a=GetDivision(parseInt($(".user_level b").text())),b=$("#NE").is(":checked")?.1:0,d=$("#Bon50").is(":checked")?.5:0,c=0,l=0,k,n=1;7>=n;n++)k=0>$("#w"+n+"").val()||""==$("#w"+n+"").val()?0:parseInt($("#w"+n+"").val()),c+=k*e["q"+n],l+=k;var p=0>$("#b").val()?0:""==$("#b").val()?0:parseInt($("#b").val());k=0>$("#bb").val()?
0:""==$("#bb").val()?0:parseInt($("#bb").val());var n=100<unsafeWindow.SERVER_DATA.level?.1:0,p=p-k,s=1E4*p,l=l+p+k,c=c+s+k*(1E4+1E4*a),c=c+Math.floor(s*n),c=c+Math.floor(c*b),c=c+Math.floor(c*d),b=0;0<$(".item.bgrocket.q1").length?b=5E4:0<$(".item.bgrocket.q2").length?b=25E4:0<$(".item.bgrocket.q3").length?b=5E5:0<$(".item.bgrocket.q4").length?b=1E6:0<$(".item.bgrocket.q5").length&&(b=25E5);var d=0>$("#r").val()?0:""==$("#r").val()?0:parseInt($("#r").val()),c=c+d*b,q;switch(a){case 1:q=75E3;break;
case 2:q=375E3;break;case 3:q=75E4;break;case 4:q=15E5}a=0>$("#m").val()?0:""==$("#m").val()?0:parseInt($("#m").val());c+=a*q;q=0>$("#n").val()?0:""==$("#n").val()?0:parseInt($("#n").val());c+=5E6*q;"NaN"==c.toString()&&(c="Input numbers only ;)");l*=10;"NaN"==l.toString()&&(l="Input numbers only ;)");$("#td").text(coma(c));$("#te").text(coma(l))}var b=$(a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""));a=parseInt(b.find(".citizen_military").eq(0).find(".stat small strong").text().split("/")[0].trim().replace(",",
""));var d=b.find(".citizen_military").eq(1).find("h4 img").attr("tmpsrc").split("/")[6].split(".")[0],b=parseInt(b.find("#content .citizen_status .citizen_experience .citizen_level").eq(0).text()),e={q1:calcInflu(a,img_rank[d],20,!1,b,!1),q2:calcInflu(a,img_rank[d],40,!1,b,!1),q3:calcInflu(a,img_rank[d],60,!1,b,!1),q4:calcInflu(a,img_rank[d],80,!1,b,!1),q5:calcInflu(a,img_rank[d],100,!1,b,!1),q6:calcInflu(a,img_rank[d],120,!1,b,!1),q7:calcInflu(a,img_rank[d],200,!1,b,!1)};$(".items_holder h4:first").before('<div class="employer fill"><h4 class="eRSCalculator">Damage Calculator</h4><div class="details work_holder eRSFacCalc"><div class="required_health"><em style="color: #555555!important;">In the fields bellow input number of hits. Please be advised that you can not input more hits with bazooka and booster than hits with regular bazooka.</em></div><div style="clear: both"></div><div class="calcS" style="width: 500px"><div class="required_health"><em>Weapon Q1</em><input type="text" style=" float: left!important; width: 40px!important;" id="w1" value="0" class="field"></div><div class="required_health"><em>Weapon Q2</em><input type="text" style=" float: left!important; width: 40px!important;" id="w2" value="0" class="field"></div><div class="required_health"><em>Weapon Q3</em><input type="text" style=" float: left!important; width: 40px!important;" id="w3" value="0" class="field"></div><div class="required_health"><em>Weapon Q4</em><input type="text" style=" float: left!important; width: 40px!important;" id="w4" value="0" class="field"></div><div class="required_health"><em>Weapon Q5</em><input type="text" style=" float: left!important; width: 40px!important;" id="w5" value="0" class="field"></div><div class="required_health"><em>Weapon Q6</em><input type="text" style=" float: left!important; width: 40px!important;" id="w6" value="0" class="field"></div><div class="required_health"><em>Weapon Q7</em><input type="text" style=" float: left!important; width: 40px!important;" id="w7" value="0" class="field"></div><div class="required_health"><em>Bazookas</em><input type="text" style=" float: left!important; width: 40px!important;" id="b" value="0" class="field"></div><div class="required_health"><em>Boosters</em><input type="text" style=" float: left!important; width: 40px!important;" id="bb" value="0" class="field"></div><div class="required_health"><em>Rockets</em><input type="text" style=" float: left!important; width: 40px!important;" id="r" value="0" class="field"></div><div class="required_health"><em>Missiles</em><input type="text" style=" float: left!important; width: 40px!important;" id="m" value="0" class="field"></div><div class="required_health"><em>Nukes</em><input type="text" style=" float: left!important; width: 40px!important;" id="n" value="0" class="field"></div><div class="required_health"><em>Natural Enemy<input type="checkbox" id="NE" style="float:right; display:inline; margin-top:-2px;"></em><em>50% Bonus <input type="checkbox" id="Bon50" style="float:right; display:inline; margin-top:-2px;"></em></div><div><div style="left: 530px; position: absolute;"><div class="employer_salary total_dmg" style="width: 200px;"><em>Total damage</em><strong id="td">0</strong></div><br><div class="employer_salary total_eng" style="margin-top: 15px; width: 200px;"><em>Total energy needed</em><strong id="te">0</strong></div></div></div></div>');
$(".eRSFacCalc").attr("style","height: 145px!important; width: 718px!important;");$(".eRSFacCalc .total_dmg strong").attr("style","background-image:url(http://www.erepublik.com/images/modules/maps/war_icon.png)!important; background-position:0!important; padding-left: 35px!important;");$(".eRSFacCalc .total_eng strong").attr("style","background-image:url(http://www.erepublik.com/images/modules/sidebar/energy_bar_icon2.png)!important; background-position:0!important; padding-left: 35px!important;");
$(".eRSFacCalc .required_health").attr("style","margin-bottom: 5px!important; width: 70px!important;");$(".eRSFacCalc .required_health:last").attr("style","padding-top:14px;margin-bottom: 5px!important; width: 120px!important;");$(".eRSFacCalc .required_health:first").attr("style","margin-bottom: 0px!important; width: 718px!important;");$("#NE").change(function(){c()});$("#Bon50").change(function(){c()});$(".required_health input").keyup(function(){("b"==$(this).attr("id")||"bb"==$(this).attr("id"))&&
parseInt($("#b").val())<parseInt($("#bb").val())&&$("#bb").val($("#b").val());c()})}})}
function SortWages(){function a(){b=[];$(".list_group .listing .employee_salary.c3").each(function(){var a=$(this);b.push({html:'<div class="'+a.parent().attr("class")+'">'+a.parent().html()+"</div>",sal:a.find(".old_salary_value").attr("value")})})}function c(){$(".list_group").html("");for(var a=0;a<b.length;a++)$(".list_group").append(b[a].html)}var b;$("#edit_mode").after('<strong style="margin-left: 10px!important;">Sort</strong><a href="javascript:;" id="sort_ASC" class="grey_plastic" title="Sort by salaries ASC"><img src="http://www.erepublik.com/images/modules/manager/upgrade_icon.png" alt=""></a>');$("#sort_ASC").after('<a href="javascript:;" id="sort_DESC" class="grey_plastic" title="Sort by salaries DESC"><img src="http://img62.imageshack.us/img62/4024/downicon.png" alt=""></a>');
$("#sort_ASC").bind("click",function(){a();b.sort(function(a,b){return parseFloat(a.sal)-parseFloat(b.sal)});$("#sort_ASC").attr("class","grey_plastic active");$("#sort_DESC").attr("class","grey_plastic");c()});$("#sort_DESC").bind("click",function(){a();b.sort(function(a,b){return parseFloat(b.sal)-parseFloat(a.sal)});$("#sort_ASC").attr("class","grey_plastic");$("#sort_DESC").attr("class","grey_plastic active");c()})}
function FindMyOffer(){function a(){$("button[id^=search_]").remove();$("button[id^=cancel_]").remove();$("div[id^=infoTable_]").remove();k=1;$(".exchange_offers.mine tbody tr").each(function(){var b=$(this);b.find(".ex_amount").css({width:"130px","padding-right":"10px"});b.find(".ex_amount strong").css("left","0px");b.find(".ex_rate").css("width","220px");b.find(".gored").css("margin-right","3px");var e=b.find(".gored").attr("id").split("_")[1].trim();b.find(".ex_buy button").css("min-width","0");
b.find(".ex_buy").append('<button style="margin-left: 3px; min-width: 0px!important" id="search_'+e+'" type="button" class="marketbtn post eRSsearch">Search</button><button style="margin-left: 3px;" id="cancel_'+e+'" type="button" style="display: none!important;" class="marketbtn post eRSsearchC">Cancel</button>');if("undefined"!=typeof f[e]){h=f[e].date;g=f[e].page;f[e].use=1;var l="/"==h?"No data available":'Offer is on page: <a href="javascript:void(0);" id="eRSShowOffer_'+e+'">'+g+"</a> [Day: "+
h+"]"}else h="/",g="No data",f[e]={date:h,page:g,use:1},l="No data available";b.find("#cancel_"+e).attr("style","display: none!important;");b.find("#remove_"+e).bind("click",function(){setTimeout(a,500)});b.find("#update_"+e).bind("click",function(){setTimeout(a,500)});b.find("#search_"+e).bind("click",function(){k=0;var a=$(this);a.attr("style","display: none!important;");a.parent().find("#cancel_"+e).attr("style","margin-left: 3px; display: block!important; min-width: 0px!important");var b="No data"==
f[e].page?0:f[e].page;m="GOLD"==a.parent().parent().find(".ex_amount em").text().trim()?62:1;c(e,m,b)});b.find("#cancel_"+e).bind("click",function(){k=1;var a=$(this);a.attr("style","display: none!important;");a.parent().find("#search_"+e).attr("style","margin-left: 3px; display: block!important; min-width: 0px!important");"/"==f[e].date?$("#info_"+e).text("No data available"):($("#info_"+e).html('Offer on page: <a href="javascript:void(0);" id="eRSShowOffer_'+e+'">'+f[e].page+"</a> ["+f[e].date+
"]"),$("#eRSShowOffer_"+e).bind("click",function(){var a=$(this);m="GOLD"==a.parent().parent().parent().parent().find(".ex_amount em").text().trim()?62:1;a=a.attr("id").split("_")[1].trim();d(m,f[a].page)}));$("#info_"+e).parent().find(".eRSdolar").attr("style","display:none;")});b.find(".ex_buy").append('<div id="infoTable_'+e+'" style="clear:both; display: block; width: 100%; text-align:center;"><strong id="info_'+e+'">'+l+'</strong><img class="eRSdolar" style="display:none; vertical-align:middle;" src="http://img339.imageshack.us/img339/2180/28480662.gif"></div>');
b.find("#eRSShowOffer_"+e).bind("click",function(){var a=$(this);m="GOLD"==a.parent().parent().parent().parent().find(".ex_amount em").text().trim()?62:1;a=a.attr("id").split("_")[1].trim();d(m,f[a].page)})});$.each(f,function(a,b){$.each(b,function(b,d){"use"==b&&0==d&&delete f[a]})});GM_setValue("eRSMyOffers",JSON.stringify(f))}function c(a,d,c){$("#info_"+a).text("Searching please wait: 0%");$("#info_"+a).parent().find(".eRSdolar").attr("style","display:inline-block; vertical-align:middle;");var k=
{_token:$("#_token").val(),personalOffers:0,page:1,currencyId:d};$.post(l,k,function(d){k._token=d.essentials.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"").split("<input id='_token' name='_token' type='hidden' value='")[1].split("'")[0];b(k,a)},"json")}function b(a,d){setTimeout(function(){0==k&&$.post(l,a,function(c){0==k&&(a._token=c.essentials.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"").split("<input id='_token' name='_token' type='hidden' value='")[1].split("'")[0],
$("#footer").after('<div class="boogus" style="display:none!important;"></div>'),$(".boogus").html(c.buy_mode.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"")),0<$(".boogus").find(".ex_rate #exchange_rate_"+d).length?(c=$(".eday strong").text().replace(",","").trim()+" "+$("#live_time").text().trim(),f[d].date=c,f[d].page=a.page+1,f[d].use=1,GM_setValue("eRSMyOffers",JSON.stringify(f)),$("#cancel_"+d).trigger("click")):(c=c.buy_mode.split('class="last" title="Go to page '),
c=2==c.length?parseInt(c[1].split('"')[0].trim()):a.page,c=a.page/c*100,100==c?$("#info_"+d).text("Offer doesn't exist anymore"):($("#info_"+d).text("Searching please wait "+c.toFixed(2)+"%"),a.page=parseInt(a.page)+1,b(a,d))),$(".boogus").remove())},"json")},500)}function d(a,b){$(".generic_validate").remove();$(".generic_error").remove();$(".create_form").hide();var d={_token:$("#_token").val(),personalOffers:0,page:parseInt(b)-1,currencyId:a};$.post(l,d,function(a){unsafeWindow.erepublik.exchange.displayNextPage(a,
!0)},"json")}var e=GM_getValue("eRSMyOffers");if("undefined"!=typeof e){var f=JSON.parse(e);$.each(f,function(a,b){$.each(b,function(b,d){"use"==b&&(f[a][b]=0)})})}else f={};var g,h,m,l="/"+LANG+"/economy/exchange/retrieve/",k;unsafeWindow.jQuery("body").ajaxComplete(function(b,d,c){(c.url.indexOf("/create")||c.url.indexOf("/update")||c.url.indexOf("/delete"))&&a()});$("#my_offers").bind("click",function(){setTimeout(function(){a()},500)})}
function GetRecepients(){unb();GM_addStyle(".grey_modal {display: block;padding: 5px; margin-right: 34px; background-color: #f1f1f1;background-image: url('/images/modules/misc/noiz.png');background-repeat: repeat;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;position: relative;text-shadow: rgba(255,255,255,0.6) 0 1px 0;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}");GM_addStyle(".grey_modal .inner_list{width: auto;display: inline-block; margin: 1px;background-color: #dedede;background-color: rgba(0,0,0,0.1);-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;box-shadow: rgba(255,255,255,0.8) 0 1px 0,rgba(0,0,0,0.1) 0 1px 0 inset;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;padding: 3px;}");
$(".message_listing tbody tr").each(function(){var a=$(this),c=a.find(".message_get.subject").attr("href"),b=c.split("/")[4],d=$(".user_name").text().trim();a.css("border-bottom","none");a.after("<tr><td colspan='4'><div class='grey_modal' id=\"eRSRecep_"+b+'">Loading message recepients.</div></td></tr>');(function(a){var b=0,g="";$.get(c,function(c){c=c.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");$(c).find(".message_container .coloured .nameholder:first a").each(function(){var a=
$(this);a.text().trim()!=d&&(g+='<div class="inner_list"><a href="'+a.attr("href")+'">'+a.text().trim()+"</a></div>",b+=1)});1==b?$("#eRSRecep_"+a).html("Recepient:"+g+""):$("#eRSRecep_"+a).html("Recepients:"+g+"")})})(b)})}
function ShowProfitability(){var a=parseInt(window.location.href.split("/")[7]);if(1==a||2==a){var c=parseInt(window.location.href.split("/")[8]),b,d;1==a&&(d="hp",b=7!=c?2*c:20);2==a&&(d="use",b=7!=c?c:10);$("#marketplace thead .m_provider").after('<th style="width:90px">Cost Per Use</th>');$("#marketplace .price_sorted tr").each(function(){var a=$(this),a=parseFloat(a.find(".m_price strong:first").text()+""+a.find(".m_price sup:first").html().split("<strong>")[0].trim())/b,a=.1>=a?a.toFixed(4):
a.toFixed(2);$(this).find(".m_provider").after('<td class="stprice"><strong>'+a.split(".")[0]+"</strong><sup>."+a.split(".")[1]+"<strong> "+$(".currency_amount p img").attr("title")+"/"+d+"</strong></sup></td>")})}}
function CheaperPack(){if(0<$(".rocket_factory_cost_list").length){var a=img_country[$(".user_country img").attr("src").split("/")[6].split(".")[0]].id,c=img_country[eRS.country].id,b=[],d=!1,e=function(g,h){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/market/"+h+"/2/"+g+"/citizen/0/price_asc/1",dataType:"html",onload:function(m){m=$(m.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""));b[g]=parseFloat(m.find(".m_price strong:first").text()+
""+m.find(".m_price sup:first").html().split("<strong>")[0].trim());6==g?(f(h),a!=c&&(b=[],!1==d&&(e(1,a),d=!0))):setTimeout(function(){e(g+1,h)},400)}})},f=function(d){var e=0,f=parseFloat($(".rocket_factory_cost_list li:first strong:first").text().split("/")[1]);isNaN(f)&&(f=parseFloat($(".rocket_factory_cost_list li:first strong:first").text()));for(var l=1;6>=l;l++){var k=l-1,n="0px 0px 0px 0px;",p="69px";0==k&&d==a?n="0px 0px 0px 3px;":5==k&&d==a&&(n="0px 0px 3px 0px;");d!=c&&(p="87px");$(".rocket_factory_cost_list li:eq("+
k+") strong:first").css("border-radius","0px 0px 0px 0px");$(".rocket_factory_cost_list li:eq("+k+")").append('<strong style="top: '+p+"!important; border-radius: "+n+'">'+b[l]+" "+$(".currency_amount p img").attr("title")+"</strong>");e+=b[l]}e*=f;0<$(".chipset_time").length&&a!=c&&$(".chipset_time margin-top").attr("style","bottom:-55px!important;");d!=c?$(".rocket_factory_cost_list").after('<strong style="position:absolute; top: 101px!important;"><img style="vertical-align:middle;" src="'+$(".user_country img").attr("src")+
'"> '+e.toFixed(2)+" "+$(".currency_amount p img").attr("title")+"</strong>"):$(".rocket_factory_cost_list").after('<strong style="position:absolute; top: 84px!important;"><img style="vertical-align:middle;" src="'+$(".currency_amount img").attr("src")+'"> '+e.toFixed(2)+" "+$(".currency_amount p img").attr("title")+"</strong>")};a!=c&&$(".rocket_factory_cost_list").attr("style","margin-bottom:30px;");e(1,c)}}
function GetItemPrice(){function a(a,b){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/market/"+$("#market_select").attr("country")+"/"+a+"/"+b+"/citizen/0/price_asc/1",dataType:"html",onload:function(a){a=$(a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""));a=parseFloat(a.find(".m_price strong:first").text()+""+a.find(".m_price sup:first").html().split("<strong>")[0].trim());$("#sell_price").val(a);$("#sell_price").prop("disabled",
!1);$("#sell_price").trigger("keyup")}})}$("#sell_price").prop("disabled",!0);$("#market_licenses_select .ml_selector").click(function(){var c=$("#product_select img").attr("src"),b=c.split("/")[6],c=c.split("/")[7].split("_")[0].replace("q","");a(b,c)});$(".sell_selector .industry_quality_selector").click(function(){var c=$(this),b=c.attr("quality");"0"==b&&(b=1);c=c.attr("industry");a(c,b)});a(1,1)}
function CheckAllies(){$(".all_battles li").each(function(){var a=$(this);0<a.find(".mpp_sign").length&&($(".allies_battles").append('<li id="'+a.attr("id")+'">'+a.html()+"</li>"),a.remove())})}
function BoosterBattle(){function a(a,d,c,f){GM_xmlhttpRequest({method:"POST",url:a,data:"_token="+$("#_token").val()+"&"+d+"="+c,headers:{"Content-Type":"application/x-www-form-urlencoded",referer:"http://www.erepublik.com/"+LANG+"/economy/inventory"},dataType:"json",onload:function(a){f(a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,""))}})}function c(a,d){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/inventory",
dataType:"html",onload:function(c){c=c.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");c=$(c).find(a);var f="";0<c.length?c.hasClass("disabled")?(f=c.hasClass("alreadyMade")?"#build_rocket"==a?"You cannot produce more rockets today. You can build more tomorrow.":"You've already produced a Damage Booster today.":c.hasClass("alreadyMade")?"#build_rocket"==a?"You already have one rocket in your inventory.":"You already have one Damage Booster in your inventory.":
"You do not have enough items.",d(f)):d("yes"):d("You do not have factory for this action")}})}GM_addStyle("#eRSbuildRocket1 {margin-right: 1px;margin-top:-1px;-moz-box-shadow:inset 0px 1px 0px 0px #fab3ad;-webkit-box-shadow:inset 0px 1px 0px 0px #fab3ad;box-shadow:inset 0px 1px 0px 0px #fab3ad;background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #fa665a), color-stop(1, #d34639) );background:-moz-linear-gradient( center top, #fa665a 5%, #d34639 100% );filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fa665a', endColorstr='#d34639');background-color:#fa665a;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;border:1px solid #d83526;display:inline-block;color:#ffffff;font-family:arial;font-size:12px;font-weight:bold;padding:1px 4px;text-decoration:none;text-shadow:1px 1px 0px #98231a;}");
GM_addStyle("#eRSbuildRocket1:hover {background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #d34639), color-stop(1, #fa665a) );background:-moz-linear-gradient( center top, #d34639 5%, #fa665a 100% );filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#d34639', endColorstr='#fa665a');background-color:#d34639;}");GM_addStyle("#eRSbuildRocket1:active {position:relative;top:1px;}");GM_addStyle("#eRSbuildRocket2 {margin-left: 1px; margin-top:-1px; -moz-box-shadow:inset 0px 1px 0px 0px #cae3fc; -webkit-box-shadow:inset 0px 1px 0px 0px #cae3fc; box-shadow:inset 0px 1px 0px 0px #cae3fc; background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #79bbff), color-stop(1, #4197ee) ); background:-moz-linear-gradient( center top, #79bbff 5%, #4197ee 100% ); filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#79bbff', endColorstr='#4197ee'); background-color:#79bbff; -moz-border-radius:3px; -webkit-border-radius:3px; border-radius:3px; border:1px solid #469df5; display:inline-block; color:#ffffff; font-family:arial; font-size:12px; font-weight:bold; padding:1px 4px; text-decoration:none; text-shadow:1px 1px 0px #287ace; }");
GM_addStyle("#eRSbuildRocket2:hover {   background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #4197ee), color-stop(1, #79bbff) ); background:-moz-linear-gradient( center top, #4197ee 5%, #79bbff 100% ); filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#4197ee', endColorstr='#79bbff'); background-color:#4197ee; }");GM_addStyle("#eRSbuildRocket2:active {position:relative; top:1px; }");GM_addStyle("#eRSbuildRocket3 {margin-left: 2px;  margin-top:-1px; -moz-box-shadow:inset 0px 1px 0px 0px #a4e271; -webkit-box-shadow:inset 0px 1px 0px 0px #a4e271; box-shadow:inset 0px 1px 0px 0px #a4e271; background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #89c403), color-stop(1, #77a809) ); background:-moz-linear-gradient( center top, #89c403 5%, #77a809 100% ); filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#89c403', endColorstr='#77a809'); background-color:#89c403;  -moz-border-radius:3px;  -webkit-border-radius:3px;  border-radius:3px;  border:1px solid #74b807;  display:inline-block;  color:#ffffff;  font-family:arial;  font-size:12px;  font-weight:bold;  padding:1px 4px;  text-decoration:none;  text-shadow:1px 1px 0px #528009;  }");
GM_addStyle("#eRSbuildRocket3:hover {   background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #77a809), color-stop(1, #89c403) );    background:-moz-linear-gradient( center top, #77a809 5%, #89c403 100% );    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#77a809', endColorstr='#89c403');  background-color:#77a809;  }");GM_addStyle("#eRSbuildRocket3:active {position:relative;  top:1px;  }");$(".action_holder").attr("style","padding-bottom: 2px!important;");
$("#pvp_actions").append('<div style="position:absolute; left: 249px;"><a id="eRSbuildRocket1" href="javascript:;">Build Booster</a><a id="eRSbuildRocket2" href="javascript:;">Build Rocket</a><a id="eRSbuildRocket3" href="javascript:;">Build Bazooka</a></div>');$("#eRSbuildRocket1").click(function(){var b=$(this);b.text("Building...");c("#build_damage_booster",function(d){"yes"===d?a("http://www.erepublik.com/"+LANG+"/main/build-rocket/","what","build_damage_booster",function(a){window.reload()}):
(alert(d),b.text("Build Booster"))})});$("#eRSbuildRocket2").click(function(){var b=$(this);b.text("Building...");c("#build_rocket",function(d){"yes"===d?a("http://www.erepublik.com/"+LANG+"/main/build-rocket/","what","build_rocket",function(a){window.reload()}):(alert(d),b.text("Build Rocket"))})});$("#eRSbuildRocket3").click(function(){var b=$(this);b.text("Building...");a("http://www.erepublik.com/"+LANG+"/main/assemble/","itemLevel",1,function(a){a.error?alert(a.message):b.text("Bazooka Built")})})}
function RemoveDead(){function a(){h=Math.ceil(d/b*100);$("#eRSremDW").text("| Searching... ["+h+"%]");GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/main/citizen-friends/"+eRS.citizenId+"/"+d,dataType:"html",onload:function(e){e=e.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");$(e).find(".lister tbody tr").each(function(){$(this).hasClass("dead")&&g.push($(this).find(".actions .remove").attr("href"))});d<b?(d+=1,setTimeout(a,
500)):d==b&&(f=g.length,0<f?c():$("#eRSremDW").text("| No dead friends"))}})}function c(){if(e<f){var a="http://www.erepublik.com"+g[e];$("#eRSremDW").text("| Deleting... ["+e+" / "+g.length+"]");GM_xmlhttpRequest({method:"POST",url:a,headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"html",onload:function(){e+=1;setTimeout(c,500)}})}else e==f&&$("#eRSremDW").text("| Done!")}sum=parseFloat($(".friends_title a:first").text().split("(")[1].split(")")[0].trim());$(".view_friends").after('<a href="javascript:;" class="view_friends" id="eRSremoveDead">| remove dead friends</a>');
var b=Math.ceil(sum/20),d=1,e=0,f,g=[],h;$("#eRSremoveDead").click(function(){$(this).attr("id","eRSremDW");a()})}
function RemoveMore(){function a(){$(".lister tbody tr").each(function(){$(this).find(".actions .remove").after('<input type="checkbox" name="removeThem[]" style="vertical-align: middle; margin-left: 10px; margin-bottom:-3px;" data-link="'+$(this).find(".actions .remove").attr("href")+'" id="removeThem">')});$(".pager").before('<button class="thoughtbot" id="remThem">Remove Selected</button>');$("#remThem").click(function(){$("input[name='removeThem[]']:checked").each(function(){b.push($(this).attr("data-link"))});
e=b.length;0<e?c():alert("No friends selected")})}function c(){d<e?GM_xmlhttpRequest({method:"POST",url:"http://www.erepublik.com"+b[d],headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"html",onload:function(){d+=1;setTimeout(c,500)}}):d==e&&alert("Done!")}GM_addStyle('button.thoughtbot {margin-top: 5px;float: right;background-color: #ee432e;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ee432e), color-stop(50%, #c63929), color-stop(50%, #b51700), color-stop(100%, #891100));background-image: -webkit-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -moz-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -ms-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: -o-linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);background-image: linear-gradient(top, #ee432e 0%, #c63929 50%, #b51700 50%, #891100 100%);border: 1px solid #951100;border-radius: 5px;-webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;color: #fff;font: bold 11px/1 "helvetica neue", helvetica, arial, sans-serif;text-align: center;text-shadow: 0px -1px 1px rgba(0, 0, 0, 0.8);width: 125px; height: 30px;}');
GM_addStyle("button.thoughtbot:hover {background-color: #f37873;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #f37873), color-stop(50%, #db504d), color-stop(50%, #cb0500), color-stop(100%, #a20601));background-image: -webkit-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -moz-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -ms-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: -o-linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);background-image: linear-gradient(top, #f37873 0%, #db504d 50%, #cb0500 50%, #a20601 100%);cursor: pointer; }");
GM_addStyle("button.thoughtbot:active {background-color: #d43c28;background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #d43c28), color-stop(50%, #ad3224), color-stop(50%, #9c1500), color-stop(100%, #700d00));background-image: -webkit-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -moz-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -ms-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: -o-linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);background-image: linear-gradient(top, #d43c28 0%, #ad3224 50%, #9c1500 50%, #700d00 100%);-webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4);box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4); }  ");
var b=[],d=0,e=0;a();$(".prev,.next").click(function(){$("#remThem").remove();setTimeout(function(){a()},2E3)})}
function ShowOffers(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/exchange-market",dataType:"html",onload:function(a){a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");var c="";$(a).find(".exchange_offers.mine tbody tr").each(function(){var a=$(this);c+='<div class="gold_amount" style="margin-bottom: 15px;"><p><strong>'+a.find(".ex_amount .ammount").val()+"</strong> <span>"+a.find(".ex_amount em").text()+"</span><br> &nbsp;&nbsp;&nbsp;<strong>1</strong> <span>"+
a.find(".ex_amount em").text()+"</span> <strong>=&nbsp; "+a.find(".ex_rate .ammount").val()+"</strong> <span>"+a.find(".ex_rate em:last").text()+"</span></p></div>"});""==c&&(c='<div class="gold_amount"><p><span>No offers</span></p></div>');$("#eRS_logo_holder").before('<div class="user_finances offers" style="margin-bottom: 5px;"><p style="padding: 3px; font-size: 12px; color: #666"><strong>My offers:</strong></p>'+c+"</div>");$(".user_finances.offers span").attr("style","float:none!important;")}})}
function DoQuickAccess(){GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/citizen/profile/"+eRS.citizenId,dataType:"html",onload:function(a){a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");a=$(a).find(".citizen_activity .place:eq(1) a").attr("href").split("/")[4];GM_addStyle("#large_sidebar .user_info .user_notify .notify.mudo {left: 62px;background-image: url('http://img17.imageshack.us/img17/5968/notifyalert.png');background-repeat: no-repeat;background-position: 0 0;}");
GM_addStyle("#large_sidebar .user_info .user_notify .notify.mudo:hover {background-position: 0 -20px;}");GM_addStyle("#large_sidebar .user_info .user_notify .notify.mudo:active {background-position: 0 -40px;}");$("#div_b").css("z-index","9");$(".user_notify:first").append('<a href="http://www.erepublik.com/'+LANG+"/main/group-show/"+a+'" title="Change daily order for military unit" class="notify mudo"></a>');$(".user_notify:first a").css({position:"relative",margin:"0.5px",left:"0px"})}})}
function MyIP(){GM_xmlhttpRequest({method:"GET",url:"http://www.ipchicken.com",dataType:"html",onload:function(a){a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");GM_addStyle(".ipinfo_table td{padding: 5px; padding-left: 10px;}");GM_addStyle(".ipinfo_title{color: #3b5b74; font-weight: bold;} .ipinfo_res{padding-left: 10px; color: #3c8fa7;}");$("#wall_master").before('<h1 class="feed_title">IP Info</h1><div id="citizen_feed" class="duo"><div class="inner" style="border-radius: 5px!important; -moz-border-radius: 5px!important; -webkit-border-radius: 5px!important;"><table class="ipinfo_table"><tr><td class="ipinfo_title">Your IP: </td><td class="ipinfo_res">'+
$(a).find('td[valign="top"] b').html().split("<br>")[0].trim()+"</td></tr></table></div></div>")}})}function getGuerrillaDmg(){$("#back_to_battle").click(function(){var a=parseInt($(".award_damage strong").text().split("+")[1]);Damage+=a;Guerrilla+=a;setTimeout(function(){GM_setValue(eRS.citizenId+".damageToday"+date,Damage);GM_setValue(eRS.citizenId+".guerrillaToday"+date,Guerrilla)},0);ShowKillDamage(1)})}
function ExchangeMarketButtons(){function a(a,f,g){var h="/"+LANG+"/economy/exchange/purchase/",m=$("#buy_currency").val(),l=$("#page").val();isNaN(m)&&(m=1);isNaN(l)&&(l=0);g={_token:$("#_token").val(),offerId:f,amount:g,page:l,currencyId:m};$.post(h,g,function(k,h,g){k.error?unsafeWindow.erepublik.exchange.throwError(k.message,$(a).parent().parent().find(".ex_citizen")):-1<navigator.userAgent.toLowerCase().indexOf("mozilla")?(alert("Offer bought"),window.location.reload()):(k.buy_mode&&$(".buy_mode").html(k.buy_mode),
k.essentials&&$(".essentials").html(k.essentials),unsafeWindow.updateAccounts(k.gold.value,k.ecash.value),k.hideOffer?unsafeWindow.handleSuccessMsg(!0,k.message):unsafeWindow.erepublik.exchange.throwSuccess(k.message,$("#purchase_"+f).parent().parent().find(".ex_citizen")),d(),b(),c())},"json")}function c(){$("button[id^=max_]").click(function(){var b=$(this),d=b.attr("id").split("_")[1],c=10<parseFloat(b.parent().parent().find(".ex_amount span").html())&&!1==isOrg?10:parseFloat(b.parent().parent().find(".ex_amount strong span").text()),
h=parseFloat($("#exchange_rate_"+d+" span").html()),m=c*h,l=parseFloat($("#eCash").val());m>l&&(c=l/h);a(b,d,c)});$("button[id^=all_]").click(function(){var b=$(this),d=b.attr("id").split("_")[1],c=10<parseFloat(b.parent().parent().find(".ex_amount strong span").text())&&!1==isOrg?10:parseFloat(b.parent().parent().find(".ex_amount strong span").text());a(b,d,c)})}function b(){$(".buy_mode .ex_buy").each(function(){var a=$(this);if(""!=a.html().trim()){var b=$("button",a).attr("id").split("_")[1];
a.append('<button type="button" id="max_'+b+'">Max</button>');a.append('<button type="button" id="all_'+b+'">All</button>');$("button",a).each(function(){var a=$(this);a.css("min-width","45px");a.css("padding-left","5px");a.css("padding-right","15px")});-1<navigator.userAgent.toLowerCase().indexOf("mozilla")&&$("button[id^=max_]",a).css("margin","0 4px")}})}function d(){$(".buy_mode .ex_amount").css("width","80px");$(".buy_mode .ex_amount").css("padding-right","50px");$(".buy_mode .ex_buy").css("width",
"310px")}unsafeWindow.erepublik.exchange.displayPrice=function(a){var b=parseFloat(a.val()),d=parseFloat(a.parent().find("button").data("max"));b>d&&a.val(d)};d();b();c();unsafeWindow.jQuery("body").ajaxComplete(function(a,f,g){0<g.url.indexOf("/economy/exchange/retrieve/")&&(d(),b(),c())})}
function ImproveInventory(){var a=parseInt($(".area.storage h4:first strong").text().replace(/,/g,"").split("/")[1].split(")")[0].trim()),c=parseInt($(".area.storage h4:first strong").text().replace(/,/g,"").split("/")[0].split("(")[1].trim());$(".area.storage h4:first strong").text("( "+coma(c)+"/"+coma(a)+" Free slots left: "+coma(a-c)+" )");GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/economy/exchange-market/",dataType:"html",onload:function(a){function d(){$("#inventory_overview #sell_offers table th input").css("width",
"50px");$("#inventory_overview #sell_offers table th.offers_product").css("width","70px");$("#inventory_overview #sell_offers table th.offers_price").css("width","120px");$("#inventory_overview #sell_offers table th.offers_quantity").css("width","80px");$("#inventory_overview #sell_offers table th.offers_market").css("width","60px");$("#inventory_overview #sell_offers table th.offers_action").css("width","132px");$("#inventory_overview #sell_offers table th.offers_action a").css("left","10px");$("#inventory_overview #sell_offers table th.offers_action a").css("margin-right",
"20px");$("#inventory_overview #sell_offers table .delete_offer").css("opacity","1")}a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");var c=parseFloat($(a).find(".ex_rate strong:eq(1) span:first").text());isNaN(c)&&(a=a.split("</thead>")[2],c=parseFloat(a.split("id='exchange_rate_")[1].split("</span>")[0].split("<span>")[1]));var f={createButton:function(a){if(1!=$("#visit_market",a).length){var b=$(".offer_flag",a).attr("src").split("/")[6]?
a.find(".offer_flag").attr("src").split("/")[6].split(".")[0]:a.find(".offer_flag").attr("src").split("/")[4].split(".")[0],c=$(".offer_image",a).attr("src").split("/")[6]?a.find(".offer_image").attr("src").split("/")[6]:a.find(".offer_image").attr("src").split("/")[4],e=$(".offer_image",a).attr("src").split("/")[7]?a.find(".offer_image").attr("src").split("/")[7].split("_")[0]:a.find(".offer_image").attr("src").split("/")[5].split("_")[0],e=-1!=e.indexOf("q")?e.replace("q",""):"1",f=$(".offer_amount",
a).text().replace(/,/g,""),h=$(".offer_price strong",a).text().replace(/,/g,""),g=$(a).attr("id").split("_")[1],l=$("#large_sidebar .sidebar_container .user_section .user_identity a").text();$(".delete_offer",a).before('<a title="Visit market" target="_blank" class="fluid_blue_dark_small" style="padding-left: 3px;" id="visit_market" href="http://www.erepublik.com/'+LANG+"/economy/market/"+country[b].id+"/"+c+"/"+e+'/citizen/0/price_asc/1"><span>M</span></a><a original-title="<b>Show offer on market</b><br>This only works for those who have installed <i>eRepublik Stuff</i> script <b>1.7.0</b> or newer." id="goto_offer" href="http://www.erepublik.com/'+
LANG+"/economy/market/"+country[b].id+"/"+c+"/"+e+"?customOffer=true&sellerId="+eRS.citizenId+"&sellerName="+l+"&offerId="+g+"&offerAmount="+f+"&offerPrice="+h+'" target="_blank" style="height: 23px; width: 23px; display: inline-block; margin-left: 10px;"><img src="http://i.imgur.com/esbZfTi.png"></a>');$("#goto_offer").tipsy({gravity:"s",html:!0});d()}},waitForOffer:function(a){1==$("#"+a).length?f.createButton($("#"+a)):setTimeout(function(){waitForOffer(a)},500)}},g={createHolder:function(a){if(!(0<
$("td.net_price",a).length)){var b=parseFloat($("td.offer_price strong",a).text())/c;$("td.offer_price",a).attr("style","text-align:right; padding-right: 20px;");$("td.offer_price",a).append('<br><strong style="text-align:right; font-size: 11px;">'+b.toFixed(2)+'</strong><font style="text-align:right; font-size: 11px"> GOLD</font>');$("td.offer_price",a).after('<td style="text-align:right; padding-left: 0px!important" class="offer_price net_price"></td>')}},createHeader:function(){var a=parseFloat($("#inventory_overview #sell_offers table th.offers_price #tax").text().split(" ")[0])/
c;$("#inventory_overview #sell_offers table th.offers_price small").append('<span id="taxGG"><br><div style="display:inline; margin-left: 49px;"></div><span id="taxG">'+a.toFixed(4)+" GOLD</span>");a=$("#inventory_overview #sell_offers table th.offers_price:not(.net_price):not(.total_net_price)").clone();a.addClass("net_price");a.css("width","75px");a.find("input").after('<span id="netPrice"></span>').remove();a.find("#sell_currency").after('<span id="netPriceG"></span><b id="sell_currency">GOLD</b>');
a.find("#converted").text("Net / unit");a.find("small").remove();$("#inventory_overview #sell_offers table th.offers_price").after(a);g.headerNetPrice();$("#sell_price,#sell_amount").keyup(function(){g.headerNetPrice()});$("#product_select,.sell_selector").click(function(){g.headerNetPrice()})},headerNetPrice:function(){$("#taxG").remove();var a=parseFloat($("#inventory_overview #sell_offers table th.offers_price #tax").text().split(" ")[0]),a=a/c;$("#inventory_overview #sell_offers table th.offers_price small").append('</span><span id="taxG">'+
a.toFixed(4)+" GOLD</span>");var b=img_country[$("#market_select img").attr("src").split("/")[6]?$("#market_select img").attr("src").split("/")[6].split(".")[0]:$("#market_select img").attr("src").split("/")[4].split(".")[0]].id,a=parseInt($("#product_select img").attr("src").split("/")[6]?$("#product_select img").attr("src").split("/")[6]:$("#product_select img").attr("src").split("/")[4]);price=parseFloat(""==$("#sell_price").val()?0:$("#sell_price").val());vat=parseFloat(unsafeWindow.countryList[b].taxes[a].value_added_tax);
importTax=parseFloat(unsafeWindow.countryList[b].taxes[a].import_tax);tax=vat;b!=unsafeWindow.citizenshipCountry&&(tax+=importTax);a=price/((100+tax)/100);b=a/c;$("#inventory_overview #sell_offers table #netPrice").text(a.toFixed(2));$("#inventory_overview #sell_offers table #netPriceG").text(b.toFixed(2));$("#inventory_overview #sell_offers table #netPriceG").css("font-size","11px");$("#inventory_overview #sell_offers table #sell_currency:last").css("font-size","11px");h.calculateSum()},netPrice:function(a){var b=
img_country[a.find(".offer_flag").attr("src").split("/")[6]?a.find(".offer_flag").attr("src").split("/")[6].split(".")[0]:a.find(".offer_flag").attr("src").split("/")[4].split(".")[0]].id,d=parseInt(a.find(".offer_image").attr("src").split("/")[6]?a.find(".offer_image").attr("src").split("/")[6]:a.find(".offer_image").attr("src").split("/")[4]);price=parseFloat($("td.offer_price:not(.net_price) strong",a).text().replace(",",""));vat=parseFloat(unsafeWindow.countryList[b].taxes[d].value_added_tax);
importTax=parseFloat(unsafeWindow.countryList[b].taxes[d].import_tax);tax=vat;b!=unsafeWindow.citizenshipCountry&&(tax+=importTax);b=price/((100+tax)/100);d=b/c;$("td.net_price",a).html("<strong>"+b.toFixed(2)+"</strong> "+$("#sell_currency").text()+"<br><strong style='text-align:right; font-size: 11px;'>"+d.toFixed(2)+"</strong><font style='text-align:right; font-size: 11px'> GOLD</font>");h.calculateSum()},waitForOffer:function(a){1==$("#"+a).length?(g.createHolder($("#"+a)),g.netPrice($("#"+a))):
setTimeout(function(){g.waitForOffer(a)},500)}},h={createRow:function(){$("#inventory_overview #sell_offers table").append('<tfoot><tr style="background: #F7FCFF; height: 44px;"><td colspan="4"><td class="offer_price total_net_price"><strong id="sumPrice"></strong> '+$("#sell_currency").text()+'<br><strong id="sumPriceG" style="font-size: 11px;"></strong><font style=\'font-size:11px;\'> GOLD</font></td><td colspan="2"></td></tr></tfoot>');h.calculateSum()},calculateSum:function(){$("#sumPrice").text("0.00");
$("#sumPriceG").text("0.00");$("#inventory_overview #sell_offers table tbody tr[id^=offer_]:visible").each(function(){var a=parseFloat($(".total_net_price strong",this).text()),a=parseFloat($("#sumPrice").text())+a;$("#sumPrice").text(a.toFixed(2));a/=c;$("#sumPriceG").text(a.toFixed(2))})},waitForOffer:function(a){1==$("#"+a).length?h.calculateSum():setTimeout(function(){h.waitForOffer(a)},500)},waitToDissapear:function(a){0==$("#"+a+":visible").length?h.calculateSum():setTimeout(function(){h.waitToDissapear(a)},
500)}},m={createHeader:function(){var a=$("#inventory_overview #sell_offers table th.offers_price:not(.net_price):not(.total_net_price)").clone();a.addClass("total_net_price");a.css("width","100px");a.find("input").after('<span id="totalNetPrice"></span>').remove();a.find("#sell_currency").after('<span id="totalNetPriceG"></span><b id="sell_currency">GOLD</b>');a.find("#converted").text("Total Net Value");a.find("small").remove();$("#inventory_overview #sell_offers table th.offers_price").eq(1).after(a);
m.headerTotalNetPrice();$("#sell_price,#sell_amount").keyup(function(){m.headerTotalNetPrice()});$("#product_select,.sell_selector").click(function(){m.headerTotalNetPrice()})},headerTotalNetPrice:function(){var a=parseFloat($("#netPrice").text()),b=isNaN(parseInt($("#sell_amount").val()))?0:parseInt($("#sell_amount").val()),a=a*b;$("#totalNetPrice").text(a.toFixed(2));a/=c;$("#totalNetPriceG").text(a.toFixed(2));$("#totalNetPriceG").css("font-size","11px");$("#totalNetPriceG").next().css("font-size",
"11px")},createHolder:function(a){0<$("td.total_net_price",a).length||$("td.net_price",a).after('<td class="offer_price total_net_price"></td>')},totalNetPrice:function(a){var b=parseFloat($("td.net_price strong",a).text()),d=parseInt($(".offer_amount",a).text().replace(",","")),b=b*d,d=b/c;$("td.total_net_price",a).html("<strong>"+b.toFixed(2)+"</strong> "+$("#sell_currency").text()+"<br><strong style='font-size: 11px;'>"+d.toFixed(2)+"</strong><font style='font-size: 11px;'> GOLD</font>");h.calculateSum()},
waitForOffer:function(a){1==$("#"+a).length?(m.createHolder($("#"+a)),m.totalNetPrice($("#"+a))):setTimeout(function(){m.waitForOffer(a)},500)}},l={createTable:function(){$("#sell_offers").after('<div class="taxTable" style="display: block;"><table width="100%"><thead><tr><th style="height: 40px; text-align: center; padding-left: 0px;"> </th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/1/default.png" title="Food"></th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/2/default.png" title="Weapons"></th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/3/default.png" title="Tickets"></th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/5/default.png" title="Hospital"></th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/6/default.png" title="Defence Systems"></th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/7/default.png" title="Food raw materials"></th><th style="height: 40px; text-align: center; padding-left: 0px;"><img width="35px" height="35px" src="http://www.erepublik.com/images/icons/industry/12/default.png" title="Weapons raw materials"></th></tr></thead><tbody></tbody></table></div>');
l.populateTable();$("#inventory_overview .taxTable table tbody td").each(function(){var a=$(this).width();$(".taxLinkHolder",this).width(a-4)})},populateTable:function(){$("#market_licenses_select .ml_repeat li").each(function(){function a(b,d,c){return'<a href="http://www.erepublik.com/'+LANG+"/economy/market/"+b+"/"+d+"/"+c+'/citizen/0/price_asc/1" target="_blank"><div class="taxLinkItem">Q'+c+"</div></a>"}var b=img_country[$(this).find("img").attr("src").split("/")[6].split(".")[0]].id,d={1:parseFloat(unsafeWindow.countryList[b].taxes["1"].value_added_tax),
2:parseFloat(unsafeWindow.countryList[b].taxes["2"].value_added_tax),3:parseFloat(unsafeWindow.countryList[b].taxes["3"].value_added_tax),5:parseFloat(unsafeWindow.countryList[b].taxes["5"].value_added_tax),6:parseFloat(unsafeWindow.countryList[b].taxes["6"].value_added_tax),7:parseFloat(unsafeWindow.countryList[b].taxes["7"].value_added_tax),12:parseFloat(unsafeWindow.countryList[b].taxes["12"].value_added_tax)};b!=unsafeWindow.citizenshipCountry&&(d["1"]+=parseFloat(unsafeWindow.countryList[b].taxes["1"].import_tax),
d["2"]+=parseFloat(unsafeWindow.countryList[b].taxes["2"].import_tax),d["3"]+=parseFloat(unsafeWindow.countryList[b].taxes["3"].import_tax),d["5"]+=parseFloat(unsafeWindow.countryList[b].taxes["5"].import_tax),d["6"]+=parseFloat(unsafeWindow.countryList[b].taxes["6"].import_tax),d["7"]+=parseFloat(unsafeWindow.countryList[b].taxes["7"].import_tax),d["12"]+=parseFloat(unsafeWindow.countryList[b].taxes["12"].import_tax));$("#inventory_overview .taxTable table tbody").append('<tr><td style="padding-left: 5px;"><img style="vertical-align: top;" src="'+
$("img",this).attr("src")+'"> '+$("img",this).attr("alt")+'</td><td class="taxLink" style="text-align: center; padding-left: 0px;"><div class="taxLinkHolder"><div class="taxLinkItemTransparent"> </div>'+a(b,1,1)+a(b,1,2)+a(b,1,3)+a(b,1,4)+a(b,1,5)+a(b,1,6)+a(b,1,7)+"</div><span>"+d["1"]+'%</span></td><td class="taxLink" style="text-align: center; padding-left: 0px;"><div class="taxLinkHolder"><div class="taxLinkItemTransparent"> </div>'+a(b,2,1)+a(b,2,2)+a(b,2,3)+a(b,2,4)+a(b,2,5)+a(b,2,6)+a(b,2,
7)+"</div><span>"+d["2"]+'%</span></td><td class="taxLink" style="text-align: center; padding-left: 0px;"><div class="taxLinkHolder"><div class="taxLinkItemTransparent"> </div>'+a(b,3,1)+a(b,3,2)+a(b,3,3)+a(b,3,4)+a(b,3,5)+"</div><span>"+d["3"]+'%</span></td><td class="taxLink" style="text-align: center; padding-left: 0px;"><div class="taxLinkHolder"><div class="taxLinkItemTransparent"> </div>'+a(b,5,1)+a(b,5,2)+a(b,5,3)+a(b,5,4)+a(b,5,5)+"</div><span>"+d["5"]+'%</span></td><td class="taxLink" style="text-align: center; padding-left: 0px;"><div class="taxLinkHolder"><div class="taxLinkItemTransparent"> </div>'+
a(b,6,1)+a(b,6,2)+a(b,6,3)+a(b,6,4)+a(b,6,5)+"</div><span>"+d["6"]+'%</span></td><td class="taxLink" style="text-align: center; padding-left: 0px;"><a href="http://www.erepublik.com/'+LANG+"/economy/market/"+b+'/7/1/citizen/0/price_asc/1" target="_blank">'+d["7"]+'%</a></td><td class="taxLink" style="text-align: center; padding-left: 0px;"><a href="http://www.erepublik.com/'+LANG+"/economy/market/"+b+'/12/1/citizen/0/price_asc/1" target="_blank">'+d["12"]+"%</a></td></tr>")})}};$("#sell_offers tr[id^=offer_]").each(function(){var a=
$(this);f.createButton(a);g.createHolder(a);g.netPrice(a);m.createHolder(a);m.totalNetPrice(a)});d();g.createHeader();m.createHeader();h.createRow();l.createTable();unsafeWindow.jQuery("body").ajaxComplete(function(a,b,d){0<d.url.indexOf("/economy/postMarketOffer")?(a=$.parseJSON(b.responseText),a=$(a.html).attr("id"),f.waitForOffer(a),g.waitForOffer(a),m.waitForOffer(a),h.waitForOffer(a)):0<d.url.indexOf("/economy/deleteMarketOffer")&&(a=$.parseJSON(b.responseText),a=a.token.offerId,h.waitToDissapear("offer_"+
a))})}})}function PreventScroll(){options.preventSidebarScroll&&$(window).bind("scroll",function(){$("#large_sidebar").hasClass("fixed")&&($("#large_sidebar").removeClass("fixed"),$("#large_sidebar").attr("style",""),$("#large_sidebar").next().hide())})}
function DrawLogo(){(function(){var a='<div id="options_popup" style="display: none"><div class="wrapper"><img src="http://i.imgur.com/pCgzpvJ.png" id="close_popup" /><img src="http://img818.imageshack.us/img818/4537/iconze.png" class="logo" /><span class="versionHolder">v'+eRS.version+'</span><h1 style="margin:0 auto; float:none; margin-top: 20px;">Settings</h1><table style="margin-top: 30px; margin-bottom: 10px; "><tbody><tr><td><table><tr><td class="setTitle"><div>Profile settings</div></td></tr><tr><td class="rowO">Improve profile page <input type="checkbox" id="improveProfilePage" /></td></tr><tr><td class="rowO">Remove dead friends <input type="checkbox" id="removeDead" /></td></tr><tr><td class="rowL">Remove multiple friends <input type="checkbox" id="removeMore" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Campaign settings</div></td></tr><tr><td class="rowO">Mark natural enemy<input type="checkbox" id="showNE" /></td></tr><tr><td class="rowO">Show campaigns walls and combat orders<input type="checkbox" id="campaignPoints" /></td></tr><tr><td class="rowO">Show mercenary points<input type="checkbox" id="mercenaryPoints" /></td></tr><tr><td class="rowL">Check for allies battles in all battles<input type="checkbox" id="checkAllies" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Battlefield settings</div></td></tr><tr><td class="rowO">Improve Battlefield <input type="checkbox" id="improveBattlefield" /></td></tr><tr><td class="rowO">Enable AutoBot<input type="checkbox" id="autoBot" /></td></tr><tr><td class="rowO">Show TP damage<input type="checkbox" id="TPmedal" /></td></tr><tr><td class="rowO">Build booster, rocket or bazooka from battle<input type="checkbox" id="boostBattle" /></td></tr><tr><td class="rowL">Show mercenary kills on each side<input type="checkbox" id="mercBT" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Main page settings</div></td></tr><tr><td class="rowO">Shout and share posts on walls<input type="checkbox" id="reShout" /></td></tr><tr><td class="rowO">Filter posts from guerrilla info<input type="checkbox" id="filterGuerrilla" /></td></tr><tr><td class="rowO">Filter posts from medals info<input type="checkbox" id="filterMedals" /></td></tr><tr><td class="rowL">Latest and international news categories<input type="checkbox" id="newNews" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Donation settings</div></td></tr><tr><td class="rowO">Remember donation quantity<input type="checkbox" id="rememberDonation" /></td></tr><tr><td class="rowL">Donate from everywhere<input type="checkbox" id="showDonate" /></td></tr></table></td><td><table><tr><td class="setTitle"><div>Inventory settings</div></td></tr><tr><td class="rowO">Display taxes in countries with licence <input type="checkbox" id="improveInventory" /></td></tr><tr><td class="rowO">Display storage inventory<input type="checkbox" id="showStorageInv" /><br><table style="margin: 0px; padding: 0px;"><tr><td><input type="radio" name="VerHor" value="1">Vertical<br><input type="radio" name="VerHor" value="2">Horizontal</td><td><input type="radio" name="AllStock" value="1">All<br><input type="radio" name="AllStock" value="2">Stock</td></tr></table></td></tr><tr><td class="rowO">Display damage calculator<input type="checkbox" id="damageCalculator" /></td></tr><tr><td class="rowO">Display real lowest market price<input type="checkbox" id="getItemPrice" /></td></tr><tr><td class="rowL">Display rocket pack price<input type="checkbox" id="cheaperPack" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Monetary market settings</div></td></tr><tr><td class="rowO">Improve monetary market <input type="checkbox" id="improveExchangeMarket" /></td></tr><tr><td class="rowL">Search my offer <input type="checkbox" id="findOffer" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Marketplace settings</div></td></tr><tr><td class="rowO">Improve Market <input type="checkbox" id="improveMarket" /></td></tr><tr><td class="rowO">Product quick links<input type="checkbox" id="quickMarket" /></td></tr><tr><td class="rowO">Price comparator<input type="checkbox" id="showPriceCompare" /></td></tr><tr><td class="rowL">Display cost per use<input type="checkbox" id="showProfitability" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Messaging settings</div></td></tr><tr><td class="rowO">Improve message system<input type="checkbox" id="improveMessages" /></td></tr><tr><td class="rowO">Save last message<input type="checkbox" id="betterIgm" /></td></tr><tr><td class="rowL">Show recepients in inbox<input type="checkbox" id="showRec" /></td></tr></table></td><td><table><tr><td class="setTitle"><div>Common settings</div></td></tr><tr><td class="rowO">EXP for the next level <input type="checkbox" id="newLevelAlerter" /></td></tr><tr><td class="rowO">Show spare change<input type="checkbox" id="spareG" /></td></tr><tr><td class="rowO">Prevent sidebar scroll <input type="checkbox" id="preventSidebarScroll" /></td></tr><tr><td class="rowO">Auto energy recoverer [Home page only]<input type="checkbox" id="autoEnergyRecover" /></td></tr><tr><td class="rowO">Show max energy recover<input type="checkbox" id="maxEnergy" /></td></tr><tr><td class="rowO">Kills, damage and hits on sidebar<input type="checkbox" id="noKillsDamage" /></td></tr><tr><td class="rowO">Improve My Places link<input type="checkbox" id="myPlaces" /></td></tr><tr><td class="rowO">Remove external link warning <input type="checkbox" id="removeExternalLinkWarn" /></td></tr><tr><td class="rowO">Show my MM offers on sidebar <input type="checkbox" id="showOffers" /></td></tr><tr><td class="rowO">Display storage info <input type="checkbox" id="storageCapacity" /></td></tr><tr><td class="rowO">Custom link manager<input type="checkbox" id="customLinks" /></td></tr><tr><td class="rowO">Quick access for DO change<input type="checkbox" id="doQuickAccess" /></td></tr><tr><td class="rowL">Show my IP<input type="checkbox" id="myIP" /></td></tr><tr><td></td></tr><tr><td class="setTitle"><div>Company settings</div></td></tr><tr><td class="rowO">Company Manager <input type="checkbox" id="companyManager" /></td></tr><tr><td class="rowO">Select multiple employees to fire <input type="checkbox" id="fireSelected" /></td></tr><tr><td class="rowO">Change salary for all <input type="checkbox" id="changeSalaryAll" /></td></tr><tr><td class="rowO">Sort employees by salary <input type="checkbox" id="sortWages" /></td></tr><tr><td class="rowL">Display profit calculator<input type="checkbox" id="profitCalculator" /></td></tr></table></td></tr></tbody><table></table><div style="padding: 5px 0; border-top: 1px solid #AAA;"><div style="float: right;"><div>Energy to recover (minimal ammount of energy to recover)</div><div><input type="text" id="energyStorage" /></div><div style="font-size: 10px;">Input 0 to eat whe full energy is available.</div></div><div style="float: left;"><div>Set refresh time for campaign page</div><div><input type="text" id="timeRefresh" /></div><div style="font-size: 10px;">Recomended value is 120 or greater. 0 to disable</div></div></div><div style="clear:both"></div><div class="note"><span>Note: this changes will take effect after page reload.</span></div><div class="note"><div class="donateT"><table><tr><td><a href="http://userscripts.org:8080/scripts/show/156586" target="_blank">Visit HomePage</a></td><td><a href="http://erepstuff.idea.informer.com/" target="_blank">Report a bug</a></td><td><a href="http://www.erepublik.com/en/citizen/profile/5303040" target="_blank">Donate / Contact</a></td></tr></table></div></div></div></div>';
$("body").append(a);for(i in options)"VerHor"!=i&&"AllStock"!=i?0<$("input#"+i+"[type=checkbox]").length&&$("#"+i).prop("checked",options[i]):$("input[name="+i+"][type=radio][value="+options[i]+"]").prop("checked",!0);$("#energyStorage").val(options.energyStorage);$("#timeRefresh").val(options.timeRefresh);$("#options_popup input").change(function(){var a=$(this);"checkbox"==a.attr("type")?options[a.attr("id")]=a.prop("checked"):"text"==a.attr("type")?options[a.attr("id")]=parseInt(a.val()):"radio"==
a.attr("type")&&(options[a.attr("name")]=parseInt($("input:radio[name="+a.attr("name")+"]:checked").val()));GM_setValue(eRS.citizenId+".eRS_options",JSON.stringify(options))})})();$(".user_finances").after('<div id="eRS_logo_holder" style="display: none;"><strong class="version_holder eRS_details">v'+eRS.version+"</strong></div>");setTimeout(function(){$("#eRS_logo_holder").slideDown("slow")},500);$("#eRS_logo_holder").click(function(){var a=$("#options_popup").height(),c=$(window).height(),b="50px";
c>a&&(b=Math.round((c-a)/2)+"px");a=($(window).width()-900)/2+$(window).scrollLeft()+"px";$.blockUI({message:$("#options_popup"),overlayCSS:{opacity:.5,backgroundColor:"white",zIndex:99999},css:{position:"absolute",border:"none",width:"900px",height:"auto",top:b,left:a,backgroundColor:"transparent",zIndex:1E5}})});$("#options_popup #close_popup").click($.unblockUI)}
function ClearOldStuff(){var a=parseInt(date)-5;GM_deleteValue(eRS.citizenId+".killsToday"+a);GM_deleteValue(eRS.citizenId+".damageToday"+a);GM_deleteValue(eRS.citizenId+".hitsToday"+a)}
function CheckForUpdate(){GM_xmlhttpRequest({method:"GET",url:meta_link,onload:function(a){a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");var c=a.indexOf("@version")+8,b=a.indexOf("\n",c);a=a.substring(c,b).trim();c=parseInt(a.replace(/\./g,""));parseInt(eRS.version.replace(/\./g,""))<c&&($("#eRS_newVersion_alert").remove(),$("#header").after('<div id="eRS_newVersion_alert"></div>'),$("#eRS_newVersion_alert").append("<div style='clear:both; text-align: center;'><span>New version of eRepStuff+ is out. Update it <a href=\""+
script_link+'">here</a>. [Version '+a+"]</span></div>"))}})}
function RemoveExternalLinkWarn(){function a(){$('a[href*="/main/warn/"]').each(function(){var a=$(this);$.get($(this).attr("href"),function(b){b=$("#content .content a",b).attr("href");$(a).attr("href",b)})})}unsafeWindow.jQuery("body").ajaxComplete(function(c,b,d){(0<d.url.indexOf("/main/wall-comment/retrieve/")||0<d.url.indexOf("/main/party-comment/retrieve/")||0<d.url.indexOf("/main/party-post/")||0<d.url.indexOf("/main/group-wall/retrieve/")||0<d.url.indexOf("/main/group-wall/older/")||0<d.url.indexOf("/main/messages-compose/")||
0<d.url.indexOf("/main/messages-read/"))&&setTimeout(function(){a()},500)});a()}
function NewLevelAlerter(){function a(){var a=$("#experienceTooltip"),b=parseInt(a.find("strong:eq(1)").text()),a=parseInt(a.find("strong:eq(2)").text())-b;$(".exp_remain").text(a)}GM_addStyle(".exp_next_level{ font-size: 11px; color: #5A5A5A; text-shadow: 0 1px 0 rgba(255, 255, 255, 0.9); } .exp_remain{ display: inline; font-weight: bold;}");$(".user_level").after('<div class="exp_next_level">EXP remain: <div class="exp_remain"></div></div>');$("#experienceTooltip").bind("DOMNodeInserted",function(){a()});
a()}
function CompanyManager(){function a(a,b){var d=$(a),c=d.parent().parent();if($(".area").hasClass("disable_controls")||c.hasClass("disabled"))return!1;d.hasClass("active")&&!b?d.removeClass("active"):b&&d.addClass("active");unsafeWindow.checkHealth();setTimeout(function(){unsafeWindow.calculateProduction(c)},50)}function c(a,b){if($(".area").hasClass("disable_controls"))return!1;var d=$(a);if(d.hasClass("worked"))return!1;var c=parseInt(d.attr("employee")),e=d.parent().parent().parent();b?b&&($(".employee_works",
e).removeClass("active"),5<c&&$(".no5",e).addClass("active"),d.addClass("active")):(d=$(".employee_works.row_two.active",e),$(".employee_works",e).removeClass("active"),d.length&&5==c&&$(".no5",e).addClass("active"));var f=0;$.each($(".employee_works.active"),function(a,b){var d=$(b).parent().parent().parent().attr("id").split("_")[1];company=unsafeWindow.getCompany(d);d=parseInt($(b).attr("employee"));d=5<d?d-5:d-company.todays_works;f+=d});f>unsafeWindow.pageDetails.total_works?($("#preset_works").parent().attr("title",
unsafeWindow.pageDetails.employee_warn),$("#preset_works").parent().parent().addClass("critical")):($("#preset_works").parent().attr("title",unsafeWindow.pageDetails.employee_tooltip),$("#preset_works").parent().parent().removeClass("critical"));$("#preset_works").html(f);setTimeout(function(){unsafeWindow.calculateProduction(e)},50)}function b(a,b){$(".subMenu").hide();var c;c='<div id="'+b+'" class="area_controls" style=" width: 100%; "><strong title="Select Companies">Select Companies</strong><div style="margin-top: 8px;">';
var e="",f="";if("factories"==a){for(var n=1;8>n;n++)1==n?e="left_pos":7==n?(f='style="margin-right: 10px;"',e="right_pos"):e="mid",c+='<a href="javascript:;" class="grey_plastic '+e+'" '+f+' title="Work in food factory Q'+n+'" name="factory_food_'+n+'"><img src="http://s3.www.erepublik.net/images/modules/myland/buildings/food_q'+n+'.png" style=" height: 18px; "></a>';for(n=1;8>n;n++)e=1==n?"left_pos":7==n?"right_pos":"mid",c+='<a href="javascript:;" class="grey_plastic '+e+'" title="Work in weapons factory Q'+
n+'" name="factory_weapons_'+n+'"><img src="http://s3.www.erepublik.net/images/modules/myland/buildings/weapons_q'+n+'.png" style=" height: 18px; "></a>'}else if("raws"==a){for(var p=["grain","fruits","fish","cattle","deer"],s=["iron","oil","aluminum","saltpeter","rubber"],q="managerWork"==b?1:3,n=q;6>n;n++)n==q?e="left_pos":5==n?(f='style="margin-right: 10px;"',e="right_pos"):e="mid",c+='<a href="javascript:;" class="grey_plastic '+e+'" '+f+' title="Work in food raw factory Q'+n+'" name="food_raw_'+
p[n-1]+'"><img src="http://s3.www.erepublik.net/images/modules/myland/buildings/'+p[n-1]+'.png" style=" height: 18px; "></a>';for(n=q;6>n;n++)e=n==q?"left_pos":5==n?"right_pos":"mid",c+='<a href="javascript:;" class="grey_plastic '+e+'" title="Work in weapons raw factory Q'+n+'" name="weps_raw_'+s[n-1]+'"><img src="http://s3.www.erepublik.net/images/modules/myland/buildings/'+s[n-1]+'.png" style=" height: 18px; "></a>'}$(".subMenu").html(c+"</div></div>");$("#managerWork a").unbind("click");$("#employeesWork a").unbind("click");
d();$(".subMenu").show(300)}function d(){function d(a){var b=parseInt(a.attr("class").split(" ")[1].replace("allow","")),g=a.find(".worked").length,p=b-g;e+p>f&&(p=f-e,b=g+p);a=$("a",a).eq(b-1);e+=p;c(a,!0)}$("#managerWork a").click(function(){if(!$(this).hasClass("disabled")){var d=$(this).attr("name");if("factories"==d||"raws"==d)$("#managerWork a").removeClass("active"),$("#employeesWork a").removeClass("active"),$(this).addClass("active"),b(d,"managerWork");else if("all"==d){var c=prompt("Number of companies:",
""),e=0;$("#managerWork a").removeClass("active");$("#employeesWork a").removeClass("active");$(this).addClass("active");$("div[id*=company_]").each(function(){if(e<=c){var b=$(".area_options.c3 a",this);a(b,!0);e++}})}else if("clear"==d)$("#managerWork a").removeClass("active"),$("#employeesWork a").removeClass("active"),$(this).addClass("active"),$("div[id*=company_]").each(function(){var b=$(".area_options.c3 a",this);a(b,!1)});else{var f="Number of food companies:",e=0,h,g=2,m=".upgradeable";
if(-1!=d.indexOf("factory_food_"))h="food_q"+d.split("_")[2];else if(-1!=d.indexOf("factory_weapons_"))f="Number of weapon companies:",h="weapons_q"+d.split("_")[2];else if(-1!=d.indexOf("food_raw_")||-1!=d.indexOf("weps_raw_"))f="Number of raw companies:",h=d.split("_")[2],g=1,m=":not(.upgradeable)";c=prompt(f,"");$("div[id*=company_]"+m).each(function(){if(-1!=$("img:eq("+g+")",this).attr("src").indexOf(h)&&e<c){var b=$(".area_options.c3 a",this);a(b,!0);e++}})}}});var e=0,f;$("#employeesWork a").click(function(){if(!$(this).hasClass("disabled")){var a=
$(this).attr("name");if("factories"==a||"raws"==a)$("#managerWork a").removeClass("active"),$("#employeesWork a").removeClass("active"),$(this).addClass("active"),b(a,"employeesWork");else if("all"==a)f=prompt("Number of workers:",""),e=0,$("#managerWork a").removeClass("active"),$("#employeesWork a").removeClass("active"),$(this).addClass("active"),$(".employees_selector").each(function(){e<f&&d($(this))});else if("clear"==a)$("#managerWork a").removeClass("active"),$("#employeesWork a").removeClass("active"),
$(this).addClass("active"),$(".employees_selector").each(function(){var a=$(this).find("a.active:last");c(a,!1)});else if(f=prompt("Number of workers:",""),0<parseInt(f)){e=0;var k=".upgradeable",n=2,p;if(-1!=a.indexOf("factory_food_"))p="food_q"+a.split("_")[2];else if(-1!=a.indexOf("factory_weapons_"))p="weapons_q"+a.split("_")[2];else if(-1!=a.indexOf("food_raw_")||-1!=a.indexOf("weps_raw_"))p=a.split("_")[2],k=":not(.upgradeable)",n=1;$("div[id*=company_]"+k+" .employees_selector").each(function(){-1!=
$("img:eq("+n+")",$(this).parent().parent()).attr("src").indexOf(p)&&e<f&&d($(this))})}}})}$(".manager_dashboard .listing_holder .heading").css("border-radius","0");$(".manager_dashboard .listing_holder .heading").css("-moz-border-radius","0");$(".manager_dashboard .listing_holder .heading").before('<div class="heading"><div id="managerWork" class="area_controls" style=" width: 351px; "><strong title="Manage Companies">Manage Companies</strong><div style=\'margin-top: 8px;\'><a href="javascript:;" class="grey_plastic left_pos" title="Factories" name="factories"><img src="http://i.imgur.com/E31EmfP.png" style=" height: 18px; "></a><a href="javascript:;" class="grey_plastic mid" title="Raw Companies" name="raws"><img src="http://i.imgur.com/m5CSZqW.png" style=" height: 18px; "></a><a href="javascript:;" class="grey_plastic mid" title="All Companies" name="all"><img src="http://i.imgur.com/ldXbxin.png" style=" height: 18px; "></a><a href="javascript:;" class="grey_plastic right_pos" title="Clear All Companies" name="clear"><img src="http://i.imgur.com/EP5p2PWs.jpg" style=" height: 18px; "></a></div></div><div id="employeesWork" class="area_controls" style=" width: 351px; "><strong title="Manage Employees">Manage Employees</strong><div style=\'margin-top: 8px;\'><a href="javascript:;" class="grey_plastic left_pos" title="Factories" name="factories"><img src="http://i.imgur.com/E31EmfP.png" style=" height: 18px; "></a><a href="javascript:;" class="grey_plastic mid" title="Raw Companies" name="raws"><img src="http://i.imgur.com/m5CSZqW.png" style=" height: 18px; "></a><a href="javascript:;" class="grey_plastic mid" title="All Companies" name="all"><img src="http://i.imgur.com/ldXbxin.png" style=" height: 18px; "></a><a href="javascript:;" class="grey_plastic right_pos" title="Clear All Companies" name="clear"><img src="http://i.imgur.com/EP5p2PWs.jpg" style=" height: 18px; "></a></div></div></div><div class="heading subMenu" style="width: 100%; display:none;"></div>');
var e=0,f=0,e=0;d();parseInt($(".employees_available strong").text().split("/")[1].trim());e=$("div[id*=company_]:not(.disabled)").length;0==e?$("#managerWork div a").addClass("disabled"):(e=$("div[id*=company_].upgradeable:not(.disabled)").length,f=$("div[id*=company_]:not(.upgradeable):not(.disabled)").length,0==e&&$("#managerWork div a[name=factories]").addClass("disabled"),0==f&&$("#managerWork div a[name=raw]").addClass("disabled"));$("#managerWork a, #employeesWork a").tipsy({gravity:"s"})}
function hitsNeeded(){var a=unsafeWindow.SERVER_DATA.division,c=0,b=!1,d=0,e=unsafeWindow.SERVER_DATA.level,f=parseInt($("#total_damage strong").first().text().replace(/,/g,"")),g=parseInt($(".player.left_side #fighter_skill").text().replace(/,/g,"")),h=$(".rank_icon").html().split("/")[6].split(".")[0];switch($(".player.left_side .listing span").last().html().split("/")[5].split(".")[0]){case "weapon_q0":d=0;break;case "weapon_q1":d=20;break;case "weapon_q2":d=40;break;case "weapon_q3":d=60;break;
case "weapon_q4":d=80;break;case "weapon_q5":d=100;break;case "weapon_q6":d=120;break;case "weapon_q7":d=200;break;case "weapon_q10":d=1E4;break;case "weapon_q10_special":d=1E4*(a+1)}!0==bonusNE&&(c=1);0<$(".booster_timer").length&&(b=!0);a=1E4>d?calcInflu(g,img_rank[h],d,c,e,b):d;Hitsdamage==f?f=0:(f=Math.ceil((Hitsdamage-f)/a),f+=1);if(0>=f||"NaN"==f)f="You are in the lead.";$(".tipsy.tipsy-s").remove();$("#hitsBH").remove();$("#pvp_actions").after('<div id="hitsBH" original-title="Hits needed to become Battle Hero using current weapon"><small>Hits for BH medal: </small><strong>'+
f+"</strong></div>");$("#hitsBH").tipsy({gravity:"s"})}
function Battlefield(){function a(){$("#left_top5").remove();$("#right_top5").remove();$("#campaign_left_top5").remove();$("#pvp_battle_area").append('<div id="left_top5" class="top5_list" title="'+$("#pvp_header .country.left_side h3").text()+' top 5 fighters"><table><thead><tr><th width="80">Citizen</th><th width="30">Kills</th><th width="90">Influence</th></tr></thead><tbody><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr></tbody><tfoot><tr><td>Sum</td><td class="kills"></td><td class="influence"></td></tr></tfoot></table></div>');$("#pvp_battle_area").append('<div id="right_top5" class="top5_list" title="'+
$("#pvp_header .country.right_side h3").text()+' top 5 fighters"><table><thead><tr><th width="80">Citizen</th><th width="30">Kills</th><th width="90">Influence</th></tr></thead><tbody><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr></tbody><tfoot><tr><td>Sum</td><td class="kills"></td><td class="influence"></td></tr></tfoot></table></div>');
$("#pvp_battle_area").append('<div id="campaign_left_top5" class="top5_list" title="'+$("#pvp_header .country.left_side h3").text()+' Campaign top 5 fighters"><table><thead><tr><th width="80">Citizen</th><th width="30">Kills</th><th width="90">Influence</th></tr></thead><tbody><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr><tr><td class="nick"></td><td class="kills"></td><td class="influence"></td></tr></tbody><tfoot><tr><td>Sum</td><td class="kills"></td><td class="influence"></td></tr></tfoot></table></div>');
$("#left_top5").tipsy({gravity:"s"});$("#right_top5").tipsy({gravity:"s"});$("#campaign_left_top5").tipsy({gravity:"n"})}function c(a){a=a.toString(10);for(var b=1,d=a.length;0<d;d--)0==b%3&&1!=d&&(a=a.substr(0,d-1)+"."+a.substr(d-1,a.length-(d-1))),b++;return a}function b(a){var d=LANG;$.getJSON("/"+d+"/military/battle-stats/"+unsafeWindow.SERVER_DATA.battleId,function(e){var l=img_country[$(".country.left_side a img").attr("src").split("/")[6].split(".")[0]].id,k=img_country[$(".country.right_side a img").attr("src").split("/")[6].split(".")[0]].id;
try{var n=parseInt($("#zone_select option[value=current]").text().split(" ")[1]);isNaN(n)&&(n=parseInt($("#zone_select option[value=current]").text().split(" ")[0]));var p=e.stats.current[n][f][l],s=e.stats.current[n][f][k],q=e.stats.overall[0][l],u=k=0;Hitsdamage=e.stats.current[n][unsafeWindow.SERVER_DATA.division][l][0].damage;hitsNeeded();for(i in p){var r=p[i],k=k+parseInt(r.kills),u=u+parseInt(r.damage),v=$("#left_top5 tbody tr").eq(i);v.find(".nick").html('<a href="/'+d+"/citizen/profile/"+
r.citizen_id+'" target="_blank">'+e.fightersData[r.citizen_id].name+"</a>");v.find(".kills").text(r.kills);v.find(".influence").text(c(r.damage))}$("#left_top5 tfoot tr td.kills").text(k);$("#left_top5 tfoot tr td.influence").text(c(u));u=k=0;for(i in s)r=s[i],k+=parseInt(r.kills),u+=parseInt(r.damage),v=$("#right_top5 tbody tr").eq(i),v.find(".nick").html('<a href="/'+d+"/citizen/profile/"+r.citizen_id+'" target="_blank">'+e.fightersData[r.citizen_id].name+"</a>"),v.find(".kills").text(r.kills),
v.find(".influence").text(c(r.damage));$("#right_top5 tfoot tr td.kills").text(k);$("#right_top5 tfoot tr td.influence").text(c(u));u=k=0;for(i in q)r=q[i],k+=parseInt(r.kills),u+=parseInt(r.damage),v=$("#campaign_left_top5 tbody tr").eq(i),v.find(".nick").html('<a href="/'+d+"/citizen/profile/"+r.citizen_id+'" target="_blank">'+e.fightersData[r.citizen_id].name+"</a>"),v.find(".kills").text(r.kills),v.find(".influence").text(c(r.damage));$("#campaign_left_top5 tfoot tr td.kills").text(k);$("#campaign_left_top5 tfoot tr td.influence").text(c(u))}catch(x){}a&&
setTimeout(function(){b(!0)},15E3)})}function d(a){var b=parseInt($("#fighter_skill").text().replace(/,/g,"").trim()),c=parseInt($("#enemy_skill").text().replace(/,/g,"").trim()),e=$("#scroller .listing span:last img").attr("src").split("_")[1].split(".")[0];if("q10"==e||"q11"==e)b=1;else var e=weapon[e],f=weapon[$("#enemy_weapon").attr("src").split("_")[1].split(".")[0]],b=(60+(b-c)/10)*(1+(e-f)/400)/2,c=parseFloat(void 0==$("#enemy_life").attr("original-title")?$("#enemy_life").attr("title").split(":")[1].trim():
$("#enemy_life").attr("original-title").split(":")[1].trim()),b=Math.round(c/b+.5);if(a)return b;$("#eRS_hitsHolder strong").text(b);setTimeout(function(){d(!1)},100)}function e(){$("#notify_link").is(":visible")&&location.reload(!0);setTimeout(function(){e()},1E3)}var f=unsafeWindow.SERVER_DATA.division;options.showNE&&NaturalEnemy(2);clearInterval(unsafeWindow.globalSleepInterval);unsafeWindow.shootLockout=1;0<$(".addon").length&&($(".addon").css("cssText","position: absolute; right: 570px; background: rgba(0,0,0,0.5); -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; padding: 0px; top: -129px;"),
$(".weapon.selector").attr("style","top:15px"));$("#pvp_header .country").css("top","10px");$("#pvp_header h2").css("top","2px");$(".campaign_toggler").css("margin-top","8px");$("#pvp_header .battle_hero").css("top","106px");$("#pvp_header").css("height","100px");$("#pvp_battle_area").css("margin-top","0");$(".damage_aligner").css("top","313px");$("#pvp_battle_area .player").css("margin-top","190px");$("#pvp_battle_area .player.left_side").css("margin-left","15px");$("#pvp_battle_area .player.right_side").css("margin-right",
"15px");$("#change_weapon").css("z-index","1");$("#blue_domination, #red_domination").css("opacity","0");$("#attackerHero").index()<$("#defenderHero").index()?($("#defenderHero strong:last").css({position:"absolute",minWidth:"45px",right:"0"}),$("#attackerHero strong:last").css({position:"absolute",minWidth:"45px",left:"0"})):($("#defenderHero strong:last").css({position:"absolute",minWidth:"45px",left:"0"}),$("#attackerHero strong:last").css({position:"absolute",minWidth:"45px",right:"0"}));(function(){function a(){$.getJSON("/en/military/battle-stats/"+
unsafeWindow.SERVER_DATA.battleId,function(d){b(d);setTimeout(function(){a()},15E3)})}function b(a){a=a.division.domination[unsafeWindow.SERVER_DATA.division];unsafeWindow.SERVER_DATA.mustInvert?(c.text(a.toFixed(2)+"%"),d.text((100-a).toFixed(2)+"%")):(d.text(a.toFixed(2)+"%"),c.text((100-a).toFixed(2)+"%"));$("#blue_domination_f").css("opacity","0").animate({opacity:"1"},"fast");$("#red_domination_f").css("opacity","0").animate({opacity:"1"},"fast")}$(".domibar").prepend('<strong id="blue_domination_f" class="left_side"></strong><strong id="red_domination_f" class="right_side"></strong>');
var d=$("#blue_domination_f"),c=$("#red_domination_f");unsafeWindow.jQuery("body").ajaxComplete(function(a,d,c){0<c.url.indexOf("/military/battle-stats/")&&(a=$.parseJSON(d.responseText),b(a))});a()})();$("#pvp .campaign_details .entry em").css("opacity","1");$("#pvp .campaign_details .entry .pdomi_left em").css("right","5px");$("#pvp .campaign_details .entry .pdomi_right em").css("left","5px");a();b(!0);$("#pvp_battle_area").append('<a href="javascript:;" id="top5_refresh" original-title="Click to refresh top5 lists"><strong>Refresh Lists</strong></a>');
GM_addStyle(".eRSDiviSelect .styled {background-color: transparent;color: #4B5E6B;height: 28px;vertical-align: middle;width: 147px;}.eRSDiviSelect select.styled {opacity: 0;position: absolute;z-index: 11;}");GM_addStyle(".eRSDiviSelect .select {position:absolute; background-image: url(http://www.erepublik.com/images/modules/sidebar/new_sidebar_buttons_wide.png);background-position: 0 -150px;background-repeat: no-repeat;color: white; text-shadow: rgba(0, 0, 0, 0.2) 0 -1px 0; font-size: 11px;font-weight: bold;height: 25px;text-align: center; padding-top: 5px; -moz-box-sizing: border-box; box-sizing: border-box; z-index: 10;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.2);width: 147px;}");
$("#pvp_battle_area").append('<div style="position:absolute; top: 170px; left: 384px;" class="eRSDiviSelect"><span class="select" id="select" style="background-position: 0px -175px;">Division '+f+'</span><select class="styled" id="diviselect"><option value="1">Division 1</option><option value="2">Division 2</option><option value="3">Division 3</option><option value="4">Division 4</option></select></div>');$(".eRSDiviSelect select").hover(function(){$(".eRSDiviSelect .select").css("background-position",
"0 -175px")},function(){$(".eRSDiviSelect .select").css("background-position","0 -150px")});$("#diviselect").val(f);$("#top5_refresh").click(function(){b(!1)});$("#diviselect").change(function(){f=$(this).val();$(".eRSDiviSelect span").text("Division "+f);a();b(!1)});$("#pvp_battle_area .player.right_side").append('<div id="eRS_hitsHolder"><div>Hits</div><strong></strong></div>');d(!1);e()}
function EnergyRecoverer(){function a(){var d=parseInt($(".tooltip_health_limit").text()),e=unsafeWindow.globalNS.userInfo.wellness,f=unsafeWindow.reset_health_to_recover;d>=(0<options.energyStorage?options.energyStorage:f)&&e<f?$("#DailyConsumtionTrigger").hasClass("energy")||$j("#DailyConsumtionTrigger").hasClass("disabled")||$("#DailyConsumtionTrigger").hasClass("buy")?(b.text("No food to eat."),c.removeClass("energy").addClass("disabled")):($("#DailyConsumtionTrigger").addClass("load"),d="http://www.erepublik.com/"+
LANG,d+="/main/eat?format=json&_token="+$("#a69925ed4a6ac8d4b191ead1ab58e853").val(),0!==$("#fightSessionKey").length&&(d+="&fightSessionKey="+$("#fightSessionKey").val()),d+="&buttonColor=",d=$("#DailyConsumtionTrigger").hasClass("energy")?d+"orange":d+"blue",$j.getJSON(d+"&jsoncallback=?",{},function(b){unsafeWindow.energy.processResponse(b);$j("#DailyConsumtionTrigger").removeClass("load");setTimeout(a,1500)})):e==f?(b.text("No need to eat."),c.removeClass("energy").addClass("disabled")):setTimeout(a,
1500)}var c=$("#DailyConsumtionTrigger").clone(),b=c.find("#foodText");c.attr("class","eat_food_wide energy");c.removeAttr("id");c.find("q span:eq(0)").remove();c.find("q div").css("padding","0px");b.text("Auto Eating");c.attr("title","I eat when you have full helth available.");$(".user_health").after(c);setTimeout(a,1500)}
function CustomOffer(){if(0>=$(".success_message").length&&0>=$(".error_message").length){var a=window.location.href.split("?")[1];if("undefined"!=typeof a){var c="true"==a.split("customOffer=")[1].split("&")[0]?!0:!1,b=parseInt(a.split("sellerId=")[1].split("&")[0]),d=decodeURI(a.split("sellerName=")[1].split("&")[0]),e=parseInt(a.split("offerId=")[1].split("&")[0]),f=parseInt(a.split("offerAmount=")[1].split("&")[0]),a=a.split("offerPrice=")[1];!c||isNaN(b)||isNaN(f)||isNaN(a)||($("#marketplace table tbody tr:not(:first)").remove(),
$("#marketplace .pager").remove(),$("#marketplace table").block({message:'<img src="http://i.imgur.com/s2MVaql.gif">',overlayCSS:{zIndex:11,opacity:.9,backgroundColor:"white"},css:{zIndex:12,border:"none",backgroundColor:"transparent"}}),c=$("#marketplace table tbody tr:first"),$(".m_product",c).attr("id","productId_"+e),$(".m_provider a",c).attr("href","/en/citizen/profile/"+b),$(".m_provider a",c).text(d),$(".m_stock",c).text(f),$(".m_price strong:first",c).text(a.split(".")[0]),b=$(".m_price sup strong",
c),$(".m_price sup",c).html("."+a.split(".")[1]+" "+b[0].outerHTML),$(".m_quantity input",c).attr("id","amount_"+e),$(".m_quantity input",c).attr("maxlength","6"),$(".m_buy a",c).attr("id",e),$(".m_buy a",c).attr("data-max",f),$(".m_buy a",c).attr("data-price",a),$("#marketplace table").unblock())}}}
function MarketButtons(){function a(d){if(d){var c=parseInt($("#productId_"+d).parent().find(".m_stock").text().trim().replace(/,/g,"")),f=parseInt($("#large_sidebar .user_finances .currency_amount strong").text().trim().replace(/,/g,"")),g=parseFloat($("#productId_"+d).parent().find(".m_price strong:first").text().trim()+""+$("#productId_"+d).parent().find(".m_price sup:first").html().split("<strong>")[0].trim()),f=Math.round(f/g-.5);f>c&&(f=c);f>b&&(f=b);$("#offerId").val(d);$("#amount").val(f);
$("#buyOffer").submit()}else setTimeout(function(){a(d)},100)}function c(){$(".buyOffer").each(function(){var b=$(this),c=parseInt(b.attr("id")),f=b.clone();f.attr("title","Buy as much as you can");f.removeClass("buyOffer");f.find("span").css("padding-left","10px");f.find("span").css("margin-right","10px");f.find("span").text("Max");f.click(function(){a(c)});var g=b.clone();g.css("margin-left","3px");g.attr("title","Buy all products");g.removeClass("buyOffer");g.find("span").css("padding-left","15px");
g.find("span").css("margin-right","15px");g.find("span").text("All");g.click(function(){var a=parseInt($("#productId_"+c).parent().find(".m_stock").text().trim().replace(/,/g,""));$("#offerId").val(c);$("#amount").val(a);$("#buyOffer").submit()});b.css("margin-bottom","3px");b.find("span").css("padding-left","35px");b.find("span").css("margin-right","35px");b.after(g).after(f);b.after("<br>");$(".f_light_blue_big").css({"float":"none",padding:"4px 0px"});$(".f_light_blue_big span").css("float","none")})}
unsafeWindow.erepublik.marketplace.displayPrice=function(a){var b=parseFloat(a.val()),c=a.parent().parent().next().find(".buyOffer");(b>parseFloat(c.data("max"))&&(a.val(parseFloat(c.data("max"))),b=parseFloat(a.val())),1<b)?(a=c.data("i18n")+" "+unsafeWindow.erepublik.marketplace.formatNumber((b*Math.floor(100*parseFloat(c.data("price")))/100).toFixed(2))+" "+c.data("currency"),c.find("span").text(a)):c.find("span").text(c.attr("title"))};var b=0;GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+
("undefined"==typeof LANG?"en":LANG)+"/economy/inventory",dataType:"text/html",onload:function(a){a=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");var e=$(".area.storage strong:first",a);a=parseInt(e.text().split("/")[1].replace(/,/g,"").replace(")","").trim());e=parseInt(e.text().split("/")[0].replace(/,/g,"").replace("(","").trim());b=a-e;c()}})}
function ShowMercenary(){var a=$('img[alt="mercenary"]').parent();a.find(".country_list li small").css("cursor","default");a.find(".country_list li small").css("color","#666");a.find(".country_list li img").css("opacity","1");a.find(".country_list li em").each(function(){var a=parseInt($(this).text().split("/")[0].trim());25==a?$(this).css("opacity","1"):20<=a?$(this).css("opacity","0.8"):10<=a?$(this).css("opacity","0.7"):0<a?$(this).css("opacity","0.6"):0==a&&$(this).css("opacity","0.5")});a.find(".country_list").before('<ul class="country_list legend"><li><em style="opacity:0.5;">0</em></li><li><em style="opacity:0.6;">1-9</em></li><li><em  style="opacity:0.7;">11-19</em></li><li><em  style="opacity:0.8;">21-24</em></li><li><em  style="opacity:1;">25</em></li></ul>')}
function calcInflu(a,c,b,d,e,f){a=Math.round(10*(1+a/400)*(1+c/5)*(1+b/100));d&&(a+=Math.floor(.1*a));f&&(a+=Math.floor(.5*a));100<e&&(a+=Math.floor(.1*a));return Math.floor(a)}
function InfluenceCalculator(){function a(){for(var a=parseInt($(".citizen_military").eq(0).find(".stat small strong").text().split("/")[0].trim().replace(",","")),b=parseInt($(".citizen_military").eq(1).find(".stat small strong").text().split("/")[0].trim().replace(/,/g,"")),f=parseInt($(".citizen_military").eq(1).find(".stat small strong").text().split("/")[1].trim().replace(/,/g,"")),g=$(".citizen_military").eq(1).find("h4 img").attr("src").split("/")[6].split(".")[0],h=parseInt($("#content .citizen_status .citizen_experience .citizen_level").eq(0).text()),
m=parseInt(""==$("#InfCalc_hits").val()?1:$("#InfCalc_hits").val()),l=$("#InfCalc_NE").is(":checked"),k=$("#InfCalc_BO").is(":checked"),b=10*(f-b),a={q0:calcInflu(a,img_rank[g],0,l,h,k),q1:calcInflu(a,img_rank[g],20,l,h,k),q2:calcInflu(a,img_rank[g],40,l,h,k),q3:calcInflu(a,img_rank[g],60,l,h,k),q4:calcInflu(a,img_rank[g],80,l,h,k),q5:calcInflu(a,img_rank[g],100,l,h,k),q6:calcInflu(a,img_rank[g],120,l,h,k),q7:calcInflu(a,img_rank[g],200,l,h,k)},g={q0:Math.ceil(b/a.q0),q1:Math.ceil(b/a.q1),q2:Math.ceil(b/
a.q2),q3:Math.ceil(b/a.q3),q4:Math.ceil(b/a.q4),q5:Math.ceil(b/a.q5),q6:Math.ceil(b/a.q6),q7:Math.ceil(b/a.q7)},h=0;8>h;h++)$("#InfCalc_Q"+h+" span").html("<br>Dmg: "+c(m*a["q"+h])+"<br>Need: "+g["q"+h]+"<br>Days: "+Math.ceil(g["q"+h]/m)+"")}function c(a){a=a.toString(10);for(var b=1,c=a.length;0<c;c--)0==b%3&&1!=c&&(a=a.substr(0,c-1)+"."+a.substr(c-1,a.length-(c-1))),b++;return a}$("#eRS_SSCalc").after('<h3>Influence Calculator</h3><div id="eRS_InfCalc" class="citizen_military"></div>');$("#eRS_InfCalc").append('<div style="margin: 0 15px; line-height: 44px; color: #666; font-size: 11px;"><span>Hits <input type="text" id="InfCalc_hits" /></span><span>Natural Enemy <input type="checkbox" id="InfCalc_NE" /></span><span style="margin-left: 15px;">50% bonus <input type="checkbox" id="InfCalc_BO" /></span></div><table style="width: 100%; margin-left: 15px;"><tr><td id="InfCalc_Q0"><img src="http://www.erepublik.com/images/icons/industry/2/q1.png" style="opacity: 0.5;"><span></span></td><td id="InfCalc_Q1"><img src="http://www.erepublik.com/images/icons/industry/2/q1.png"><span></span></td><td id="InfCalc_Q2"><img src="http://www.erepublik.com/images/icons/industry/2/q2.png"><span></span></td><td id="InfCalc_Q3"><img src="http://www.erepublik.com/images/icons/industry/2/q3.png"><span></span></td></tr><tr><td id="InfCalc_Q4"><img src="http://www.erepublik.com/images/icons/industry/2/q4.png"><span></span></td><td id="InfCalc_Q5"><img src="http://www.erepublik.com/images/icons/industry/2/q5.png"><span></span></td><td id="InfCalc_Q6"><img src="http://www.erepublik.com/images/icons/industry/2/q6.png"><span></span></td><td id="InfCalc_Q7"><img src="http://www.erepublik.com/images/icons/industry/2/q7.png"><span></span></td></tr></table>');
var b=1;(function(){var a=GM_getValue(eRS.citizenId+".eRS_Hits");"undefined"!=typeof a&&(b=JSON.parse(a))})();$("#InfCalc_hits").val(b);a();$("#InfCalc_hits").keyup(function(){b=$(this).val();GM_setValue(eRS.citizenId+".eRS_Hits",JSON.stringify(b));a()});$("#InfCalc_NE").change(a);$("#InfCalc_BO").change(a)}
function FullImage(){var a=$(".citizen_avatar").css("background-image"),a=a.substring(a.indexOf("http://")).split("_")[0]+".jpg";$(".citizen_avatar").wrap('<a href="'+a+'" target="_blank"></a>')}
function SuperSoldierCalculator(){function a(){GM_setValue(eRS.citizenId+".ssValues",JSON.stringify(b))}function c(){var a=$(".citizen_military").eq(0).find(".stat small strong").text(),c=parseInt(a.split("/")[0].trim().replace(",","")),f=parseInt(a.split("/")[1].trim().replace(",","")),g={weights:5,climbing:2.5,shooting:5,specialForces:10},h={weights:0,climbing:.19,shooting:.89,specialForces:1.79},a={"1.0":0,"0.5":25,"0.1":53},g=b.weights*g.weights+b.climbing*g.climbing+b.shooting*g.shooting+b.specialForces*
g.specialForces+(b.bonus?1.8:0),c=Math.round((f-c)/g+.5),f=Math.round(250/g+.5);$("#ssDaysLeft").html("Next Super Soldier medal in "+c+" day"+(1<c?"s":"")+"<br>Super Soldier medal every "+f+" day"+(1<f?"s":""));c=Math.ceil(250/g);h=(0<b.climbing?h.climbing:0)+(0<b.shooting?h.shooting:0)+(0<b.specialForces?h.specialForces:0);void 0!=b.contract&&(h=parseFloat(b.contract)*h+a[b.contract]/30);h=(5-c*h)/c;$("#ssDailyCost").html("Daily strength gain: "+g+" strength points<br>Daily training gold gain/loss "+
h.toFixed(3)+" GOLD");$("#ssDailyCost").attr("original-title","GOLD you will gain or lose advancing 250 strength points using selected training grounds");$("#ssDailyCost").tipsy({gravity:"n"})}$("div.citizen_content .citizen_military").eq(1).next().after('<h3>Super Soldier Calculator</h3><div id="eRS_SSCalc" class="citizen_military"></div>');$("#eRS_SSCalc").append('<table><tr><td><div id="ssWeights"><strong>Weights Room</strong><select name="weights"><option value="1" selected="selected">Q1</option><option value="2">Q2</option><option value="3">Q3</option><option value="4">Q4</option></select></div></td><td><div id="ssClimbing"><strong>Climbing Center</strong><select name="climbing"><option value="0" selected="selected">Q0</option><option value="1">Q1</option><option value="2">Q2</option><option value="3">Q3</option><option value="4">Q4</option></select></div></td><td><div id="ssBonus"><strong>Daily Bonus</strong><input type="checkbox" name="bonus" /></div></td></tr><tr><td><div id="ssShooting"><strong>Shooting Range</strong><select name="shooting"><option value="0" selected="selected">Q0</option><option value="1">Q1</option><option value="2">Q2</option><option value="3">Q3</option><option value="4">Q4</option></select></div></td><td><div id="ssSpecialForces"><strong>Special Forces Center</strong><select name="specialForces"><option value="0" selected="selected">Q0</option><option value="1">Q1</option><option value="2">Q2</option><option value="3">Q3</option><option value="4">Q4</option></select></div></td><td><div id="ssContract"><strong>Contract</strong><select name="contract" style="width: 60px;"><option value="1.0" selected="selected">NO</option><option value="0.5">50%</option><option value="0.1">90%</option></select></div></td></tr></table><table style="width: 100%;"><tr style="text-align: center;"><td><strong id="ssDaysLeft"></strong></td><td><strong id="ssDailyCost"></strong></td></tr></table>');
var b={weights:"1",climbing:"0",shooting:"0",specialForces:"0",bonus:!1,contract:"1.0"};(function(){var a=GM_getValue(eRS.citizenId+".ssValues");"undefined"!=typeof a&&(a=JSON.parse(a));"undefined"!=typeof a&&a&&(b=a)})();$("#ssWeights select").val(b.weights);$("#ssClimbing select").val(b.climbing);$("#ssShooting select").val(b.shooting);$("#ssSpecialForces select").val(b.specialForces);$("#ssBonus input").attr("checked",b.bonus);$("#ssContract select").val(b.contract);c();$("#ssWeights select, #ssClimbing select, #ssShooting select, #ssSpecialForces select, #ssContract select").change(function(){b[$(this).attr("name")]=
$(this).val();a();c()});$("#ssBonus input").change(function(){b[$(this).attr("name")]=$(this).is(":checked");a();c()})}function GetDivision(a){return 35>a?1:50>a?2:70>a?3:4}
function AddStyles(){GM_addStyle("#eRS_logo_holder { background-image: url(http://i.imgur.com/ZgHEFuv.png); width: 153px; background-repeat: no-repeat; height: 70px; float: left; border-radius: 4px; -moz-border-radius: 4px; margin-bottom: 7px; cursor: pointer; }");GM_addStyle("#eRS_logo_holder:hover { background-image: url("+t+"); }");GM_addStyle("#eRS_logo_holder .eRS_details { font-size: 10px; color: #3C8FA7; margin: 3px; }");GM_addStyle("#eRS_logo_holder .version_holder { float: left; }");GM_addStyle("#eRS_logo_holder .options { float: right; }");
GM_addStyle(".donateT table tr td{padding: 10px; font-weight: bold; line-height: 5px; width: 153px; text-align: center;}");GM_addStyle(".donateT table tr td a:hover{text-decoration: underline!important;}");GM_addStyle(".campaign_points { float: left; font-weight: bold; line-height: 23px; color: #5A8931; background-image: none; background-color: #E0EDD4; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; margin: 10px 0; width: 24px; text-align: center; } ");GM_addStyle(".cod_points { background-image: none; background-color: #F5DF99; color: #8A560C; } ");
GM_addStyle(".battle_mercenary { cursor: default; width: 53px; text-align: center; float: right; margin: 10px 5px; line-height: 23px; background-image: none; background-color: #E0EDD4; padding: 0 5px; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; font-weight: bold; color: #5A8931; border: 1px outset white; } ");GM_addStyle(".cod_mercenary { background-color: #F5DF99; color: #8A560C; } ");GM_addStyle(".battle_mercenary span, .cod_mercenary span { padding: 0 2px; } ");GM_addStyle(".battle_mercenary .merc, .cod_mercenary .merc { color: #DD0000; } ");
GM_addStyle(".battle_mercenary .half, .cod_mercenary .half { color: #FF6600; } ");GM_addStyle("#battle_listing li .tank_img { margin: 16px 5px 0 5px; } ");GM_addStyle("#eRS_SSCalc div strong { float: none; } ");GM_addStyle('#eRS_SSCalc div select { text-align: left; width: 50px; margin-left: 6px; height: 24px; padding-left: 4px; background: url("/images/parts/shadow.gif") repeat-x scroll center top white; border-color: #AEAEAE #C8C8C8 #E3E3E3; border-radius: 3px 3px 3px 3px; border-style: solid; border-width: 1px; color: #333; padding: 4px; font-size: 10px; } ');
GM_addStyle("#eRS_SSCalc div input, #eRS_InfCalc #InfCalc_BO,#eRS_SSCalc div input, #eRS_InfCalc #InfCalc_NE { vertical-align: middle; margin-left: 5px; } ");GM_addStyle("#eRS_SSCalc #ssDaysLeft, #eRS_SSCalc #ssDailyCost { float: none; font-size: 11px; margin: 0; line-height: 24px; } ");GM_addStyle('#eRS_InfCalc #InfCalc_hits { background: url("/images/parts/shadow.gif") repeat-x scroll center top white; border-color: #AEAEAE #C8C8C8 #E3E3E3; border-radius: 3px 3px 3px 3px; border-style: solid; border-width: 1px; color: #333; padding: 4px; text-align: center; width: 35px; font-size: 10px; margin: 0 20px 0 5px; } ');
GM_addStyle("#eRS_InfCalc table td { width: 25%; } ");GM_addStyle("#eRS_InfCalc table td span { width: 44px; font-size: 11px; color: #666; margin-left: 10px; } ");GM_addStyle("#eRS_InfCalc table img { width: 30px; vertical-align: middle; } ");GM_addStyle("#options_popup, #options_popup_bot { background-color: whiteSmoke; background-image: url(http://i.imgur.com/lcJ3sjN.png); background-repeat: no-repeat; background-size: 100% 100%; }");GM_addStyle("#eStuff_options a, #options_popup_bot a { background-color: white; height: 20px; line-height: 20px; color: #88AEBE; float: left; font-size: 10px; white-space: nowrap; position: relative; z-index: 99999; padding: 0px 5px;}");
GM_addStyle("#options_popup .wrapper, #options_popup_bot .wrapper { background-color: rgba(255, 255, 255, 0.7); border-radius: 5px; box-shadow: 0px 0px 10px 2px rgba(0, 0, 0, 0.6); padding: 10px; cursor: default; }");GM_addStyle("#options_popup #close_popup { position: absolute; top: -20px; right: -20px; cursor: pointer; }");GM_addStyle("#options_popup .logo { position: absolute; top: 5px; left: 20px; width: 100px; height: 77px; }");GM_addStyle("#options_popup .versionHolder { position: absolute; top: 25px; right: 30px; font-weight: bold; font-size: 11px; padding: 5px; border-radius: 5px; -moz-border-radius: 5px; background: #6FBED8; color: white; background-position: left -457px; text-shadow: 0 -1px 0 #60A9C1; }");
GM_addStyle("#options_popup h1, #options_popup_bot h1 { color: #3C8FA7; text-shadow: 0px 1px 1px black; }");GM_addStyle("#options_popup input[type=text], #options_popup_bot input[type=text]{ text-align: center; width: 50px; }");GM_addStyle("#options_popup table .setTitle{border-bottom:1px solid #6FBED8; padding: 0px;}");GM_addStyle("#options_popup table .setTitle div{text-align:center; font-weight: bold; font-size: 12px; border-radius: 90px 0px 0px 0px; -moz-border-radius: 90px 0px 0px 0px; background: #6FBED8;  color: #FFFFFF; text-shadow: 0 1px 0 #95C6D9; }");
GM_addStyle("#options_popup table .rowO{ padding-left: 9px; border-left:1px solid #6FBED8; border-right:1px solid #6FBED8; }");GM_addStyle("#options_popup table .rowL{margin-bottom: 5px; padding-left: 9px; border-bottom:1px solid #6FBED8; border-left:1px solid #6FBED8; border-right:1px solid #6FBED8; }");GM_addStyle("#options_popup table, #options_popup_bot table { width: 100%; text-align: left; }");GM_addStyle("#options_popup table td, #options_popup_bot table td { padding: 3px 3px; vertical-align: top;}");
GM_addStyle("#options_popup table td input, #options_popup_bot table td input { vertical-align: top; float: right; margin-right: 10px; }");GM_addStyle('#eRS_wdurability { font-size: 50px; font-weight: normal; line-height: 50px; font-family: "FranchiseRegular",Impact; color: #4397D3; z-index: 1; position: absolute; right: 0; text-shadow: rgba(0, 0, 0, 0.5) 0 1px 1px,rgba(67, 151, 212, 0.5) 0 0 10px; }');GM_addStyle("#hitsBH { clear: both; left: 10px; bottom: 10px; cursor: default; display: block; height: 25px; position: absolute; width: auto;}");
GM_addStyle('#hitsBH small {background-image: url("http://www.erepublik.com/images/modules/pvp/influence_left.png?1333974834"); background-position: left center; color: #FFFFFF; display: block; float: left; font-size: 11px; font-weight: bold; height: 25px; line-height: 25px; opacity: 0.7; padding: 0 5px; text-shadow: 0 1px 1px #333333;}');GM_addStyle('#hitsBH:hover small{opacity:1;-moz-opacity:1;-ms-fiter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}');GM_addStyle('#hitsBH strong {background-image: url("http://www.erepublik.com/images/modules/pvp/influence_right.png?1333974834"); background-position: right center; color: #FFFFFF; display: block; float: left; font-size: 12px; height: 25px; line-height: 25px; padding: 0 5px; text-shadow: 0 1px 0 #014471;} ');
GM_addStyle(".top5_list { position: absolute; top: 170px; padding: 5px; border-radius: 5px; -moz-border-radius: 5px; -o-border-radius: 5px; width: 200px; background-image: url(http://i.imgur.com/pCgzpvJ.png); box-shadow: 0 0 10px black; color: white; cursor: default; z-index: 9; }");GM_addStyle("#pvp.halloween_style .ghost1, #pvp.halloween_style .ghost2 { z-index: 8; }");GM_addStyle("#left_top5 { left: 15px; }");GM_addStyle("#right_top5 { right: 15px; }");GM_addStyle("#campaign_left_top5 { left: 275px; top: 200px; }");
GM_addStyle(".top5_list thead th, .top5_list tfoot { text-align: center; color: #91CC17; font-weight: bold; }");GM_addStyle(".top5_list thead th{ color: #91CC17; }");GM_addStyle(".top5_list tfoot { color: red; }");GM_addStyle(".top5_list .influence, .top5_list .kills { text-align: right; }");GM_addStyle(".top5_list .nick { white-space: nowrap; }");GM_addStyle("#top5_refresh { position: absolute; top: 170px; left: 230px; width: 147px; height: 25px; color: white; text-shadow: rgba(0, 0, 0, 0.2) 0 -1px 0; font-weight: bold; padding-top: 5px; font-size: 11px; text-align: center; background-image: url('/images/modules/sidebar/new_sidebar_buttons_wide.png?1347546442'); background-repeat: no-repeat; background-position: 0 -75px; -moz-box-sizing: border-box; box-sizing: border-box; z-index: 10; }");
GM_addStyle("#top5_refresh q { width: auto; margin: 0 auto; display: inline-block; }");GM_addStyle("#top5_refresh:hover { background-position: 0 -100px; }");GM_addStyle("#top5_refresh:active { background-position: 0 -125px; }");GM_addStyle(".note {padding-top: 10px; border-top: 1px solid #AAA; }");GM_addStyle(".energy_recover_holder { padding: 5px 0; border-top: 1px solid #AAA; }");GM_addStyle(".mercenary_points_holder { padding: 5px 0; border-top: 1px solid #AAA; }");GM_addStyle("#eRS_newVersion_alert { padding: 5px 0; width: auto; }");
GM_addStyle("#eRS_newVersion_alert div { border: 1px solid #888; padding: 10px; border-radius: 5px; line-height: 20px; background: none repeat scroll 0 0 rgba(17, 17, 17, 0.9);  font-weight: bold }");GM_addStyle('#eRS_newVersion_alert span { font-family: "FranchiseRegular",Impact; font-size: 36px; color: #F95555; text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5), 0 0 30px rgba(249, 85, 85, 0.5); display: block; }');GM_addStyle("#eRS_hitsHolder { position: absolute; text-align: center; width: 40px; border-radius: 7px 0px 0px 7px; -moz-border-radius: 7px 0px 0px 7px; -o-border-radius: 7px 0px 0px 7px; padding: 5px 0px 5px 5px; top: 12px; left: -43px; background-image: url(http://i.imgur.com/pCgzpvJ.png); }");
GM_addStyle("#eRS_hitsHolder div { font-weight: bold; color: white; }");GM_addStyle("#eRS_hitsHolder strong { line-height: 13px; text-shadow: 0 -1px 0 #6E9C08; text-align: center; height: 16px; font-size: 11px; display: inline; padding: 0 4px 0 4px; background-color: #83B70B; border-radius: 3px; -moz-border-radius: 3px; -o-border-radius: 3px; color: white; }");GM_addStyle("#autoFightHolder { width: 758px; clear: both; position: relative; top: 10px; text-align: center; background: #E9F5FA; border-radius: 7px; -moz-border-radius: 7px; padding: 1px 0; border: 1px solid #C4E6F2; color: #3C8FA7; }");
GM_addStyle("#autoFightHolder div { width: 510px; margin: 5px auto; height: 24px; }");GM_addStyle("#autoFightHolder div span { line-height: 22px; margin: 0 5px; }");GM_addStyle('#autoFightHolder div input[type=text] { background: url("/images/parts/shadow.gif") repeat-x scroll center top white; border-color: #AEAEAE #C8C8C8 #E3E3E3; border-radius: 3px 3px 3px 3px; border-style: solid; border-width: 1px; color: #333; padding: 4px; text-align: center; width: 35px; font-size: 10px; float: left; }');
GM_addStyle("#autoFightHolder div a { width: 130px; height: 23px; text-align: center; text-transform: uppercase; font-weight: bold; color: white; text-shadow: #AB2E2E 0px -1px 0px; background-image: url('/images/modules/pvp/fight_button.png?1333974834'); background-position: 0 0; background-size: 100% 400%; display: block; float: left; line-height: 22px; margin: 0 5px; }");GM_addStyle("#autoFightHolder div a:hover { background-position: 0 -23px; text-shadow: #CC5E3D 0px -1px 0px; }");GM_addStyle("#autoFightHolder div a:active { padding-top: 1px; height: 22px; background-position: 0 -46px; color: #FF9D9D; }");
GM_addStyle("#autoFightHolder div input[type=checkbox] { vertical-align: middle; }");GM_addStyle("#autoFightHolder .fightsHolder { position: absolute; top: 10px; left: 10px; width: 70px; height: 46px; margin: 0; background: white; border-radius: 7px; -moz-border-radius: 7px; }");GM_addStyle("#autoFightHolder .fightsHolder span { display: block; }");GM_addStyle("#autoFightHolder .fightsHolder strong { line-height: 22px; }");GM_addStyle("#achievment .hinter .legend { float: none; position: absolute; top: 30px; right: 10px; width: auto; padding: 0; background: none; border: none; margin: 0; box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none; }");
GM_addStyle("#achievment .hinter .country_list em { opacity: 1; position: static; float: left; }");GM_addStyle("#battle_listing .rw_supporter { width: 333px; height: 46px; background-color: #FFF0C0; border-top: 1px solid #FFDC5D; float: left; }");GM_addStyle("#battle_listing .rw_supporter a { float: right;  height: 34px;  margin-top: 6px;  margin-right: 6px;  background-image: url('/images/modules/homepage/fight_button.png?1333974833'); background-repeat: no-repeat; background-position: left -102px; }");
GM_addStyle("#battle_listing .rw_supporter a:hover { background-position: left -136px; }");GM_addStyle("#battle_listing .rw_supporter a:active { background-position: left -170px; }");GM_addStyle("#battle_listing .rw_supporter a span { float: left;  margin-left: 27px;  padding-right: 27px;  font-weight: bold;  color: white;  font-size: 12px;  padding-top: 6px;  cursor: pointer;    height: 28px;  background-image: url('/images/modules/homepage/fight_button.png?1333974833'); background-repeat: no-repeat; background-position: right -102px;  text-shadow: #A63301 0px -1px 0px; }");
GM_addStyle("#battle_listing .rw_supporter a:hover span { background-position: right -136px; }");GM_addStyle("#battle_listing .rw_supporter a:active span { color: #F49E9E; background-position: right -170px; padding-top: 7px; height: 27px; }");GM_addStyle("#inventory_overview #sell_offers table th span#netPriceG,#inventory_overview #sell_offers table th span#netPrice, #inventory_overview #sell_offers table th span#totalNetPriceG,#inventory_overview #sell_offers table th span#totalNetPrice { float: left; height: 14px; clear: both; padding: 8px 0px; padding-left: 5px; color: #88AFC9;  font-size: 12px;  font-weight: bold; }");
GM_addStyle("#inventory_overview #sell_offers table td.total_net_price { text-align: right; padding-right: 25px; padding-left: 0; }");GM_addStyle("#inventory_overview .taxTable { background-color: #BAE7F9; float: left; width: 730px; position: relative; -moz-border-radius: 5px; -webkit-border-radius: 5px;border-radius: 5px; margin-top: 11px; margin-left: 15px; }");GM_addStyle("#inventory_overview .taxTable table { width: 718px; border: 1px solid #95D4ED; background: white; margin: 5px auto; }");GM_addStyle("#inventory_overview .taxTable table th { background: #F7FCFF; }");
GM_addStyle("#inventory_overview .taxTable table tbody td { border-top: 1px solid #E2F3F9; color: #5E5E5E; padding: 5px 0 5px 25px; }");GM_addStyle("#inventory_overview .taxTable table tbody tr:hover td { background-color: #FFFFE7; }");GM_addStyle("#inventory_overview .taxTable table .taxLink { cursor: point; }");GM_addStyle("#inventory_overview .taxTable table .taxLink .taxLinkHolder { border: 2px solid #CFEFFB; border-radius: 3px; -moz-border-radius: 3px; position: absolute; margin-top: -7px; display: none; z-index: 100; }");
GM_addStyle("#inventory_overview .taxTable table .taxLink:hover .taxLinkHolder { display: block; }");GM_addStyle("#inventory_overview .taxTable table .taxLink .taxLinkHolder .taxLinkItemTransparent { background: none repeat scroll 0 0 transparent; text-align: center; height: 25px; }");GM_addStyle("#inventory_overview .taxTable table .taxLink .taxLinkHolder .taxLinkItem { background-color: #FFFFE7; text-align: center; }");GM_addStyle("#inventory_overview .taxTable table .taxLink .taxLinkHolder .taxLinkItem:hover { background-color: #F7FCFF !important; }");
GM_addStyle("#battle_listing .natural_sign { z-index: 9; position: absolute; top: 12px; }#battle_listing .natural_sign.one { left: 22px; }#battle_listing .natural_sign.two { left: 120px; }#battle_listing.full_width .natural_sign.two { left: 14px; }");GM_addStyle(".tipsy-inner,.tipsy {max-width: 400px!important;}")}
function ShowDivPoints(a,c,b,d,e,f,g,h,m,l,k,n,p,s,q,u,r,v,x,A,w,y,B,C,z,H,I,J){l=GetDivision(parseInt($(".user_level b").text()));var D,E,F;switch(l){case 1:cll='class="myDivision"';break;case 2:D='class="myDivision"';break;case 3:E='class="myDivision"';break;case 4:F='class="myDivision"'}if(0==a.find(".tank_img").length){a.find("small").after('<div class="tank_img"></div>');a.find("small").remove();var G=a.find("strong:last").text().split(" ");a.find("strong:last").css("margin-top",""+Math.ceil(15/
G.length)+"px");a.find("strong:last").html(G.join("<br>"))}a.find(".tank_img").attr("original-title",'<table width="300px"><tr><td> Points </td><td> Dom </td><td> Wall </td><td> Div </td><td> Wall </td><td> Dom </td><td> Points </td></tr><tr undefined><td> '+k+" </td><td>"+x+"</td><td> "+c+"% </td><td>I</td><td> "+b+"% </td><td>"+A+"</td><td> "+n+" </td></tr><tr "+D+"><td> "+p+"</td><td>"+w+"</td><td> "+d+"% </td><td>II</td><td> "+e+"% </td><td>"+y+"</td><td> "+s+" </td></tr><tr "+E+"><td> "+q+"</td><td>"+
B+"</td><td> "+f+"% </td><td>III</td><td> "+g+"% </td><td>"+C+"</td><td> "+u+" </td></tr><tr "+F+"><td> "+r+"</td><td>"+z+"</td><td> "+h+"% </td><td>IV</td><td> "+m+"% </td><td>"+H+"</td><td> "+v+' </td></tr><tr><td colspan="3">D'+l+" - BH damage:<br>"+coma(I)+'</td><td></td><td colspan="3">D'+l+" - BH damage:<br>"+coma(J)+"</td></tr></table>");a.find(".tank_img").tipsy({gravity:"s",html:!0});GM_addStyle(".myDivision {background: #C1E4F1; color: #000; -moz-border-radius: 5px; }")}
function GetPoints(a,c,b,d){var e,f,g,h,m,l;e=a.attr("id").split("-")[1];f=a.find("img.side_flags").eq(0).attr("src").split("/")[6].split(".")[0];g=a.find("img.side_flags").eq(1).attr("src").split("/")[6].split(".")[0];h=img_country[f].id;m=img_country[g].id;l=GetDivision(parseInt($(".user_level b").text()));$.getJSON("/en/military/battle-stats/"+e,function(e){var f,g,s,q,u,r,v,x,A,w="",y="",B=0,C=0,z=$(".currency_amount p span").text();f=JSON.stringify(e);g=parseInt(f.toString().split('"zone_id":"')[1].split('",')[0].trim());
f=e.stats.current[g.toString()][l.toString()][h.toString()][0].damage;g=e.stats.current[g.toString()][l.toString()][m.toString()][0].damage;s=Math.round(parseInt(e.division.domination["1"]));q=100-s;u=Math.round(parseInt(e.division.domination["2"]));r=100-u;v=Math.round(parseInt(e.division.domination["3"]));x=100-v;A=Math.round(parseInt(e.division.domination["4"]));ShowDivPoints(a,q,s,r,u,x,v,100-A,A,e,e.division[h.toString()]["1"].points,e.division[m.toString()]["1"].points,e.division[h.toString()]["2"].points,
e.division[m.toString()]["2"].points,e.division[h.toString()]["3"].points,e.division[m.toString()]["3"].points,e.division[h.toString()]["4"].points,e.division[m.toString()]["4"].points,e.division[h.toString()]["1"].domination,e.division[m.toString()]["1"].domination,e.division[h.toString()]["2"].domination,e.division[m.toString()]["2"].domination,e.division[h.toString()]["3"].domination,e.division[m.toString()]["3"].domination,e.division[h.toString()]["4"].domination,e.division[m.toString()]["4"].domination,
f,g);f=e.division[h.toString()].total;g=e.division[m.toString()].total;a.find(".score_left").text(f);a.find(".score_right").text(g);a.find(".countyTime").text(c);for(f=0;f<e.campaigns.length;f++)g=e.campaigns[f],g.side_country_id==h?(B++,w+=B+". Offer: <b style=color:#8aff00; font-weight:bold;>"+g.reward+" "+z+" / mil</b>; Budget: <b style=color:#8aff00; font-weight:bold;>"+g.budget+" "+z+"</b>; Fight if wall < <b style=color:#8aff00; font-weight:bold;>"+g.threshold+" %</b><br>"):e.campaigns[f].side_country_id==
m&&(C++,y+=C+". Offer: <b style=color:#8aff00; font-weight:bold;>"+g.reward+" "+z+" / mil</b>; Budget: <b style=color:#8aff00; font-weight:bold;>"+g.budget+" "+z+"</b>; Fight if wall < <b style=color:#8aff00; font-weight:bold;>"+g.threshold+" %</b><br>");""!==w&&(b.number=B,b.title=w);""!==y&&(d.number=C,d.title=y);w=$(".user_country img").attr("src").split("/")[6].split(".")[0];e=0<a.find(".mpp_sign.one").length?!0:0<a.find(".resistance_sign").length?!0:a.find(".side_flags:eq(0)").attr("src").split("/")[6].split(".")[0]==
w?!0:0<b.number?!0:!1;w=0<a.find(".mpp_sign.two").length?!0:a.find(".side_flags:eq(1)").attr("src").split("/")[6].split(".")[0]==w?!0:0<d.number?!0:!1;e&&a.find("strong:eq(0) q").remove();w&&a.find("strong:eq(1) q").remove();0<b.number&&(el=a.find("strong:eq(0)"),el.append('<q title="'+b.title+'">'+b.number+"</q>"),$j(el.find("q")).tipsy({gravity:"s",html:!0}));0<d.number&&(el=a.find("strong:eq(1)"),el.append('<q title="'+d.title+'">'+d.number+"</q>"),$j(el.find("q")).tipsy({gravity:"s",html:!0}))})}
function MercenaryCountForBT(){var a=$("#large_sidebar .user_section .user_identity .user_name").attr("href"),c,b;$.get(a,function(a){a=a.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");a=$(a).find("#achievment li ul.country_list li");for(var e=0;e<a.length;e++)img_country[$("img",a[e]).attr("tmpsrc").split("/")[6].split(".")[0]].mercenary=parseInt($(a[e]).find("em").text().split("/")[0]);c=img_country[$(".country.left_side img:eq(0)").attr("src").split("/")[6].split(".")[0]].mercenary;
b=img_country[$(".country.right_side img:eq(0)").attr("src").split("/")[6].split(".")[0]].mercenary;$("#pvp_header .country.left_side").prepend('<div style="z-index: 10!important; background:#ffffff; border-radius: 5px; -moz-border-radius: 5px; webkit-border-radius: 5px; padding-left: 5px; padding-right: 5px; margin-right: 5px;"><img src="http://www.erepublik.com/images/achievements/icon_achievement_mercenary_on.gif" style="height: 25px"> <strong class="eRSMerscBT" style="font-weight: bold; font-size: 12px; color: #666">'+
c+"</strong></div>");$("#pvp_header .country.right_side").prepend('<div style="z-index: 10!important; background:#ffffff; border-radius: 5px; -moz-border-radius: 5px; webkit-border-radius: 5px; padding-left: 5px; padding-right: 5px;  margin-left: 5px;"><img src="http://www.erepublik.com/images/achievements/icon_achievement_mercenary_on.gif" style="height: 25px"> <strong style="font-weight: bold; font-size: 12px; color: #666">'+b+"</strong></div>");MercenaryBTUpdate()})}
function MercenaryBTUpdate(){$j(document).ajaxSuccess(function(a,c,b){if(null!=b.url.match(/military\/fight-shoot$/)||null!=b.url.match(/military\/fight-shoot/)||null!=b.url.match(/military\/fight-shooot/)||null!=b.url.match(/military\/deploy-bomb/))a=JSON.parse(c.responseText),c=a.message,a.error||"ENEMY_KILLED"!=c&&"OK"!=c||(a=parseInt($(".eRSMerscBT").text()),25>a&&(a+=1),$(".eRSMerscBT").text(a))})}
function GetMercenaryCountForCampaignsPage(){var a=$("#large_sidebar .user_section .user_identity .user_name").attr("href");$.get(a,function(a){a=a.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");a=$(a).find('img[alt="mercenary"]').parent().find("ul.country_list li");for(var b=0;b<a.length;b++)img_country[$("img",a[b]).attr("tmpsrc").split("/")[6].split(".")[0]].mercenary=parseInt($(a[b]).find("em").text().split("/")[0]);$("#battle_listing .bod_listing li, #battle_listing .country_battles li, #battle_listing .allies_battles li, #battle_listing .all_battles li").each(function(){ShowMercenaryCountOnCampaignsPage($(this))})})}
function ShowMercenaryCountOnCampaignsPage(a){var c="battle_mercenary";a.parent().hasClass("bod_listing")&&(c="cod_mercenary "+c);var b=a.find("img.side_flags").eq(0).attr("src").split("/")[6].split(".")[0],d=a.find("img.side_flags").eq(1).attr("src").split("/")[6].split(".")[0],b=img_country[b].mercenary,e="merc";25==b&&(e="");0<b&&25>b&&(e="half");var d=img_country[d].mercenary,f="merc";25==d&&(f="");0<d&&25>d&&(f="half");var g=document.createElement("div");g.className=c;g.title="Mercenary Medal kills for each side";
g.innerHTML='<span class="'+e+'">'+b+'</span><span>V</span><span class="'+f+'">'+d+"</span>";a.find(".battle_mercenary").remove();a.find("a.fight_button").after(g);a.find(".battle_mercenary").tipsy({gravity:"s"})}
var $=jQuery=jQuery.noConflict(!0),$j=unsafeWindow.jQuery,LANG="undefined"==typeof unsafeWindow.erepublik.settings.culture?unsafeWindow.culture:unsafeWindow.erepublik.settings.culture,isOrg=!1,bonusCountry=!1,bonusNE=!1,t=$(".eday strong").text().split(" "),date=$(".eday strong").text().replace(",","").trim(),Kills=0,Damage=0,Guerrilla=0,Hits=0,currentTP,nextTP,doneTP,startTP,neCountry,neIcon="http://i.imgur.com/7B6Cluh.png",Hitsdamage,eRS={citizenId:0,isAutoEatingStarted:!1,country:0,version:"2.1.33"},
country=[];country.Romania=[];country.Romania.id=1;country.Brazil=[];country.Brazil.id=9;country.Italy=[];country.Italy.id=10;country.France=[];country.France.id=11;country.Germany=[];country.Germany.id=12;country.Hungary=[];country.Hungary.id=13;country.China=[];country.China.id=14;country.Spain=[];country.Spain.id=15;country.Canada=[];country.Canada.id=23;country.USA=[];country.USA.id=24;country.Mexico=[];country.Mexico.id=26;country.Argentina=[];country.Argentina.id=27;country.Venezuela=[];
country.Venezuela.id=28;country["United-Kingdom"]=[];country["United-Kingdom"].id=29;country["United Kingdom"]=[];country["United Kingdom"].id=29;country.Switzerland=[];country.Switzerland.id=30;country.Netherlands=[];country.Netherlands.id=31;country.Belgium=[];country.Belgium.id=32;country.Austria=[];country.Austria.id=33;country["Czech-Republic"]=[];country["Czech-Republic"].id=34;country["Czech Republic"]=[];country["Czech Republic"].id=34;country.Poland=[];country.Poland.id=35;
country.Slovakia=[];country.Slovakia.id=36;country.Norway=[];country.Norway.id=37;country.Sweden=[];country.Sweden.id=38;country.Finland=[];country.Finland.id=39;country.Ukraine=[];country.Ukraine.id=40;country.Russia=[];country.Russia.id=41;country.Bulgaria=[];country.Bulgaria.id=42;country.Turkey=[];country.Turkey.id=43;country.Greece=[];country.Greece.id=44;country.Japan=[];country.Japan.id=45;country["South-Korea"]=[];country["South-Korea"].id=47;country["South Korea"]=[];
country["South Korea"].id=47;country.India=[];country.India.id=48;country.Indonesia=[];country.Indonesia.id=49;country.Australia=[];country.Australia.id=50;country["South-Africa"]=[];country["South-Africa"].id=51;country["South Africa"]=[];country["South Africa"].id=51;country["Republic-of-Moldova"]=[];country["Republic-of-Moldova"].id=52;country["Republic of Moldova"]=[];country["Republic of Moldova"].id=52;country.Portugal=[];country.Portugal.id=53;country.Ireland=[];country.Ireland.id=54;
country.Denmark=[];country.Denmark.id=55;country.Iran=[];country.Iran.id=56;country.Pakistan=[];country.Pakistan.id=57;country.Israel=[];country.Israel.id=58;country.Thailand=[];country.Thailand.id=59;country.Slovenia=[];country.Slovenia.id=61;country.Croatia=[];country.Croatia.id=63;country.Chile=[];country.Chile.id=64;country.Serbia=[];country.Serbia.id=65;country.Malaysia=[];country.Malaysia.id=66;country.Philippines=[];country.Philippines.id=67;country.Singapore=[];country.Singapore.id=68;
country["Bosnia-Herzegovina"]=[];country["Bosnia-Herzegovina"].id=69;country["Bosnia and Herzegovina"]=[];country["Bosnia and Herzegovina"].id=69;country.Estonia=[];country.Estonia.id=70;country.Latvia=[];country.Latvia.id=71;country.Lithuania=[];country.Lithuania.id=72;country["North-Korea"]=[];country["North-Korea"].id=73;country["North Korea"]=[];country["North Korea"].id=73;country.Uruguay=[];country.Uruguay.id=74;country.Paraguay=[];country.Paraguay.id=75;country.Bolivia=[];
country.Bolivia.id=76;country.Peru=[];country.Peru.id=77;country.Colombia=[];country.Colombia.id=78;country["Republic-of-Macedonia-FYROM"]=[];country["Republic-of-Macedonia-FYROM"].id=79;country["Republic of Macedonia (FYROM)"]=[];country["Republic of Macedonia (FYROM)"].id=79;country.Montenegro=[];country.Montenegro.id=80;country["Republic-of-China-Taiwan"]=[];country["Republic-of-China-Taiwan"].id=81;country["Republic of China (Taiwan)"]=[];country["Republic of China (Taiwan)"].id=81;
country.Cyprus=[];country.Cyprus.id=82;country.Belarus=[];country.Belarus.id=83;country["New-Zealand"]=[];country["New-Zealand"].id=84;country["New Zealand"]=[];country["New Zealand"].id=84;country["Saudi-Arabia"]=[];country["Saudi-Arabia"].id=164;country["Saudi Arabia"]=[];country["Saudi Arabia"].id=164;country.Egypt=[];country.Egypt.id=165;country["United-Arab-Emirates"]=[];country["United-Arab-Emirates"].id=166;country["United Arab Emirates"]=[];country["United Arab Emirates"].id=166;
country.Albania=[];country.Albania.id=167;var img_country=[];img_country.Romania=[];img_country.Romania.id=1;img_country.Brazil=[];img_country.Brazil.id=9;img_country.Italy=[];img_country.Italy.id=10;img_country.France=[];img_country.France.id=11;img_country.Germany=[];img_country.Germany.id=12;img_country.Hungary=[];img_country.Hungary.id=13;img_country.China=[];img_country.China.id=14;img_country.Spain=[];img_country.Spain.id=15;img_country.Canada=[];img_country.Canada.id=23;img_country.USA=[];
img_country.USA.id=24;img_country.Mexico=[];img_country.Mexico.id=26;img_country.Argentina=[];img_country.Argentina.id=27;img_country.Venezuela=[];img_country.Venezuela.id=28;img_country["United-Kingdom"]=[];img_country["United-Kingdom"].id=29;img_country.Switzerland=[];img_country.Switzerland.id=30;img_country.Netherlands=[];img_country.Netherlands.id=31;img_country.Belgium=[];img_country.Belgium.id=32;img_country.Austria=[];img_country.Austria.id=33;img_country["Czech-Republic"]=[];
img_country["Czech-Republic"].id=34;img_country.Poland=[];img_country.Poland.id=35;img_country.Slovakia=[];img_country.Slovakia.id=36;img_country.Norway=[];img_country.Norway.id=37;img_country.Sweden=[];img_country.Sweden.id=38;img_country.Finland=[];img_country.Finland.id=39;img_country.Ukraine=[];img_country.Ukraine.id=40;img_country.Russia=[];img_country.Russia.id=41;img_country.Bulgaria=[];img_country.Bulgaria.id=42;img_country.Turkey=[];img_country.Turkey.id=43;img_country.Greece=[];
img_country.Greece.id=44;img_country.Japan=[];img_country.Japan.id=45;img_country["South-Korea"]=[];img_country["South-Korea"].id=47;img_country.India=[];img_country.India.id=48;img_country.Indonesia=[];img_country.Indonesia.id=49;img_country.Australia=[];img_country.Australia.id=50;img_country["South-Africa"]=[];img_country["South-Africa"].id=51;img_country["Republic-of-Moldova"]=[];img_country["Republic-of-Moldova"].id=52;img_country.Portugal=[];img_country.Portugal.id=53;img_country.Ireland=[];
img_country.Ireland.id=54;img_country.Denmark=[];img_country.Denmark.id=55;img_country.Iran=[];img_country.Iran.id=56;img_country.Pakistan=[];img_country.Pakistan.id=57;img_country.Israel=[];img_country.Israel.id=58;img_country.Thailand=[];img_country.Thailand.id=59;img_country.Slovenia=[];img_country.Slovenia.id=61;img_country.Croatia=[];img_country.Croatia.id=63;img_country.Chile=[];img_country.Chile.id=64;img_country.Serbia=[];img_country.Serbia.id=65;img_country.Malaysia=[];
img_country.Malaysia.id=66;img_country.Philippines=[];img_country.Philippines.id=67;img_country.Singapore=[];img_country.Singapore.id=68;img_country["Bosnia-Herzegovina"]=[];img_country["Bosnia-Herzegovina"].id=69;img_country.Estonia=[];img_country.Estonia.id=70;img_country.Latvia=[];img_country.Latvia.id=71;img_country.Lithuania=[];img_country.Lithuania.id=72;img_country["North-Korea"]=[];img_country["North-Korea"].id=73;img_country.Uruguay=[];img_country.Uruguay.id=74;img_country.Paraguay=[];
img_country.Paraguay.id=75;img_country.Bolivia=[];img_country.Bolivia.id=76;img_country.Peru=[];img_country.Peru.id=77;img_country.Colombia=[];img_country.Colombia.id=78;img_country["Republic-of-Macedonia-FYROM"]=[];img_country["Republic-of-Macedonia-FYROM"].id=79;img_country.Montenegro=[];img_country.Montenegro.id=80;img_country["Republic-of-China-Taiwan"]=[];img_country["Republic-of-China-Taiwan"].id=81;img_country.Cyprus=[];img_country.Cyprus.id=82;img_country.Belarus=[];
img_country.Belarus.id=83;img_country["New-Zealand"]=[];img_country["New-Zealand"].id=84;img_country["Saudi-Arabia"]=[];img_country["Saudi-Arabia"].id=164;img_country.Egypt=[];img_country.Egypt.id=165;img_country["United-Arab-Emirates"]=[];img_country["United-Arab-Emirates"].id=166;img_country.Albania=[];img_country.Albania.id=167;var cur_country=[];cur_country.RON="Romania";cur_country.BRL="Brazil";cur_country.ITL="Italy";cur_country.FRF="France";cur_country.DEM="Germany";cur_country.HUF="Hungary";
cur_country.CNY="China";cur_country.ESP="Spain";cur_country.CAD="Canada";cur_country.USD="USA";cur_country.MXN="Mexico";cur_country.ARS="Argentina";cur_country.VEB="Venezuela";cur_country.GBP="United-Kingdom";cur_country.CHF="Switzerland";cur_country.NLG="Netherlands";cur_country.BEF="Belgium";cur_country.ATS="Austria";cur_country.CZK="Czech-Republic";cur_country.PLN="Poland";cur_country.SKK="Slovakia";cur_country.NOK="Norway";cur_country.SEK="Sweden";cur_country.FIM="Finland";cur_country.UAH="Ukraine";
cur_country.RUB="Russia";cur_country.BGN="Bulgaria";cur_country.TRY="Turkey";cur_country.GRD="Greece";cur_country.JPY="Japan";cur_country.KRW="South-Korea";cur_country.INR="India";cur_country.IDR="Indonesia";cur_country.AUD="Australia";cur_country.ZAR="South-Africa";cur_country.MDL="Republic-of-Moldova";cur_country.PTE="Portugal";cur_country.IEP="Ireland";cur_country.DKK="Denmark";cur_country.IRR="Iran";cur_country.PKR="Pakistan";cur_country.NIS="Israel";cur_country.THB="Thailand";
cur_country.SIT="Slovenia";cur_country.HRK="Croatia";cur_country.CLP="Chile";cur_country.RSD="Serbia";cur_country.MYR="Malaysia";cur_country.PHP="Philippines";cur_country.SGD="Singapore";cur_country.BAM="Bosnia-Herzegovina";cur_country.EEK="Estonia";cur_country.LVL="Latvia";cur_country.LTL="Lithuania";cur_country.KPW="North-Korea";cur_country.UYU="Uruguay";cur_country.PYG="Paraguay";cur_country.BOB="Bolivia";cur_country.PEN="Peru";cur_country.COP="Colombia";cur_country.MKD="Republic-of-Macedonia-FYROM";
cur_country.MEP="Montenegro";cur_country.TWD="Republic-of-China-Taiwan";cur_country.CYP="Cyprus";cur_country.BYR="Belarus";cur_country.NZD="New-Zealand";cur_country.SAR="Saudi-Arabia";cur_country.EGP="Egypt";cur_country.AED="United-Arab-Emirates";cur_country.ALL="Albania";var rank=[];rank.Recruit=1;rank.Private=2;rank["Private *"]=3;rank["Private **"]=4;rank["Private ***"]=5;rank.Corporal=6;rank["Corporal *"]=7;rank["Corporal **"]=8;rank["Corporal ***"]=9;rank.Sergeant=10;rank["Sergeant *"]=11;
rank["Sergeant **"]=12;rank["Sergeant ***"]=13;rank.Lieutenant=14;rank["Lieutenant *"]=15;rank["Lieutenant **"]=16;rank["Lieutenant ***"]=17;rank.Captain=18;rank["Captain *"]=19;rank["Captain **"]=20;rank["Captain ***"]=21;rank.Major=22;rank["Major *"]=23;rank["Major **"]=24;rank["Major ***"]=25;rank.Commander=26;rank["Commander *"]=27;rank["Commander **"]=28;rank["Commander ***"]=29;rank["Lt Colonel"]=30;rank["Lt Colonel *"]=31;rank["Lt Colonel **"]=32;rank["Lt Colonel ***"]=33;rank.Colonel=34;
rank["Colonel *"]=35;rank["Colonel **"]=36;rank["Colonel ***"]=37;rank.General=38;rank["General *"]=39;rank["General **"]=40;rank["General ***"]=41;rank["Field Marshal"]=42;rank["Field Marshal *"]=43;rank["Field Marshal **"]=44;rank["Field Marshal ***"]=45;rank["Supreme Marshal"]=46;rank["Supreme Marshal *"]=47;rank["Supreme Marshal **"]=48;rank["Supreme Marshal ***"]=49;rank["National Force"]=50;rank["National Force *"]=51;rank["National Force **"]=52;rank["National Force ***"]=53;
rank["World Class Force"]=54;rank["World Class Force *"]=55;rank["World Class Force **"]=56;rank["World Class Force ***"]=57;rank["Legendary Force"]=58;rank["Legendary Force *"]=59;rank["Legendary Force **"]=60;rank["Legendary Force ***"]=61;rank["God of War"]=62;rank["God of War *"]=63;rank["God of War **"]=64;rank["God of War ***"]=65;rank["Titan "]=66;rank["Titan *"]=67;rank["Titan **"]=68;rank["Titan ***"]=69;var img_rank=[];img_rank.recruit_0=1;img_rank.private_0=2;img_rank.private_1=3;
img_rank.private_2=4;img_rank.private_3=5;img_rank.corporal_0=6;img_rank.corporal_1=7;img_rank.corporal_2=8;img_rank.corporal_3=9;img_rank.sergeant_0=10;img_rank.sergeant_1=11;img_rank.sergeant_2=12;img_rank.sergeant_3=13;img_rank.lieutenant_0=14;img_rank.lieutenant_1=15;img_rank.lieutenant_2=16;img_rank.lieutenant_3=17;img_rank.captain_0=18;img_rank.captain_1=19;img_rank.captain_2=20;img_rank.captain_3=21;img_rank.major_0=22;img_rank.major_1=23;img_rank.major_2=24;img_rank.major_3=25;
img_rank.commander_0=26;img_rank.commander_1=27;img_rank.commander_2=28;img_rank.commander_3=29;img_rank.lt_colonel_0=30;img_rank.lt_colonel_1=31;img_rank.lt_colonel_2=32;img_rank.lt_colonel_3=33;img_rank.colonel_0=34;img_rank.colonel_1=35;img_rank.colonel_2=36;img_rank.colonel_3=37;img_rank.general_0=38;img_rank.general_1=39;img_rank.general_2=40;img_rank.general_3=41;img_rank.field_marshal_0=42;img_rank.field_marshal_1=43;img_rank.field_marshal_2=44;img_rank.field_marshal_3=45;
img_rank.supreme_marshal_0=46;img_rank.supreme_marshal_1=47;img_rank.supreme_marshal_2=48;img_rank.supreme_marshal_3=49;img_rank.national_force_0=50;img_rank.national_force_1=51;img_rank.national_force_2=52;img_rank.national_force_3=53;img_rank.world_class_force_0=54;img_rank.world_class_force_1=55;img_rank.world_class_force_2=56;img_rank.world_class_force_3=57;img_rank.legendary_force_0=58;img_rank.legendary_force_1=59;img_rank.legendary_force_2=60;img_rank.legendary_force_3=61;
img_rank.god_of_war_0=62;img_rank.god_of_war_1=63;img_rank.god_of_war_2=64;img_rank.god_of_war_3=65;img_rank.titan_0=66;img_rank.titan_1=67;img_rank.titan_2=68;img_rank.titan_3=69;var weapon=[];weapon.q0=0;weapon["q-1"]=0;weapon.q1=20;weapon.q2=40;weapon.q3=60;weapon.q4=80;weapon.q5=100;weapon.q6=120;weapon.q7=200;weapon.q10=100;
var meta_link="http://userscripts.org:8080/scripts/source/156586.meta.js",script_link="http://userscripts.org:8080/scripts/source/156586.user.js",industry_id={food:1,weapon:2,ticket:3,food_raw:7,weapon_raw:12,hospital:5,defence_system:6},id_industry={1:"food",2:"weapon",3:"ticket",7:"food_raw",12:"weapon_raw",5:"hospital",6:"defence_system"},options={improveProfilePage:!0,improveMarket:!0,improveBattlefield:!0,autoEnergyRecover:!0,improveMonetaryMarket:!0,companyManager:!0,newLevelAlerter:!0,removeExternalLinkWarn:!1,
preventSidebarScroll:!1,improveInventory:!0,improveExchangeMarket:!0,noKillsDamage:!0,myPlaces:!0,TPmedal:!0,showNE:!0,mercenaryPoints:!0,campaignPoints:!0,showNE:!0,maxEnergy:!0,showStorageInv:!1,VerHor:2,AllStock:1,showDonate:!1,rememberDonation:!1,customLinks:!1,newNews:!1,spareG:!1,betterIgm:!1,autoBot:!1,quickMarket:!1,reShout:!1,filterGuerrilla:!1,filterMedals:!1,fireSelected:!1,changeSalaryAll:!1,profitCalculator:!1,showPriceCompare:!1,damageCalculator:!1,sortWages:!1,mercBT:!1,findOffer:!1,
showRec:!1,improveMessages:!1,showProfitability:!1,cheaperPack:!1,getItemPrice:!1,checkAllies:!1,boostBattle:!1,removeDead:!1,removeMore:!1,showOffers:!1,storageCapacity:!1,doQuickAccess:!1,myIP:!1,timeRefresh:120,energyStorage:100};
$(document).ready(function(){if(-1==window.location.href.indexOf("get-gold/health")){isOrg="Or"==$(".user_level b").first().text().trim()?!0:!1;0<$("#large_sidebar .user_section .user_identity .user_name").length&&(eRS.citizenId=parseInt($("#large_sidebar .user_section .user_identity .user_name").attr("href").split("/")[6]?$("#large_sidebar .user_section .user_identity .user_name").attr("href").split("/")[6]:$("#large_sidebar .user_section .user_identity .user_name").attr("href").split("/")[4]));
eRS.country=cur_country[$(".currency_amount p img").attr("alt").trim()];if(!isOrg){var a=GM_getValue(eRS.citizenId+".killsToday"+date),c=GM_getValue(eRS.citizenId+".damageToday"+date),b=GM_getValue(eRS.citizenId+".hitsToday"+date),d=GM_getValue(eRS.citizenId+".guerrillaToday"+date);"undefined"!=typeof a?Kills=JSON.parse(a):GM_setValue(eRS.citizenId+".killsToday"+date,JSON.stringify(0));"undefined"!=typeof c?Damage=JSON.parse(c):GM_setValue(eRS.citizenId+".damageToday"+date,JSON.stringify(0));"undefined"!=
typeof b?Hits=JSON.parse(b):GM_setValue(eRS.citizenId+".hitsToday"+date,JSON.stringify(0));"undefined"!=typeof d?Guerrilla=JSON.parse(d):GM_setValue(eRS.citizenId+".guerrillaToday"+date,JSON.stringify(0))}a=GM_getValue(eRS.citizenId+".eRS_options");"undefined"!=typeof a&&(options=JSON.parse(a));"undefined"==typeof options.improveProfilePage&&(options.improveProfilePage=!0);"undefined"==typeof options.improveMarket&&(options.improveMarket=!0);"undefined"==typeof options.improveBattlefield&&(options.improveBattlefield=
!0);"undefined"==typeof options.autoEnergyRecover&&(options.autoEnergyRecover=!0);"undefined"==typeof options.improveMonetaryMarket&&(options.improveMonetaryMarket=!0);"undefined"==typeof options.companyManager&&(options.companyManager=!0);"undefined"==typeof options.newLevelAlerter&&(options.newLevelAlerter=!0);"undefined"==typeof options.removeExternalLinkWarn&&(options.removeExternalLinkWarn=!1);"undefined"==typeof options.preventSidebarScroll&&(options.preventSidebarScroll=!1);"undefined"==typeof options.improveInventory&&
(options.improveInventory=!0);"undefined"==typeof options.improveExchangeMarket&&(options.improveExchangeMarket=!0);"undefined"==typeof options.noKillsDamage&&(options.noKillsDamage=!0);"undefined"==typeof options.myPlaces&&(options.myPlaces=!0);"undefined"==typeof options.TPmedal&&(options.TPmedal=!0);"undefined"==typeof options.mercenaryPoints&&(options.mercenaryPoints=!0);"undefined"==typeof options.campaignPoints&&(options.campaignPoints=!0);"undefined"==typeof options.showNE&&(options.showNE=
!0);"undefined"==typeof options.maxEnergy&&(options.maxEnergy=!0);"undefined"==typeof options.showStorageInv&&(options.showStorageInv=!1);"undefined"==typeof options.VerHor&&(options.VerHor=2);"undefined"==typeof options.AllStock&&(options.AllStock=1);"undefined"==typeof options.showDonate&&(options.showDonate=!1);"undefined"==typeof options.rememberDonation&&(options.rememberDonation=!1);"undefined"==typeof options.customLinks&&(options.customLinks=!1);"undefined"==typeof options.newNews&&(options.newNews=
!1);"undefined"==typeof options.spareG&&(options.spareG=!1);"undefined"==typeof options.betterIgm&&(options.betterIgm=!1);"undefined"==typeof options.autoBot&&(options.autoBot=!1);"undefined"==typeof options.quickMarket&&(options.quickMarket=!1);"undefined"==typeof options.reShout&&(options.reShout=!1);"undefined"==typeof options.filterGuerrilla&&(options.filterGuerrilla=!1);"undefined"==typeof options.filterMedal&&(options.filterMedal=!1);"undefined"==typeof options.fireSelected&&(options.fireSelected=
!1);"undefined"==typeof options.changeSalaryAll&&(options.changeSalaryAll=!1);"undefined"==typeof options.profitCalculator&&(options.profitCalculator=!1);"undefined"==typeof options.showPriceCompare&&(options.showPriceCompare=!1);"undefined"==typeof options.damageCalculator&&(options.damageCalculator=!1);"undefined"==typeof options.sortWages&&(options.sortWages=!1);"undefined"==typeof options.mercBT&&(options.mercBT=!1);"undefined"==typeof options.findOffer&&(options.findOffer=!1);"undefined"==typeof options.showRec&&
(options.showRec=!1);"undefined"==typeof options.improveMessages&&(options.improveMessages=!1);"undefined"==typeof options.showProfitability&&(options.showProfitability=!1);"undefined"==typeof options.cheaperPack&&(options.cheaperPack=!1);"undefined"==typeof options.getItemPrice&&(options.getItemPrice=!1);"undefined"==typeof options.checkAllies&&(options.checkAllies=!1);"undefined"==typeof options.boostBattle&&(options.boostBattle=!1);"undefined"==typeof options.removeDead&&(options.removeDead=!1);
"undefined"==typeof options.removeMore&&(options.removeMore=!1);"undefined"==typeof options.showOffers&&(options.showOffers=!1);"undefined"==typeof options.storageCapacity&&(options.storageCapacity=!1);"undefined"==typeof options.doQuickAccess&&(options.doQuickAccess=!1);"undefined"==typeof options.myIP&&(options.myIP=!1);"undefined"==typeof options.timeRefresh&&(options.timeRefresh=120);"undefined"==typeof options.energyStorage&&(options.energyStorage=100);if(!0==isOrg)AddStyles(),DrawLogo(),CheckForUpdate(),
options.myPlaces&&UpdateMenu(),options.customLinks&&SidebarLinks(),options.storageCapacity&&StorageCapacity(),0<window.location.href.indexOf("/article/")?options.showDonate&&donateEverywhere(1):0<window.location.href.indexOf("/economy/donate-money/")?options.rememberDonation&&(ShowRememberDonate(2),$("button[id^=buttonDonateId_]").bind("click",function(a){RememberDonate(2,$(this))})):0<window.location.href.indexOf("/economy/donate-items/")?options.rememberDonation&&(ShowRememberDonate(1),$(".donateItem").bind("click",
function(a){RememberDonate(1,$(this))})):0<window.location.href.indexOf("/economy/market/")?(options.improveMarket&&(CustomOffer(),MarketButtons()),options.showPriceCompare&&ShowPriceCompare(),options.showProfitability&&ShowProfitability()):0<window.location.href.indexOf("/economy/exchange-market/")?(options.improveExchangeMarket&&ExchangeMarketButtons(),options.findOffer&&FindMyOffer()):0<window.location.href.indexOf("/main/messages-compose")?((options.improveMessages||options.showDonate||options.showRec)&&
unb(),options.betterIgm&&BetterIgm(),options.showDonate&&donateEverywhere(2)):0<window.location.href.indexOf("/main/messages-inbox")||0<window.location.href.indexOf("/main/messages-paginated")?((options.improveMessages||options.showDonate)&&unb(),options.showRec&&GetRecepients()):0<window.location.href.indexOf("/main/messages-read")&&((options.improveMessages||options.showRec)&&unb(),options.improveMessages&&addLock(),options.showDonate&&donateEverywhere(3));else{ClearOldStuff();AddFlagTip();CheckForUpdate();
KillExclamationMark();AddStyles();DrawLogo();PreventScroll();options.newLevelAlerter&&NewLevelAlerter();options.myIP&&MyIP();options.doQuickAccess&&DoQuickAccess();options.showOffers&&ShowOffers();options.removeExternalLinkWarn&&($("#wall_master").bind("DOMNodeInserted",function(a){RemoveExternalLinkWarn()}),RemoveExternalLinkWarn());options.spareG&&SpareChange();options.quickMarket&&QuickMarket();var e=0;options.showStorageInv&&-1==window.location.href.indexOf("/economy/inventory")&&StorageInventory();
options.myPlaces&&UpdateMenu();options.noKillsDamage&&ShowKillDamage(0);options.maxEnergy&&MaxRecoverEnergy();options.customLinks&&SidebarLinks();options.storageCapacity&&StorageCapacity();if(4==window.location.href.split("/").length){NewFuncs();if(options.reShout||options.filterGuerrilla||options.filterMedals)unsafeWindow.filter=!0,0==$("#isGroupFeed").val()?FilterPost(".wall_post_list ul"):FilterPost("#wall_master"),FilterPostBind();options.newNews&&NewsCategories();options.autoEnergyRecover&&EnergyRecoverer();
setTimeout(function(){window.location.href="http://www.erepublik.com"},84E4)}if(0<window.location.href.indexOf("/article/"))options.showDonate&&(donateEverywhere(1),$(".load-more-comments").bind("click",function(){setTimeout(function(){donateEverywhere(1)},1500)}));else if(0<window.location.href.indexOf("/military/campaigns")){$(".combat_missions").remove();options.checkAllies&&CheckAllies();var f=function(){$("#battle_listing").append('<div style="display:none" id="errors"></div>');options.mercenaryPoints&&
GetMercenaryCountForCampaignsPage();options.showNE&&0==e&&(NaturalEnemy(0),e=1);options.campaignPoints&&GM_xmlhttpRequest({method:"GET",url:"http://www.erepublik.com/"+LANG+"/military/campaigns",onload:function(a){var b=a.responseText.replace(/src=/g,"tmpsrc=").replace(/\.css/g,"").replace(/\.js/g,"").replace(/url\(/g,"");$("#battle_listing .bod_listing li, #battle_listing .country_battles li, #battle_listing .allies_battles li, #battle_listing .all_battles li").each(function(){var a=$(this),c=a.find(".countyTime").text(),
d={title:"",number:0},e={title:"",number:0},f=$(b).find("#"+a.attr("id"));if(0<f.length){c=f.find(".countyTime").text();if(0<f.find("strong:eq(0) q").length){var g=f.find("strong:eq(0) q");d.title=g.attr("title");d.number=g.text()}0<f.find("strong:eq(1) q").length&&(f=f.find("strong:eq(1) q"),e.title=f.attr("title"),e.number=f.text())}GetPoints(a,c,d,e)})}})},g=Math.abs(parseInt(options.timeRefresh));0<g&&(options.mercenaryPoints||options.campaignPoints)?($("#content h1.noborder").text("Military campaigns [Time until refresh: "+
g+" sec]"),f(),setInterval(function(){g-=1;$("#content h1.noborder").text("Military campaigns [Time until refresh: "+g+" sec]");0==g&&(f(),g=Math.abs(parseInt(options.timeRefresh)))},1E3)):f()}else if(0<window.location.href.indexOf("/economy/donate-money/"))options.rememberDonation&&(ShowRememberDonate(2),$(".marketbtn").bind("click",function(a){RememberDonate(2,$(this))}));else if(0<window.location.href.indexOf("/economy/donate-items/"))options.rememberDonation&&(ShowRememberDonate(1),$(".marketbtn").bind("click",
function(a){RememberDonate(1,$(this))}));else if(0<window.location.href.indexOf("/citizen/profile/"))options.removeDead&&RemoveDead(),options.improveProfilePage&&(FullImage(),SuperSoldierCalculator(),InfluenceCalculator(),ShowMercenary(),last5Days()),options.rememberDonation&&ShowRememberDonate(3);else if(0<window.location.href.indexOf("/main/citizen-friends/"))options.removeMore&&RemoveMore();else if(0<window.location.href.indexOf("/economy/market/"))options.improveMarket&&(CustomOffer(),MarketButtons()),
options.showPriceCompare&&ShowPriceCompare(),options.showProfitability&&ShowProfitability();else if(0<window.location.href.indexOf("/economy/exchange-market/"))options.improveExchangeMarket&&ExchangeMarketButtons(),options.findOffer&&FindMyOffer();else if(0<window.location.href.indexOf("/main/pvp"))options.noKillsDamage&&getGuerrillaDmg();else if(0<window.location.href.indexOf("/military/battlefield/")){options.boostBattle&&BoosterBattle();options.mercBT&&MercenaryCountForBT();options.improveBattlefield&&
Battlefield();options.autoBot&&AutoBot();if(options.noKillsDamage||options.TPmedal)initBattle(),NaturalEnemy(3);options.TPmedal&&TP()}else if(0<window.location.href.indexOf("/economy/myCompanies"))options.companyManager&&CompanyManager(),options.profitCalculator&&ProfitCalculator();else if(0<window.location.href.indexOf("/economy/manage-employees"))options.fireSelected&&FireEmployers(),options.sortWages&&SortWages(),options.changeSalaryAll&&ChangeSalaryAll();else if(0<window.location.href.indexOf("/economy/inventory"))options.improveInventory&&
ImproveInventory(),options.damageCalculator&&DamageCalculator(),options.cheaperPack&&CheaperPack(),options.getItemPrice&&GetItemPrice();else if(0<window.location.href.indexOf("/main/messages-compose"))(options.improveMessages||options.showDonate||options.showRec)&&unb(),options.betterIgm&&BetterIgm(),options.showDonate&&donateEverywhere(2);else if(0<window.location.href.indexOf("/main/messages-inbox")||0<window.location.href.indexOf("/main/messages-paginated"))(options.improveMessages||options.showDonate)&&
unb(),options.showRec&&GetRecepients();else if(0<window.location.href.indexOf("/main/messages-read")){if(options.improveMessages||options.showRec)addLock(),unb();options.showDonate&&donateEverywhere(3)}else 0<window.location.href.indexOf("/main/group-list/members")&&options.showDonate&&donateEverywhere(5)}}});
